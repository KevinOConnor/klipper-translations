# Pressure advance

Този документ предоставя информация за настройката на променливата на конфигурацията "аванс на налягането" за конкретна дюза и нишка. Функцията за авансиране на налягането може да бъде полезна за намаляване на размазването. За повече информация относно начина на прилагане на аванса на налягането вижте документа [kinematics](Kinematics.md).

## Настройка на pressure advance

Напредъкът в налягането прави две полезни неща - намалява размазването по време на движение без преместване и намалява размазването по време на завиване. Това ръководство използва втората функция (намаляване на размазването по време на завой) като механизъм за настройка.

За да се калибрира предварително налягането, принтерът трябва да е конфигуриран и да работи, тъй като тестът за настройка включва отпечатване и проверка на тестов обект. Добре е да прочетете изцяло този документ, преди да стартирате теста.

Използвайте слайсер, за да генерирате g-код за големия кух квадрат, който се намира в [docs/prints/square_tower.stl](prints/square_tower.stl). Използвайте висока скорост (например 100 mm/s), нулев пълнеж и голяма височина на слоя (височината на слоя трябва да бъде около 75% от диаметъра на дюзата). Уверете се, че всички функции "динамичен контрол на ускорението" са деактивирани в програмата за нарязване.

Подгответе се за теста, като издадете следната команда G-Code:

```
SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY=1 ACCEL=500
```

Тази команда кара дюзата да се движи по-бавно през ъглите, за да подчертае ефекта от налягането на екструдера. След това за принтери с екструдер с директно задвижване изпълнете командата:

```
TUNING_TOWER COMMAND=SET_PRESSURE_ADVANCE PARAMETER=ADVANCE START=0 FACTOR=.005
```

За екструдери с дълъг боуден използвайте:

```
TUNING_TOWER COMMAND=SET_PRESSURE_ADVANCE PARAMETER=ADVANCE START=0 FACTOR=.020
```

След това отпечатайте обекта. При пълно отпечатване тестовият отпечатък изглежда така:

![tuning_tower](img/tuning_tower.jpg)

Горната команда TUNING_TOWER инструктира Klipper да промени настройката на pressure_advance за всеки слой от печата. За по-високите слоеве в печата ще бъде зададена по-голяма стойност на аванса на налягането. При слоевете под идеалната стойност на pressure_advance в ъглите ще се появят петна, а при слоевете над идеалната стойност може да се стигне до заоблени ъгли и слаба екструзия, водеща до ъгъла.

Можете да отмените печатането по-рано, ако забележите, че ъглите вече не се отпечатват добре (и по този начин можете да избегнете отпечатването на слоеве, за които е известно, че са над идеалната стойност на pressure_advance).

Проверете отпечатъка и след това използвайте цифров шублер, за да откриете височината, която има най-качествени ъгли. Когато се съмнявате, предпочетете по-ниска височина.

![tune_pa](img/tune_pa.jpg)

Стойността на pressure_advance може да се изчисли по следния начин: `pressure_advance = <start> + <measured_height> * <factor>`. (Например, `0 + 12,90 * .020` ще бъде `.258`.)

Възможно е да се изберат потребителски настройки за START и FACTOR, ако това помага да се определи най-добрата настройка на аванса на налягането. Когато правите това, не забравяйте да издадете командата TUNING_TOWER в началото на всеки тестов печат.

Типичните стойности на аванса на налягането са между 0,050 и 1,000 (горната граница обикновено се използва само при екструдерите с боуден). Ако няма значително подобрение при аванс на налягането до 1,000, тогава е малко вероятно авансът на налягането да подобри качеството на отпечатъците. Върнете се към конфигурация по подразбиране с изключен аванс на налягането.

Въпреки че това упражнение за настройка директно подобрява качеството на ъглите, си струва да се помни, че добрата конфигурация на аванса на налягането също така намалява размазването по целия печат.

След приключване на този тест задайте `pressure_advance = <calculated_value>` в раздела `[extruder]` на конфигурационния файл и издайте команда RESTART. Командата RESTART ще изчисти състоянието на теста и ще върне скоростите на ускоряване и завиване към нормалните им стойности.

## Важни бележки

* Стойността на аванса на налягането зависи от екструдера, дюзата и влакното. Обикновено нишките от различни производители или с различни пигменти изискват значително различни стойности на аванса на налягането. Ето защо трябва да се калибрира напредването на налягането на всеки принтер и с всяка шпула филамент.
* Температурата на печатане и скоростта на екструдиране могат да окажат влияние върху напредъка на налягането. Уверете се, че сте настроили [разстоянието на завъртане на екструдера](Rotation_Distance.md#calibrating-rotation_distance-on-extruders) и [температурата на дюзата](http://reprap.org/wiki/Triffid_Hunter%27s_Calibration_Guide#Nozzle_Temperature), преди да настроите аванса на налягането.
* Тестовият печат е проектиран да работи с висок дебит на екструдера, но при други "нормални" настройки на режещата машина. Високият дебит се постига чрез използване на висока скорост на печат (например 100 mm/s) и голяма височина на слоя (обикновено около 75 % от диаметъра на дюзата). Другите настройки на слайсера трябва да са подобни на настройките по подразбиране (напр. периметър от 2 или 3 линии, нормално количество на прибиране). Може да е полезно да настроите скоростта на външния периметър да бъде същата като тази на останалата част от разпечатката, но това не е изискване.
* Обикновено тестовият отпечатък показва различно поведение във всеки ъгъл. Често нарязвачът сменя слоевете в един от ъглите, което може да доведе до това, че този ъгъл се различава значително от останалите три ъгъла. Ако това се случи, пренебрегнете този ъгъл и настройте предварително натиска, като използвате останалите три ъгъла. Обичайно е и останалите ъгли да се различават леко. (Това може да се дължи на малки разлики в начина, по който рамката на принтера реагира на завой в определени посоки.) Опитайте се да изберете стойност, която работи добре за всички останали ъгли. Ако се съмнявате, предпочетете по-ниска стойност на аванса на налягането.
* Ако се използва висока стойност на аванса на налягането (например над 0,200), може да се окаже, че екструдерът прескача при връщане към нормалното ускорение на принтера. Системата за изпреварване на налягането отчита налягането, като вкарва допълнителна нишка по време на ускорението и прибира тази нишка по време на забавянето. При високо ускорение и висок аванс на налягането екструдерът може да няма достатъчно въртящ момент, за да избута необходимата нишка. Ако това се случи, използвайте по-ниска стойност на ускорението или деактивирайте аванса на налягането.
* След като авансът на налягането е настроен в Klipper, все още може да е полезно да се конфигурира малка стойност на прибиране в машината за рязане (напр. 0,75 mm) и да се използва опцията "избърсване при прибиране" на машината за рязане, ако има такава. Тези настройки на резачката могат да помогнат да се противодейства на омазняването, причинено от кохезията на нишките (нишки, извадени от дюзата поради лепкавостта на пластмасата). Препоръчва се да деактивирате опцията "z-lift on retract" (повдигане при прибиране) на резачката.
* Системата за изпреварване на налягането не променя времето или траекторията на инструменталната глава. Печат с активиран аванс на налягането ще отнеме същото време като печат без аванс на налягането. Авансът на налягането също така не променя общото количество екструдирана нишка по време на печат. Авансът на налягането води до допълнително движение на екструдера по време на ускоряване и забавяне на движението. Много високата настройка на аванса на налягането ще доведе до много голямо движение на екструдера по време на ускоряването и забавянето на движението и никоя конфигурационна настройка не поставя ограничение за размера на това движение.
