# Изменения конфигурации

В этом документе описываются последние изменения программного обеспечения в файле конфигурации, которые не являются обратно совместимыми. Рекомендуется ознакомиться с этим документом при обновлении программного обеспечения Klipper.

Все даты в этом документе являются приблизительными.

## Изменение

20241203: The resonance test has been changed to include slow sweeping moves. This change requires that testing point(s) have some clearance in X/Y plane (+/- 30 mm from the test point should suffice when using the default settings). The new test should generally produce more accurate and reliable test results. However, if required, the previous test behavior can be restored by adding options `sweeping_period: 0` and `accel_per_hz: 75` to the `[resonance_tester]` config section.

20241201: In some cases Klipper may have ignored leading characters or spaces in a traditional G-Code command. For example, "99M123" may have been interpreted as "M123" and "M 321" may have been interpreted as "M321". Klipper will now report these cases with an "Unknown command" warning.

20241112: Option `CHIPS=<chip_name>` in `TEST_RESONANCES` and `SHAPER_CALIBRATE` requires specifying the full name(s) of the accel chip(s). For example, `adxl345 rpi` instead of short name - `rpi`.

20240912: `SET_PIN`, `SET_SERVO`, `SET_FAN_SPEED`, `M106`, and `M107` commands are now collated. Previously, if many updates to the same object were issued faster than the minimum scheduling time (typically 100ms) then actual updates could be queued far into the future. Now if many updates are issued in rapid succession then it is possible that only the latest request will be applied. If the previous behavior is requried then consider adding explicit `G4` delay commands between updates.

20240912: Support for `maximum_mcu_duration` and `static_value` parameters in `[output_pin]` config sections have been removed. These options have been deprecated since 20240123.

20240415: Параметр `on_error_gcode` в секции конфигурации `[virtual_sdcard]` теперь имеет значение по умолчанию. Если этот параметр не указан, то по умолчанию теперь устанавливается значение `TURN_OFF_HEATERS`. Если требуется прежнее поведение (не предпринимать никаких действий по умолчанию при ошибке во время печати virtual_sdcard), задайте параметр `on_error_gcode` с пустым значением.

20240313: Параметр `max_accel_to_decel` в разделе конфигурации `[printer]` был устаревшим. Параметр `ACCEL_TO_DECEL` команды `SET_VELOCITY_LIMIT` был устаревшим. Статус `printer.toolhead.max_accel_to_decel` был удален. Вместо него используйте параметр [minimum_cruise_ratio](./Config_Reference.md#printer). Устаревшие функции будут удалены в ближайшем будущем, а их использование в это время может привести к незначительному изменению поведения.

20240215: Удалены некоторые устаревшие функции. Использование "NTC 100K beta 3950" в качестве имени термистора было удалено (устарело на 20211110). Команды `SYNC_STEPPER_TO_EXTRUDER` и `SET_EXTRUDER_STEP_DISTANCE` были удалены, а опция конфигурации экструдера `shared_heater` была удалена (устарела на 20220210). Опция bed_mesh `relative_reference_index` была удалена (устарела на 20230619).

20240123: Параметр output_pin SET_PIN CYCLE_TIME был удален. Используйте новый модуль [pwm_cycle_time](Config_Reference.md#pwm_cycle_time), если необходимо динамически изменить время цикла вывода pwm.

20240123: Параметр output_pin `maximum_mcu_duration` устарел. Вместо него используйте секцию конфигурации [pwm_tool](Config_Reference.md#pwm_tool). Параметр будет удален в ближайшем будущем.

20240123: Параметр `static_value` в output_pin устарел. Замените его параметрами `значение` и `выключение_значения`. Параметр будет удален в ближайшем будущем.

20231216: The `[hall_filament_width_sensor]` is changed to trigger filament runout when the thickness of the filament exceeds `max_diameter`. The maximum diameter defaults to `default_nominal_filament_diameter + max_difference`. See [[hall_filament_width_sensor] configuration
reference](./Config_Reference.md#hall_filament_width_sensor) for more details.

20231207: Несколько недокументированных параметров конфигурации в разделе конфигурации `[printer]` были удалены (параметры buffer_time_low, buffer_time_high, buffer_time_start и move_flush_time).

20231110: Выпущена версия Klipper v0.12.0.

20230826: Если в `[dual_carriage]` задано или вычислено значение 0 в `[dual_carriage]`, проверка близости кареток будет отключена согласно документации. Пользователь может захотеть настроить `safe_distance явно, чтобы предотвратить случайные столкновения кареток друг с другом. Кроме того, в некоторых конфигурациях изменяется порядок движения основной и сдвоенной каретки (в некоторых конфигурациях обе каретки движутся в одном направлении, подробнее см. в [[Ссылка на конфигурацию dual_carriage]](./Config_Reference.md#dual_carriage)).

20230810: Скрипт flash-sdcard.sh теперь поддерживает оба варианта Bigtreetech SKR-3, STM32H743 и STM32H723. Для этого оригинальный тег btt-skr-3 теперь изменен на btt-skr-3-h743 или btt-skr-3-h723.

20230729: Изменен экспортируемый статус для `dual_carriage`. Вместо экспорта `mode` и `active_carriage`, отдельные режимы для каждой каретки экспортируются как `printer.dual_carriage.carriage_0` и `printer.dual_carriage.carriage_1`.

20230619: Опция `relative_reference_index` была устаревшей и заменена опцией `zero_reference_position`. Обратитесь к документации [Bed Mesh Documentation](./Bed_Mesh.md#the-deprecated-relative_reference_index) для получения подробной информации о том, как обновить конфигурацию. В связи с этим `RELATIVE_REFERENCE_INDEX` больше не доступен в качестве параметра для gcode-команды `BED_MESH_CALIBRATE`.

20230530: Частота canbus по умолчанию в "make menuconfig" теперь равна 1000000. Если требуется использование canbus и использование canbus с другой частотой, то обязательно выберите " Включить дополнительные низкоуровневые опции конфигурации" и укажите желаемую "Скорость шины CAN" в "make menuconfig" при компиляции и прошивке микроконтроллера.

20230525: Команда `SHAPER_CALIBRATE` немедленно применяет параметры входного шейпера, если `[input_shaper]` уже был включен.

20230407: Счетчик `установленных_байт` в журнале и в поле `printer.mcu.last_stats` был переименован в `upcoming_bytes`.

20230323: На драйверах tmc5160 `multistep_filt` теперь включен по умолчанию. Установите `driver_MULTISTEP_FILT: False` в конфигурации tmc5160 для прежнего поведения.

20230304: Команда `SET_TMC_CURRENT` теперь правильно настраивает регистр глобального скейлера для драйверов, у которых он есть. Это устраняет ограничение, при котором на tmc5160 с помощью `SET_TMC_CURRENT` нельзя было поднять ток выше, чем значение `run_current`, установленное в конфигурационном файле. Однако это имеет побочный эффект: После выполнения `SET_TMC_CURRENT` шаговик должен находиться в состоянии покоя в течение >130 мс в случае использования StealthChop2, чтобы драйвер выполнил калибровку AT#1.

20230202: Формат информации о состоянии `printer.screws_tilt_adjust` изменился. Теперь информация хранится в виде словаря винтов с полученными измерениями. Подробности см. в [ссылке на статус](Status_Reference.md#screws_tilt_adjust).

20230201: Модуль `[bed_mesh]` больше не загружает профиль `default` при запуске. Пользователям, использующим профиль `default`, рекомендуется добавить `BED_MESH_PROFILE LOAD=default` в макрос `START_PRINT` (или в конфигурацию "Start G-Code" своего слайсера, если это применимо).

20230103: Теперь с помощью скрипта flash-sdcard.sh можно прошить оба варианта Bigtreetech SKR-2, STM32F407 и STM32F429. Это означает, что оригинальный тег btt-skr2 теперь изменился на btt-skr-2-f407 или btt-skr-2-f429.

20221128: Выпущена версия Klipper v0.11.0.

20221122: Ранее, при использовании safe_z_home, было возможно, что z_hop после наведения g28 пойдет в отрицательном направлении z. Теперь z_hop выполняется после g28 только в том случае, если он приводит к положительному прыжку, что отражает поведение z_hop, который происходит перед наведением g28.

20220616: Ранее можно было прошить rp2040 в режиме загрузчика, выполнив команду `make flash FLASH_DEVICE=first`. Теперь эквивалентной командой является `make flash FLASH_DEVICE=2e8a:0003`.

20220612: Микроконтроллер rp2040 теперь имеет обходное решение для ошибки USB "rp2040-e5". Это должно сделать первые USB-соединения более надежными. Однако это может привести к изменению поведения вывода gpio15. Маловероятно, что изменение поведения gpio15 будет заметным.

20220407: Опция конфигурации temperature_fan `pid_integral_max` была удалена (она была устаревшей на 20210612).

20220407: Порядок цветов по умолчанию для светодиодов pca9632 теперь "RGBW". Добавьте явную настройку `color_order: RBGW` в секцию конфигурации pca9632, чтобы получить прежнее поведение.

20220330: Изменился формат информации о состоянии `printer.neopixel.color_data` для модулей neopixel и dotstar. Теперь информация хранится в виде списка списков цветов (вместо списка словарей). Подробности см. в [ссылке на статус](Status_Reference.md#led).

20220307: `M73` больше не будет устанавливать прогресс печати на 0, если отсутствует `P`.

20220304: Больше нет значения по умолчанию для параметра `extruder` в секциях конфигурации [extruder_stepper](Config_Reference.md#extruder_stepper). При желании укажите `extruder: extruder` явно, чтобы при запуске связать шаговый двигатель с очередью движения " экструдер".

20220210: Команда `SYNC_STEPPER_TO_EXTRUDER` устарела; команда `SET_EXTRUDER_STEP_DISTANCE` устарела; опция конфигурации [extruder](Config_Reference.md#extruder) `shared_heater` устарела. Эти функции будут удалены в ближайшем будущем. Замените `SET_EXTRUDER_STEP_DISTANCE` на `SET_EXTRUDER_ROTATION_DISTANCE`. Замените `SYNC_STEPPER_TO_EXTRUDER` на `SYNC_EXTRUDER_MOTION`. Замените секции конфигурации экструдера, использующие `shared_heater`, на секции конфигурации [extruder_stepper](Config_Reference.md#extruder_stepper) и обновите все макросы активации для использования [SYNC_EXTRUDER_MOTION](G-Codes.md#sync_extruder_motion).

20220116: Изменился код расчета `run_current` в драйверах tmc2130, tmc2208, tmc2209 и tmc2660. Для некоторых параметров `run_current` драйверы теперь могут быть настроены по-другому. Новая конфигурация должна быть более точной, но она может аннулировать предыдущую настройку драйверов tmc.

20211230: Скрипты для настройки входного формирователя (`scripts/calibrate_shaper.py` и `scripts/graph_accelerometer.py`) были переведены на использование Python3 по умолчанию. В результате пользователи должны установить Python3-версии некоторых пакетов (например, `sudo apt install python3-numpy python3-matplotlib`), чтобы продолжить использовать эти скрипты. Более подробная информация приведена в разделе [Установка программного обеспечения](Measuring_Resonances.md#software-installation). Кроме того, пользователи могут временно принудительно запустить выполнение этих скриптов под Python 2, явно вызвав интерпретатор Python2 в консоли: `python2 ~/klipper/scripts/calibrate_shaper.py ...`

20211110: Датчик температуры "NTC 100K beta 3950" устарел. Этот датчик будет удален в ближайшем будущем. Большинство пользователей сочтут температурный датчик "Generic 3950" более точным. Чтобы продолжать использовать старое (обычно менее точное) определение, определите пользовательский [термистор](Config_Reference.md#thermistor) с `temperature1: 25`, `resistance1: 100000` и `beta: 3950`.

20211104: Опция "длительность импульса шага" в "make menuconfig" была удалена. Длительность шага по умолчанию для драйверов TMC, сконфигурированных в режиме UART или SPI, теперь составляет 100ns. Новый параметр `step_pulse_duration` в разделе [stepper config](Config_Reference.md#stepper) должен быть установлен для всех степперов, которым требуется пользовательская длительность импульса.

20211102: Несколько устаревших функций были удалены. Опция шага `step_distance` была удалена (устарела на 20201222). Псевдоним датчика `rpi_temperature` был удален (устарел на 20210219). Опция mcu `pin_map` была удалена (устарела на 20210325). Опция gcode_macro `default_parameter_<name>` и доступ макроса к параметрам команды, отличным от псевдопеременной `params`, удалены (deprecated on 20210503). Опция heater `pid_integral_max` удалена (deprecated on 20210612).

20210929: Выпущена версия Klipper v0.10.0.

20210903: Значение по умолчанию [`smooth_time`](Config_Reference.md#extruder) для нагревателей изменилось на 1 секунду (с 2 секунд). Для большинства принтеров это приведет к более стабильному контролю температуры.

20210830: Имя adxl345 по умолчанию теперь "adxl345". Параметр CHIP по умолчанию для `ACCELEROMETER_MEASURE` и `ACCELEROMETER_QUERY` теперь также "adxl345".

20210830: Команда adxl345 ACCELEROMETER_MEASURE больше не поддерживает параметр RATE. Чтобы изменить скорость запроса, обновите файл printer.cfg и выполните команду RESTART.

20210821: Некоторые параметры конфигурации в `printer.configfile.settings` теперь будут отображаться в виде списков, а не необработанных строк. Если требуется фактическая необработанная строка, используйте вместо нее `printer.configfile.config`.

20210819: В некоторых случаях ход наведения `G28` может закончиться в позиции, которая номинально находится за пределами допустимого диапазона движения. В редких случаях это может привести к запутанным ошибкам "Move out of range" после наведения. Если это происходит, измените скрипты запуска, чтобы переместить инструментальную головку в допустимую позицию сразу после наведения.

20210814: Аналоговые псевдоконтакты atmega168 и atmega328 были переименованы из PE0/PE1 в PE2/PE3.

20210720: Секция controller_fan теперь по умолчанию контролирует все шаговые двигатели (а не только кинематические шаговые двигатели). Если требуется прежнее поведение, см. опцию конфигурации `stepper` в [ссылке на конфигурацию](Config_Reference.md#controller_fan).

20210703: Секция конфигурации `samd_sercom` теперь должна указывать шину sercom, которую она конфигурирует, с помощью опции `sercom`.

20210612: Параметр конфигурации `pid_integral_max` в разделах heater и temperature_fan устарел. Эта опция будет удалена в ближайшем будущем.

20210503: The gcode_macro `default_parameter_<name>` config option is deprecated. Use the `params` pseudo-variable to access macro parameters. Other methods for accessing macro parameters will be removed in the near future. Most users can replace a `default_parameter_NAME: VALUE` config option with a line like the following in the start of the macro: ` {% set NAME = params.NAME|default(VALUE)|float %}`. See the [Command Templates
document](Command_Templates.md#macro-parameters) for examples.

20210430: Команда SET_VELOCITY_LIMIT (и M204) теперь может устанавливать скорость, ускорение и square_corner_velocity, превышающие указанные значения в файле конфигурации.

20210325: Поддержка опции конфигурации `pin_map` устарела. Используйте файл [sample-aliases.cfg](../config/sample-aliases.cfg) для перевода в реальные имена выводов микроконтроллера. Опция конфигурации `pin_map` будет удалена в ближайшем будущем.

20210313: В Klipper изменилась поддержка микроконтроллеров, работающих с шиной CAN. При использовании шины CAN необходимо перепрошить все микроконтроллеры и обновить [конфигурацию Klipper](CANBUS.md).

20210310: В TMC2660 значение по умолчанию для driver_SFILT было изменено с 1 на 0.

20210227: драйверы шаговых двигателей TMC в режиме UART или SPI теперь запрашиваются раз в секунду, когда они включены - если с драйвером не удается связаться или он сообщает об ошибке, Klipper переходит в состояние отключения.

20210219: Модуль `rpi_temperature` был переименован в `temperature_host`. Замените все вхождения `sensor_type: rpi_temperature` на `sensor_type: temperature_host`. Путь к файлу температуры может быть указан в конфигурационной переменной `sensor_path`. Имя `rpi_temperature` устарело и будет удалено в ближайшем будущем.

20210201: Команда `TEST_RESONANCES` теперь отключает формирование входного сигнала, если он был ранее включен (и снова включает его после теста). Чтобы отменить это поведение и сохранить включенным входной шейпинг, можно передать команде дополнительный параметр `INPUT_SHAPING=1`.

20210201: Команда `ACCELEROMETER_MEASURE` теперь будет добавлять имя микросхемы акселерометра к имени выходного файла, если микросхеме было присвоено имя в соответствующем разделе adxl345 файла printer.cfg.

20201222: Настройка `step_distance` в секциях конфига степпера устарела. Рекомендуется обновить конфигурацию, чтобы использовать настройку [`rotation_distance`](Rotation_Distance.md). Поддержка `step_distance` будет удалена в ближайшем будущем.

20201218: Настройка `endstop_phase` в модуле endstop_phase была заменена на `trigger_phase`. При использовании модуля endstop phases необходимо преобразовать в [`вращательное_расстояние`](Rotation_Distance.md) и откалибровать все endstop фазы, выполнив команду ENDSTOP_PHASE_CALIBRATE.

20201218: Поворотные дельта- и полярные принтеры теперь должны указывать `gear_ratio` для своих поворотных степперов, и они больше не могут указывать параметр `step_distance`. Формат нового параметра gear_ratio см. в [ ссылка на конфигурацию ](Config_Reference.md#stepper).

20201213: Недопустимо указывать Z "position_endstop" при использовании "probe:z_virtual_endstop". Теперь будет возникать ошибка, если Z "position_endstop" указывается с помощью "probe:z_virtual_endstop". Удалите определение Z "position_endstop", чтобы исправить ошибку.

20201120: В разделе конфигурации `[board_pins]` теперь имя mcu указывается в явном параметре `mcu:`. Если board_pins используется для вторичного mcu, то конфигурацию необходимо обновить, чтобы указать это имя. Дополнительные сведения смотрите в [ссылка на конфигурацию](Config_Reference.md#board_pins).

20201112: Изменилось время, о котором сообщает `print_stats.print_duration`. Теперь не учитывается время до первой обнаруженной экструзии.

20201029: Опция конфигурации neopixel `color_order_GRB` была удалена. При необходимости обновите конфигурацию, чтобы установить новый параметр `color_order` на RGB, GRB, RGBW или GRBW.

20201029: Опция serial в разделе mcu config больше не устанавливает по умолчанию /dev/ttyS0. В редких случаях, когда /dev/ttyS0 является желаемым последовательным портом, его необходимо указывать явно.

20201020: Выпущена версия Klipper v0.9.0.

20200902: Расчет сопротивления RTD к температуре для преобразователей MAX31865 был исправлен таким образом, чтобы показания не были низкими. Если вы используете такое устройство, вам следует заново откалибровать температуру печати и настройки ПИД.

20200816: Объект макроса gcode `printer.gcode` был переименован в `printer.gcode_move`. Несколько недокументированных переменных в `printer.toolhead` и `printer.gcode` были удалены. Список доступных переменных шаблонов смотрите в файле docs/Command_Templates.md.

20200816: Система макросов gcode "action_" изменилась. Замените все вызовы `printer.gcode.action_emergency_stop()` на `action_emergency_stop()`, `printer.gcode.action_respond_info()` на `action_respond_info()`, а `printer.gcode.action_respond_error()` на `action_raise_error()`.

20200809: Система меню была переписана. Если меню было настроено, то его необходимо обновить до новой конфигурации. Подробности конфигурации смотрите в config/example-menu.cfg, а примеры - в klippy/extras/display/menu.cfg.

20200731: Поведение атрибута `прогресс`, сообщаемого объектом принтера `virtual_sdcard`, изменилось. Прогресс больше не сбрасывается в 0, когда печать приостанавливается. Теперь он всегда будет сообщать о прогрессе, основываясь на внутренней позиции файла, или 0, если ни один файл в данный момент не загружен.

20200725: Параметр конфигурации серво `включить` и параметр SET_SERVO `включить` были удалены. Обновите все макросы, чтобы использовать `SET_SERVO SERVO=my_servo WIDTH=0` для отключения сервопривода.

20200608: Поддержка ЖК-дисплеев изменила названия некоторых внутренних "глифов". Если была реализована пользовательская раскладка дисплея, может потребоваться обновление до последних названий глифов (список доступных глифов см. в klippy/extras/display/display.cfg).

20200606: Имена пинов в linux mcu изменились. Теперь пины имеют имена вида `gpiochip<chipid>/gpio<gpio>`. Для gpiochip0 можно также использовать короткое `gpio<gpio>`. Например, то, что раньше называлось `P20`, теперь становится `gpio20` или `gpiochip0/gpio20`.

20200603: На ЖК-дисплее 16x4, установленном по умолчанию, больше не будет отображаться предполагаемое время, оставшееся до конца печати. (Будет отображаться только прошедшее время). Если вы хотите сохранить прежнее поведение, вы можете настроить отображение этой информации в меню (см. описание display_data в config/example-extras.cfg).

20200531: Идентификатор производителя/продукта USB по умолчанию теперь равен 0x1d50/0x614e. Эти новые идентификаторы зарезервированы для Klipper (спасибо проекту openmoko). Это изменение не потребует никаких изменений в конфигурации, но новые идентификаторы могут появиться в системных журналах.

20200524: Значение по умолчанию для поля tmc5160 pwm_freq теперь равно нулю (вместо единицы).

20200425: Переменная шаблона команды gcode_macro `printer.heater` была переименована в `printer.heaters`.

20200313: Расположение экрана по умолчанию для многоэкструдерных принтеров с экраном 16x4 изменилось. Теперь по умолчанию используется раскладка экрана для одного экструдера, на котором будет отображаться активный в данный момент экструдер. Чтобы использовать предыдущую раскладку экрана, установите "display_group: _multiextruder_16x4" в разделе [display] файла printer.cfg.

20200308: Пункт меню по умолчанию `__test` был удален. Если в конфигурационном файле есть пользовательское меню, то обязательно удалите все ссылки на этот пункт меню `__test`.

20200308: Опции меню "колода" и "карта" были удалены. Для настройки расположения lcd-экрана используйте новые секции конфига display_data (подробности смотрите в config/example-extras.cfg).

20200109: Модуль bed_mesh теперь ссылается на местоположение зонда в конфигурации сетки. В связи с этим некоторые параметры конфигурации были переименованы, чтобы более точно отразить их предполагаемую функциональность. Для прямоугольных кроватей `min_point` и `max_point` были переименованы в `mesh_min` и `mesh_max` соответственно. Для круглых кроватей `bed_radius` был переименован в `mesh_radius`. Для круглых кроватей также добавлена новая опция `mesh_origin`. Обратите внимание, что эти изменения также несовместимы с ранее сохраненными профилями сетки. Если обнаружен несовместимый профиль, он будет проигнорирован и запланирован для удаления. Процесс удаления можно завершить, выполнив команду SAVE_CONFIG. Пользователю необходимо будет заново откалибровать каждый профиль.

20191218: Раздел конфигурации дисплея больше не поддерживает "lcd_type: st7567". Вместо этого используйте тип дисплея "uc1701" - установите "lcd_type: uc1701" и измените "rs_pin: some_pin" на "rst_pin: some_pin". Также может потребоваться добавить настройку "контрастность: 60".

20191210: Встроенные команды T0, T1, T2, ... были удалены. Опции конфигурации экструдера activate_gcode и deactivate_gcode были удалены. Если эти команды (и скрипты) необходимы, определите отдельные макросы в стиле [gcode_macro T0], вызывающие команду ACTIVATE_EXTRUDER. Примеры смотрите в файлах config/sample-idex.cfg и sample-multi-extruder.cfg.

20191210: Поддержка команды M206 была удалена. Заменена на вызов SET_GCODE_OFFSET. Если поддержка M206 необходима, добавьте секцию конфигурации [gcode_macro M206], которая вызывает SET_GCODE_OFFSET. (Например, "SET_GCODE_OFFSET Z=-{параметры.Z}")

20191202: Поддержка недокументированного параметра "S" команды "G4" была удалена. Замените все вхождения S на стандартный параметр "P" (задержка, указанная в миллисекундах).

20191126: В микроконтроллерах со встроенной поддержкой USB изменились названия USB. Теперь они по умолчанию используют уникальный идентификатор чипа (там, где он доступен). Если в разделе конфигурации "mcu" используется параметр "серийный", который начинается с "/dev/serial/by-id/", то, возможно, необходимо обновить конфигурацию. Выполните команду "ls /dev/serial/by-id/*" в ssh-терминале, чтобы определить новый идентификатор.

20191121: Параметр pressure_advance_lookahead_time был удален. Альтернативные параметры конфигурации смотрите в файле example.cfg.

20191112: Возможность виртуального включения драйвера степпера tmc теперь включается автоматически, если степпер не имеет специального вывода включения степпера. Удалите из конфигурации ссылки на tmcXXXX:virtual_enable. Возможность управления несколькими контактами в конфигурации stepper enable_pin была удалена. Если требуется несколько выводов, используйте секцию конфига multi_pin.

20191107: Раздел конфигурации первичного экструдера должен быть указан как " экструдер" и больше не может быть указан как " экструдер0". Шаблоны команд Gcode, запрашивающие статус экструдера, теперь доступны через "{printer.extruder}".

20191021: Выпущена версия Klipper v0.8.0

20191003: Опция move_to_previous в [safe_z_homing] теперь по умолчанию имеет значение False. (До 20190918 она была фактически False)

20190918: Опция zhop в [safe_z_homing] всегда применяется повторно после завершения наведения по оси Z. Это может потребовать от пользователей обновления пользовательских скриптов, основанных на этом модуле.

20190806: Команда SET_NEOPIXEL была переименована в SET_LED.

20190726: Цифро-аналоговый код mcp4728 изменился. По умолчанию i2c_address теперь 0x60, а опорное напряжение теперь относительно внутреннего опорного напряжения mcp4728 2.048 вольт.

20190710: Опция z_hop была удалена из раздела конфигурации [firmware_retract]. Поддержка z_hop была неполной и могла привести к некорректному поведению с несколькими распространенными слайсерами.

20190710: Необязательные параметры команды PROBE_ACCURACY изменились. Возможно, потребуется обновить все макросы или сценарии, использующие эту команду.

20190628: Из секции [skew_correction] были удалены все опции конфигурации. Конфигурация для skew_correction теперь выполняется через gcode SET_SKEW. Рекомендации по использованию см. в разделе [Skew Correction](Skew_Correction.md).

20190607: Параметры "variable_X" в gcode_macro (а также параметр VALUE в SET_GCODE_VARIABLE) теперь анализируются как литералы Python. Если значению нужно присвоить строку, оберните его в кавычки, чтобы оно было оценено как строка.

20190606: Опции конфигурации " образцы", " samples_result" и " sample_retract_dist" были перемещены в раздел конфигурации "probe". Эти опции больше не поддерживаются в секциях конфигурации "delta_calibrate", "bed_tilt", "bed_mesh", "screws_tilt_adjust", "z_tilt" или "quad_gantry_level".

20190528: Магическая переменная "status" в оценке шаблона gcode_macro была переименована в "printer".

20190520: Команда SET_GCODE_OFFSET изменилась; обновите все макросы g-кода соответствующим образом. Команда больше не будет применять запрошенное смещение к следующей команде G1. Прежнее поведение можно приблизить, используя новый параметр "MOVE=1".

20190404: Обновлены пакеты хост-программ Python. Пользователям необходимо повторно запустить скрипт ~/klipper/scripts/install-octopi.sh (или иным образом обновить зависимости python, если не используется стандартная установка OctoPi).

20190404: Параметры i2c_bus и spi_bus (в различных разделах конфигурации) теперь принимают имя шины, а не номер.

20190404: Параметры конфигурации sx1509 изменились. Параметр 'address' теперь 'i2c_address' и должен быть указан в виде десятичного числа. Там, где раньше использовалось 0x3E, теперь указывается 62.

20190328: Значение min_speed в конфигурации [temperature_fan] теперь будет соблюдаться, и вентилятор всегда будет работать на этой скорости или выше в режиме PID.

20190322: Значение по умолчанию для "driver_HEND" в секциях конфигурации [tmc2660] было изменено с 6 на 3. Поле "driver_VSENSE" было удалено (теперь оно автоматически вычисляется из run_current).

20190310: Секция конфигурации [controller_fan] теперь всегда принимает имя (например, [controller_fan my_controller_fan]).

20190308: Поле "driver_BLANK_TIME_SELECT" в разделах конфигурации [tmc2130] и [tmc2208] было переименовано в "driver_TBL".

20190308: Раздел конфигурации [tmc2660] изменился. Теперь необходимо указывать новый параметр конфигурации sense_resistor. Изменилось значение нескольких параметров driver_XXX.

20190228: Пользователи SPI или I2C на платах SAMD21 теперь должны указывать выводы шины в секции конфигурации [samd_sercom].

20190224: Опция bed_shape была удалена из bed_mesh. Опция radius была переименована в bed_radius. Пользователи с круглыми кроватями должны указать параметры bed_radius и round_probe_count.

20190107: Изменен параметр i2c_address в разделе конфигурации mcp4451. Это обычная настройка для плат Smoothieboards. Новое значение в два раза меньше старого (88 должно быть заменено на 44, а 90 - на 45).

20181220: Выпущена версия Klipper v0.7.0
