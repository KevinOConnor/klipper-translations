# Ссылка на конфигурацию

Этот документ является справочником по опциям, доступным в файле конфигурации Klipper.

Описания в этом документе отформатированы таким образом, чтобы их можно было вырезать и вставить в конфигурационный файл принтера. См. [installation document](Installation.md) для получения информации о настройке Klipper и выборе начального конфигурационного файла.

## Конфигурация микроконтроллера

### Формат имен контактов микроконтроллера

Многие параметры конфигурации требуют указания имени вывода микроконтроллера. Klipper использует аппаратные имена этих выводов - например, `PA4`.

Перед названиями выводов может стоять символ `!`, указывающий на необходимость использования обратной полярности (например, срабатывание по низкому, а не по высокому уровню).

Перед входными выводами может стоять символ `^`, указывающий на необходимость включения аппаратного подтягивающего резистора для данного вывода. Если микроконтроллер поддерживает подтягивающие резисторы, то перед входным выводом можно поставить `~`.

Обратите внимание, что некоторые секции конфигурации могут "создавать" дополнительные пины. Если это происходит, секция конфигурации, определяющая контакты, должна быть указана в файле конфигурации перед секциями, использующими эти контакты.

### [mcu]

Конфигурация основного микроконтроллера.

```
[mcu]
serial:
# Последовательный порт для подключения к MCU. Если вы не уверены (или если он
# меняется), смотрите раздел FAQ "Где мой последовательный порт?".
# Этот параметр должен быть указан при использовании последовательного порта.
#baud: 250000
# Используемая скорость передачи данных. По умолчанию 250000.
#canbus_uuid:
# Если используется устройство, подключенное к шине CAN, то этот параметр задает уникальный
# идентификатор чипа для подключения. Это значение должно быть предоставлено при использовании
# шину CAN для связи.
#canbus_interface:
# Если используется устройство, подключенное к шине CAN, то здесь задается сетевой интерфейс CAN
# сетевой интерфейс для использования. По умолчанию используется 'can0'.
#restart_method:
# Здесь задается механизм, который будет использоваться хостом для перезагрузки
# микроконтроллера. На выбор предлагаются следующие варианты: 'arduino', 'cheetah', 'rpi_usb',
# и 'command'. Метод 'arduino' (переключение DTR) распространен на
# платах и клонах Arduino. Метод 'cheetah' - это специальный
# метод, необходимый для некоторых плат Fysetc Cheetah. Метод 'rpi_usb'
# полезен на платах Raspberry Pi с микроконтроллерами, питающимися
# по USB - он кратковременно отключает питание всех USB-портов, чтобы
# выполнить сброс микроконтроллера. Метод 'command' включает в себя
# отправку команды Klipper микроконтроллеру, чтобы он мог
# сбросить себя. По умолчанию используется 'arduino', если микроконтроллер
# общается через последовательный порт, в противном случае - 'command'.
```

### [mcu my_extra_mcu]

Дополнительные микроконтроллеры (можно определить любое количество секций с префиксом "mcu"). Дополнительные микроконтроллеры вводят дополнительные контакты, которые могут быть сконфигурированы как нагреватели, шаговики, вентиляторы и т. д.. Например, если введена секция "[mcu extra_mcu]", то такие пины, как "extra_mcu:ar9", могут быть использованы в других местах конфигурации (где "ar9" - это имя аппаратного пина или псевдоним данного mcu).

```
[mcu my_extra_mcu]
# Параметры конфигурации смотрите в разделе "mcu".
```

## Общие кинематические настройки

### [принтер]

Раздел принтера управляет высокоуровневыми настройками принтера.

```
[принтер].
кинематика:
#    Тип используемого принтера. Этот параметр может быть одним из: cartesian,
#    corexy, corexz, hybrid_corexy, hybrid_corexz, rotary_delta, delta,
#    deltesian, polar, winch или none. Этот параметр должен быть указан.
max_velocity:
#    Максимальная скорость (в мм/с) головки инструмента (относительно
#    печати). Этот параметр должен быть указан.
max_accel:
#    Максимальное ускорение (в мм/с^2) головки инструмента (относительно
#    печати). Хотя этот параметр описывается как "максимальное"
#    ускорение, на практике большинство движений, которые ускоряются или замедляются.
#    будут происходить со скоростью, указанной здесь. Указанное здесь значение
#    может быть изменено во время выполнения с помощью команды SET_VELOCITY_LIMIT.
#    Этот параметр должен быть указан.
#minimum_cruise_ratio: 0.5
#    Большинство ходов разгоняется до крейсерской скорости, движется с ней.
#    крейсерской скорости, а затем замедляются. Однако некоторые ходы, которые
#    проходят небольшое расстояние, могут номинально ускориться, а затем
#    сразу же замедляться. Эта опция уменьшает максимальную скорость этих
#    ходов, чтобы обеспечить минимальное расстояние, пройденное на
#    крейсерской скорости. Иными словами, она принудительно устанавливает минимальное расстояние, пройденное
#    на крейсерской скорости по отношению к общему пройденному расстоянию. Это
#    предназначена для снижения максимальной скорости коротких зигзагообразных перемещений (и, таким образом.
#    уменьшить вибрацию принтера от этих движений). Например.
#    минимальное_отношение_крейсерской_скорости, равное 0,5, гарантирует, что автономный 1,5-миллиметровый
#    перемещение будет иметь минимальное крейсерское расстояние 0,75 мм. Укажите
#    соотношение 0.0, чтобы отключить эту функцию (не будет минимальной
#    крейсерского расстояния между ускорением и замедлением).
#    Указанное здесь значение может быть изменено во время выполнения с помощью команды
#    SET_VELOCITY_LIMIT. По умолчанию это значение равно 0,5.
#square_corner_velocity: 5.0
#    Максимальная скорость (в мм/с), с которой головка инструмента может пройти угол 90
#    угол в 90 градусов. Ненулевое значение может уменьшить изменения в экструдере
#    расхода экструдера за счет мгновенного изменения скорости
#    головки инструмента во время прохождения угла. Это значение настраивает внутреннюю
#    алгоритм центростремительной скорости при поворотах; углы с углами
#    больше 90 градусов будут иметь более высокую скорость поворота, в то время как
#    углы с углами менее 90 градусов будут иметь меньшую
#    скорость поворота. Если это значение установлено в ноль, то головка инструмента будет
#    замедляться до нуля на каждом повороте. Значение, указанное здесь, может быть
#    изменить во время выполнения с помощью команды SET_VELOCITY_LIMIT. На сайте
#    по умолчанию составляет 5 мм/с.
#max_accel_to_decel:
#    Этот параметр устарел и больше не должен использоваться.

Переведено с помощью DeepL.com (бесплатная версия)
```

### [шаговый]

Определения шагового двигателя. Разные типы принтеров (как указано в опции "кинематика" в разделе [принтер] конфигурация) требуют разных имен для шагового двигателя (например, `stepper_x` против `stepper_a`). Ниже приведены общие определения шаговиков.

Информацию о расчете параметра `расстояние_вращения` смотрите в документе [rotation distance document](Rotation_Distance.md). Информацию о самонаведении с использованием нескольких микроконтроллеров см. в документе [Multi-MCU homing](Multi_MCU_Homing.md).

```
[stepper_x]
step_pin:
#    Контакт GPIO шага (высокий уровень срабатывания). Этот параметр должен быть указан.
dir_pin:
#    Контакт GPIO направления (высокий уровень указывает на положительное направление). Этот
#    параметр должен быть указан.
enable_pin:
#    Разрешающий вывод (по умолчанию - высокий уровень; используйте ! для обозначения разрешения
#    низкий). Если этот параметр не указан, то драйвер шагового двигателя
#    драйвер должен быть всегда включен.
rotation_distance:
#    Расстояние (в мм), которое проходит ось за один полный оборот
#    шагового двигателя (или конечной передачи, если указано передаточное_отношение).
#    Этот параметр должен быть указан.
microsteps:
#    Количество микрошагов, используемых драйвером шагового двигателя. Этот
#    параметр должен быть указан.
#full_steps_per_rotation: 200
#    Количество полных шагов для одного оборота шагового двигателя.
#    Установите это значение на 200 для шагового двигателя с углом поворота 1,8 градуса или на 400 для двигателя с углом поворота
#    0,9 градусов. По умолчанию установлено значение 200.
#gear_ratio:
#    Передаточное число, если шаговый двигатель подключен к оси через
#    редуктор. Например, можно указать "5:1", если используется редуктор 5 к 1.
#    используется. Если ось имеет несколько редукторов, можно указать разделенный запятыми
#    разделенный запятыми список передаточных чисел (например, "57:11, 2:1"). Если
#    передаточное_отношение указано, то расстояние_вращения определяет
#    расстояние, которое проходит ось за один полный оборот конечной передачи.
#    По умолчанию передаточное число не используется.
#    длительность_шагового_импульса:
#    Минимальное время между фронтом импульсного сигнала шага и
#    следующим за ним фронтом сигнала "отбой". Это также используется для установки
#    минимального времени между импульсом шага и сигналом изменения направления.
#    По умолчанию 0.000000100 (100ns) для степперов TMC, которые
#    сконфигурированы в режиме UART или SPI, и по умолчанию 0.000002 (что
#    это 2us) для всех остальных степперов.
endstop_pin:
#    Контакт обнаружения переключателя конечного останова. Если этот вывод endstop находится на
#    другом микроконтроллере, чем шаговый двигатель, то он включает "мульти-микроконтроллер
#    самонаведение". Этот параметр должен быть задан для шаговых двигателей X, Y и Z
#    шаговых двигателей на принтерах с картезианским стилем.
#position_min: 0
#    Минимальное допустимое расстояние (в мм), на которое пользователь может приказать шаговому механизму
#    перемещаться.  По умолчанию 0 мм.
position_endstop:
#    Расположение конечного ограничителя (в мм). Этот параметр должен быть задан
#    для шаговых механизмов X, Y и Z на принтерах с картезианским стилем печати.
position_max:
#    Максимальное допустимое расстояние (в мм), на которое пользователь может дать команду степперу
#    перемещаться. Этот параметр должен быть указан для степперов X, Y и Z
#    степперов на принтерах с картезианским стилем печати.
#homing_speed: 5.0
#    Максимальная скорость (в мм/с) шагового устройства при наведении. По умолчанию
#    5 мм/с.
#homing_retract_dist: 5.0
#    Расстояние до отката (в мм) перед повторным наведением во время
#    самонаведения. Установите это значение на ноль, чтобы отключить второе возвращение. По умолчанию
#    является 5 мм.
#homing_retract_speed:
#    Скорость, используемая при втягивании после самонаведения, в случае, если она должна
#    отличаться от скорости наведения, которая используется по умолчанию для этого
#    параметр
#second_homing_speed:
#    Скорость (в мм/с) шагового механизма при выполнении второго возврата домой.
#    По умолчанию это homing_speed/2.
#homing_positive_dir:
#    Если установлено значение true, то при наведении шаговый механизм будет двигаться в положительном
#    направлении (в сторону от нуля); если false, то в сторону нуля. Это
#    лучше использовать значение по умолчанию, чем указывать этот параметр. По адресу
#    по умолчанию равно true, если position_endstop находится вблизи position_max, и false
#    если вблизи position_min.
```

### Декартова кинематика

Пример файла конфигурации картезианской кинематики смотрите в [example-cartesian.cfg](../config/example-cartesian.cfg).

Здесь описаны только параметры, характерные для картезианских принтеров - доступные параметры см. в разделе [общие кинематические настройки](#common-kinematic-settings)

```
[принтер].
кинематика: картезианская
max_z_velocity:
# Это задает максимальную скорость (в мм/с) перемещения вдоль оси z
# оси. Эта настройка может использоваться для ограничения максимальной скорости
# шагового двигателя z. По умолчанию используется значение max_velocity для
# max_z_velocity.
max_z_accel:
# Эта настройка задает максимальное ускорение (в мм/с^2) движения вдоль
# оси z. Оно ограничивает ускорение шагового двигателя z. По
# по умолчанию используется max_accel для max_z_accel.

# Секция stepper_x используется для описания шагового двигателя, управляющего
# осью X в картезианском роботе.
[stepper_x]

# Раздел stepper_y используется для описания шагового механизма, управляющего осью
# осью Y в картезианском роботе.
[stepper_y]

# Раздел stepper_z используется для описания шагового устройства, управляющего осью
# осью Z в картезианском роботе.
[stepper_z]
```

### Линейная дельта-кинематика

Пример файла конфигурации линейной дельта-кинематики см. в [example-delta.cfg](../config/example-delta.cfg). Информацию о калибровке смотрите в руководстве [delta calibrate guide](Delta_Calibrate.md).

Здесь описаны только параметры, характерные для линейных дельта-принтеров - доступные параметры смотрите в разделе [общие кинематические настройки](#common-kinematic-settings).

```
[принтер].
кинематика: дельта
max_z_velocity:
#    Для дельта-принтеров это ограничение максимальной скорости (в мм/с)
#    перемещения по оси z. Эта настройка может быть использована для уменьшения
#    максимальной скорости перемещений вверх/вниз (которые требуют более высокой скорости шага
#    чем другие перемещения на дельта-принтере). По умолчанию используется
#    max_velocity для max_z_velocity.
#max_z_accel:
#    Это задает максимальное ускорение (в мм/с^2) перемещения вдоль
#    оси z. Установка этого параметра может быть полезна, если принтер может достичь большего
#    ускорения при движении по XY, чем при движении по Z (например, при использовании входного формирователя).
#    По умолчанию используется max_accel для max_z_accel.
#minimum_z_position: 0
#    Минимальная позиция по Z, в которую пользователь может приказать голове переместиться.
#    в. По умолчанию равно 0.
delta_radius:
#    Радиус (в мм) горизонтальной окружности, образованной тремя линейными
#    осями. Этот параметр также может быть рассчитан как:
#    delta_radius = smooth_rod_offset - effector_offset - carriage_offset
#    Этот параметр должен быть указан.
# print_radius:
#    Радиус (в мм) действительных координат XY головки инструмента. Можно использовать
#    этот параметр для настройки проверки диапазона перемещения головки инструмента. Если
#    здесь задано большое значение, то может возникнуть команда
#    головке инструмента в столкновение с башней. По умолчанию используется
#    delta_radius для print_radius (что обычно предотвращает
#    столкновения с башней).

#    Секция stepper_a описывает шаговый механизм, управляющий передней
#    левой башней (на 210 градусов). Эта секция также управляет параметрами наведения
#    параметрами (homing_speed, homing_retract_dist) для всех башен.
[stepper_a]
position_endstop:
#    Расстояние (в мм) между соплом и станиной, когда сопло находится
#    в центре зоны сборки и срабатывает концевой упор. Этот
#    параметр должен быть указан для степпера_a; для степпера_b и
#    stepper_c этот параметр по умолчанию принимает значение, указанное для
# stepper_a.
длина_руки:
#    Длина (в мм) диагонального стержня, соединяющего эту башню с
#    печатающей головкой. Этот параметр должен быть указан для степпера_a; для
#    stepper_b и stepper_c этот параметр по умолчанию принимает значение
#    указанное для stepper_a.
#angle:
#    Этот параметр задает угол (в градусах), под которым находится башня
#    под которым находится башня. По умолчанию это 210 для stepper_a, 330 для stepper_b и 90
#    для stepper_c.

#    Секция stepper_b описывает шаговый механизм, управляющий передней
#    правой башней (под углом 330 градусов).
[stepper_b]

#    Раздел stepper_c описывает шаговый механизм, управляющий задней
#    башней (под углом 90 градусов).
[stepper_c]

#    Секция delta_calibrate включает расширенную команду DELTA_CALIBRATE
#    команду g-кода, которая может откалибровать положения конечных упоров башни и
#    углы.
[delta_calibrate]
радиус:
#    Радиус (в мм) области, которую можно зондировать. Это радиус
#    координат сопла для зондирования; если используется автоматическое зондирование
#    с XY-смещением, то выберите радиус достаточно малым, чтобы
#    зонд всегда помещался над станиной. Этот параметр должен быть указан.
#speed: 50
#    Скорость (в мм/с) перемещения без зондирования во время калибровки.
#    По умолчанию - 50.
#horizontal_move_z: 5
#    Высота (в мм), на которую следует дать команду головке переместиться
#    непосредственно перед началом работы датчика. По умолчанию равно 5.
```

### Дельтезианская кинематика

Смотрите [example-deltesian.cfg](../config/example-deltesian.cfg) для примера файла конфигурации кинематики Дельтезиана.

Здесь описаны только параметры, специфичные для дельтезианских принтеров - доступные параметры см. в разделе [общие кинематические настройки] (#common-kinematic-settings).

```
[принтер].
кинематика: дельтезианская
max_z_velocity:
#    Для дельтезианских принтеров это ограничение максимальной скорости (в мм/с)
#    перемещения по оси z. Эта настройка может быть использована для уменьшения
#    максимальной скорости перемещений вверх/вниз (которые требуют более высокой скорости шага
#    чем другие перемещения на дельтезианском принтере). По умолчанию используется
#    max_velocity для max_z_velocity.
#max_z_accel:
#    Это задает максимальное ускорение (в мм/с^2) движения вдоль
#    оси z. Установка этого параметра может быть полезна, если принтер может достичь большего
#    ускорения при движении по XY, чем при движении по Z (например, при использовании входного формирователя).
#    По умолчанию используется max_accel для max_z_accel.
#minimum_z_position: 0
#    Минимальная позиция по Z, в которую пользователь может приказать голове переместиться.
#    в. По умолчанию равно 0.
#min_angle: 5
#    Это минимальный угол (в градусах) относительно горизонтали.
#    которого могут достичь дельтезианские руки. Этот параметр
#    предназначен для того, чтобы ограничить руки от полного горизонтального положения,
#    что может привести к случайной инверсии оси XZ. По умолчанию значение равно 5.
#print_width:
#    Расстояние (в мм) от действительных координат X головки инструмента. Можно использовать
#    эту настройку, чтобы настроить проверку диапазона перемещения инструментальной головки. Если
#    здесь задано большое значение, то может возникнуть команда
#    головке инструмента в столкновение с башней. Обычно эта настройка
#    соответствует ширине станины (в мм).
#slow_ratio: 3
#    Коэффициент, используемый для ограничения скорости и ускорения при перемещениях вблизи
#    крайних точек оси X. Если вертикальное расстояние, деленное на горизонтальное
#    расстояние превышает значение параметра slow_ratio, то скорость и
#    ускорение ограничиваются половиной их номинальных значений. Если вертикальное
#    расстояние, деленное на горизонтальное расстояние, превышает вдвое значение
#    соотношения slow_ratio, то скорость и ускорение ограничены одной
#    четвертью своих номинальных значений. По умолчанию установлено значение 3.

#    Секция stepper_left используется для описания шагового механизма, управляющего
#    левой башней. Эта секция также управляет параметрами самонаведения
# (homing_speed, homing_retract_dist) для всех башен.
[stepper_left]
position_endstop:
#    Расстояние (в мм) между соплом и станиной, когда сопло находится
#    в центре зоны сборки и срабатывают концевые упоры. Этот
#    параметр должен быть указан для stepper_left; для stepper_right этот
#    параметр по умолчанию принимает значение, указанное для stepper_left.
arm_length:
#    Длина (в мм) диагонального стержня, соединяющего каретку башни с
#    печатающей головкой. Этот параметр должен быть указан для stepper_left; для
#    stepper_right этот параметр по умолчанию принимает значение, указанное для
# stepper_left.
arm_x_length:
#    Горизонтальное расстояние между печатающей головкой и башней, когда
#    принтера. Этот параметр должен быть указан для stepper_left;
#    для stepper_right этот параметр по умолчанию принимает значение, указанное для
# stepper_left.

#    Секция stepper_right используется для описания шагового механизма, управляющего
#    правой башней.
[stepper_right]

#    Секция stepper_y используется для описания шагового механизма, управляющего
#    осью Y в дельтезианском роботе.
[stepper_y]
```

### Кинематика CoreXY

Смотрите [example-corexy.cfg](../config/example-corexy.cfg) для примера файла кинематики corexy (и h-bot).

Здесь описаны только параметры, характерные для принтеров corexy - доступные параметры смотрите в разделе [общие кинематические настройки](#common-kinematic-settings).

```
[принтер].
кинематика: corexy
max_z_velocity:
# Это задает максимальную скорость (в мм/с) перемещения вдоль оси z
# оси. Эта настройка может использоваться для ограничения максимальной скорости
# шагового двигателя z. По умолчанию используется значение max_velocity для
# max_z_velocity.
max_z_accel:
# Эта настройка задает максимальное ускорение (в мм/с^2) движения вдоль
# оси z. Оно ограничивает ускорение шагового двигателя z. По
# по умолчанию используется max_accel для max_z_accel.

# Секция stepper_x используется для описания оси X, а также
# шагового двигателя, управляющего движением X+Y.
[stepper_x]

# Секция stepper_y используется для описания оси Y, а также
# шагового механизма, управляющего движением X-Y.
[stepper_y]

# Секция stepper_z используется для описания шага, управляющего
# осью Z.
[stepper_z]
```

### Кинематика CoreXZ

Пример файла конфигурации кинематики corexz см. в [example-corexz.cfg](../config/example-corexz.cfg).

Здесь описаны только параметры, характерные для принтеров corexz - доступные параметры смотрите в разделе [общие кинематические настройки](#common-kinematic-settings).

```
[принтер]
кинематика: corexz
max_z_velocity:
# Это задает максимальную скорость (в мм/с) перемещения вдоль оси z
# оси. По умолчанию для max_z_velocity используется max_velocity.
max_z_accel:
# Задает максимальное ускорение (в мм/с^2) движения вдоль оси
# оси z. По умолчанию используется max_accel для max_z_accel.

# Секция stepper_x используется для описания оси X, а также
# шагового механизма, управляющего движением X+Z.
[stepper_x]

# Секция stepper_y используется для описания шага, управляющего
# осью Y.
[stepper_y]

# Секция stepper_z используется для описания оси Z, а также
# шагового механизма, управляющего движением по оси X-Z.
[stepper_z]
```

### Кинематика Hybrid-CoreXY

Пример файла конфигурации кинематики гибридного corexy смотрите в [example-hybrid-corexy.cfg](../config/example-hybrid-corexy.cfg).

Эта кинематика также известна как кинематика Markforged.

Здесь описаны только параметры, характерные для гибридных принтеров corexy, доступные параметры смотрите в разделе [общие кинематические настройки](#common-kinematic-settings).

```
[принтер]
кинематика: гибридная_коррекция
max_z_velocity:
# Здесь задается максимальная скорость (в мм/с) перемещения вдоль оси z
# оси. По умолчанию для max_z_velocity используется max_velocity.
max_z_accel:
# Задает максимальное ускорение (в мм/с^2) движения вдоль оси
# оси z. По умолчанию используется max_accel для max_z_accel.

# Секция stepper_x используется для описания оси X, а также
# шагового механизма, управляющего движением по оси X-Y.
[stepper_x]

# Секция stepper_y используется для описания шага, управляющего
# осью Y.
[stepper_y]

# Секция stepper_z используется для описания шага, управляющего
# осью Z.
[stepper_z]
```

### Кинематика Hybrid-CoreXZ

Пример файла конфигурации гибридной кинематики corexz смотрите в [example-hybrid-corexz.cfg](../config/example-hybrid-corexz.cfg).

Эта кинематика также известна как кинематика Markforged.

Здесь описаны только параметры, характерные для гибридных принтеров corexy, доступные параметры смотрите в разделе [общие кинематические настройки](#common-kinematic-settings).

```
[принтер]
кинематика: hybrid_corexz
max_z_velocity:
# Здесь задается максимальная скорость (в мм/с) перемещения вдоль оси z
# оси. По умолчанию для max_z_velocity используется max_velocity.
max_z_accel:
# Задает максимальное ускорение (в мм/с^2) движения вдоль оси
# оси z. По умолчанию используется max_accel для max_z_accel.

# Секция stepper_x используется для описания оси X, а также
# шагового механизма, управляющего движением по оси X-Z.
[stepper_x]

# Секция stepper_y используется для описания шага, управляющего
# осью Y.
[stepper_y]

# Секция stepper_z используется для описания шага, управляющего
# осью Z.
[stepper_z]
```

### Полярная кинематика

Пример файла конфигурации полярной кинематики смотрите в [example-polar.cfg](../config/example-polar.cfg).

Здесь описаны только параметры, специфичные для полярных принтеров - доступные параметры смотрите в разделе [общие кинематические настройки](#common-kinematic-settings).

ПОЛЯРНАЯ КИНЕМАТИКА НАХОДИТСЯ В СТАДИИ РАЗРАБОТКИ. Известно, что перемещения вокруг позиции 0, 0 не работают должным образом.

```
[принтер].
кинематика: полярная
max_z_velocity:
#    Это задает максимальную скорость (в мм/с) перемещения вдоль оси z
#    оси. Эта настройка может использоваться для ограничения максимальной скорости
#    шагового двигателя z. По умолчанию используется значение max_velocity для
#    max_z_velocity.
max_z_accel:
#    Эта настройка задает максимальное ускорение (в мм/с^2) движения вдоль
#    оси z. Оно ограничивает ускорение шагового двигателя z. По
#    по умолчанию используется max_accel для max_z_accel.

#    Секция stepper_bed используется для описания шагового механизма, управляющего
#    кроватью.
[stepper_bed].
gear_ratio:
#    Должно быть указано передаточное_отношение, а расстояние_вращения не может быть
#    задано. Например, если кровать имеет 80-зубый шкив, приводимый в движение
#    шаговым механизмом с 16-зубчатым шкивом, то можно указать
#    передаточное число "80:16". Этот параметр должен быть указан.

#    Секция stepper_arm используется для описания шагового механизма, управляющего
#    кареткой на манипуляторе.
[stepper_arm]

#    Секция stepper_z используется для описания шагового механизма, управляющего
#    осью Z.
[stepper_z]
```

### Роторная дельта-кинематика

Пример файла конфигурации кинематики роторной дельты смотрите в [example-rotary-delta.cfg](../config/example-rotary-delta.cfg).

Здесь описаны только параметры, характерные для ротационных дельта-принтеров - доступные параметры смотрите в разделе [общие кинематические настройки](#common-kinematic-settings).

КИНЕМАТИКА ВРАЩАЮЩИХСЯ ДЕЛЬТАЛЕТОВ НАХОДИТСЯ В СТАДИИ РАЗРАБОТКИ. Движения самонаведения могут прерываться по времени, а некоторые проверки границ не реализованы.

```
[принтер]
кинематика: вращение_дельта
max_z_velocity:
# Для дельта-принтеров это ограничение максимальной скорости (в мм/с)
# перемещения по оси z. Эта настройка может быть использована для уменьшения
# максимальной скорости перемещений вверх/вниз (которые требуют более высокой скорости шага
# чем другие перемещения на дельта-принтере). По умолчанию используется
# max_velocity для max_z_velocity.
#minimum_z_position: 0
# Минимальная позиция Z, в которую пользователь может приказать головке переместиться.
# в.  По умолчанию равно 0.
плечо_радиуса:
# Радиус (в мм) горизонтальной окружности, образованной тремя
# плечевыми суставами, минус радиус окружности, образованной
# суставами эффекторов. Этот параметр также может быть рассчитан как:
# shoulder_radius = (delta_f - delta_e) / sqrt(12)
# Этот параметр должен быть указан.
высота_плеча:
# Расстояние (в мм) плечевых соединений от станины за вычетом
# высота головки инструмента эффектора. Этот параметр должен быть указан.

# Раздел stepper_a описывает шаговый механизм, управляющий задней частью
# правой руки (под углом 30 градусов). Эта секция также управляет параметрами наведения
# параметры (homing_speed, homing_retract_dist) для всех рук.
[stepper_a]
gear_ratio:
# Должно быть указано передаточное_отношение, а расстояние_вращения не может быть
# задано. Например, если рука имеет 80-зубый шкив, приводимый в движение
# шкивом с 16 зубьями, который, в свою очередь, соединен с 60
# зубчатым шкивом, приводимым в движение шаговым механизмом с 16-зубым шкивом, то
# можно указать передаточное число "80:16, 60:16". Этот параметр
# должен быть указан.
position_endstop:
# Расстояние (в мм) между соплом и станиной, когда сопло находится
# в центре области сборки и срабатывает концевой упор. Этот
# параметр должен быть указан для степпера_a; для степпера_b и
# stepper_c этот параметр по умолчанию принимает значение, указанное для
# stepper_a.
upper_arm_length:
# Длина (в мм) руки, соединяющей "плечевой сустав" с
# "локтевым суставом". Этот параметр должен быть указан для степпера_a; для
# stepper_b и stepper_c этот параметр по умолчанию принимает значение
# указанное для stepper_a.
lower_arm_length:
# Длина (в мм) руки, соединяющей "локтевой сустав" с
# "эффекторным суставом". Этот параметр должен быть указан для степпера_a;
# для stepper_b и stepper_c этот параметр по умолчанию принимает значение.
# указанное для stepper_a.
#angle:
# Этот параметр задает угол (в градусах), под которым находится рука.
# По умолчанию это 30 для stepper_a, 150 для stepper_b и 270 для
# stepper_c.

# Раздел stepper_b описывает шаговый механизм, управляющий задней
# левой рукой (под углом 150 градусов).
[stepper_b]

# Раздел stepper_c описывает шаговый механизм, управляющий передней
# рукой (под углом 270 градусов).
[stepper_c]

# Секция delta_calibrate включает расширенную команду DELTA_CALIBRATE
# команду g-кода, которая может откалибровать положения концевых упоров плеч.
[delta_calibrate]
радиус:
# Радиус (в мм) области, которую можно зондировать. Это радиус
# координат сопла для зондирования; если используется автоматическое зондирование
# с XY-смещением, то выберите радиус достаточно малым, чтобы
# зонд всегда помещался над станиной. Этот параметр должен быть указан.
#speed: 50
# Скорость (в мм/с) перемещения без зондирования во время калибровки.
# По умолчанию - 50.
#horizontal_move_z: 5
# Высота (в мм), на которую следует дать команду головке переместиться
# непосредственно перед началом работы датчика. По умолчанию равно 5.
```

### Кинематика тросовой лебедки

Смотрите файл [example-winch.cfg](../config/example-winch.cfg) для примера файла конфигурации кинематики кабельной лебедки.

Здесь описаны только параметры, специфичные для принтеров кабельных лебедок - доступные параметры см. в разделе [общие кинематические настройки](#common-kinematic-settings).

ПОДДЕРЖКА ТРОСОВОЙ ЛЕБЕДКИ ЯВЛЯЕТСЯ ЭКСПЕРИМЕНТАЛЬНОЙ. Наведение не реализовано в кинематике кабельной лебедки. Чтобы установить принтер в исходное положение, вручную подавайте команды перемещения, пока головка инструмента не окажется в точке 0, 0, 0, а затем подайте команду `G28`.

```
[принтер]
кинематика: лебедка

#    Секция stepper_a описывает шаговый механизм, подключенный к первой
#    кабельной лебедке. Может быть определено минимум 3 и максимум 26 тросовых лебедок
#    определены (от stepper_a до stepper_z), хотя обычно определяют 4.
[stepper_a].
расстояние поворота:
#    Расстояние_поворота - это номинальное расстояние (в мм), на которое головка инструмента
#    перемещается по направлению к кабельной лебедке за каждый полный оборот
#    шагового двигателя. Этот параметр должен быть указан.
anchor_x:
anchor_y:
anchor_z:
#    Положение X, Y и Z тросовой лебедки в декартовом пространстве.
#    Эти параметры должны быть указаны.
```

### Отсутствует Кинематика

Можно задать специальную кинематику " нет", чтобы отключить кинематическую поддержку в Klipper. Это может быть полезно для управления устройствами, которые не являются типичными 3d-принтерами, или для целей отладки.

```
[принтер].
кинематика: нет
макс_скорость: 1
макс_ускорение: 1
#    Параметры max_velocity и max_accel должны быть определены. На
#    значения не используются для кинематики " нет".
```

## Общий экструдер и подогреваемая подставка

### [экструдер]

Раздел "Экструдер" используется для описания параметров нагревателя для сопла хотэнда и шагового механизма, управляющего экструдером. Дополнительную информацию см. в [справочнике команд](G-Codes.md#extruder). Информацию о настройке опережения давления см. в руководстве [pressure advance guide](Pressure_Advance.md).

```
[экструдер].
step_pin:
dir_pin:
enable_pin:
микрошаги:
rotation_distance:
#full_steps_per_rotation:
#gear_ratio:
#    См. раздел "Шаговое управление" для описания вышеуказанных
#    параметров. Если ни один из вышеперечисленных параметров не указан, то ни один
#    степпер не будет связан с хотэндом форсунки (хотя
#    команда SYNC_EXTRUDER_MOTION может связать его во время выполнения).
диаметр_сопла:
#    Диаметр отверстия сопла (в мм). Этот параметр должен быть
#    предоставлен.
диаметр нити (filament_diameter):
#    Номинальный диаметр сырой нити (в мм), когда она поступает в
#    экструдер. Этот параметр должен быть предоставлен.
#max_extrude_cross_section:
#    Максимальная площадь (в мм^2) поперечного сечения экструзии (например,
#    ширина экструзии, умноженная на высоту слоя). Эта настройка предотвращает
#    чрезмерного количества экструзии при относительно небольших перемещениях по XY.
Если перемещение запрашивает скорость экструзии, превышающую это значение, #
#    это приведет к возврату ошибки. По умолчанию: 4.0 *
#    диаметр_сопла^2
#    мгновенная_угловая_скорость: 1.000
#    Максимальное мгновенное изменение скорости (в мм/с)
#    экструдера во время стыка двух движений. По умолчанию 1 мм/с.
#max_extrude_only_distance: 50.0
#    Максимальная длина (в мм сырой нити), на которую может быть выполнено втягивание или
#    extrude-only move может иметь. Если движение с втягиванием или только с выдавливанием
#    запрашивает расстояние, превышающее это значение, это приведет к ошибке
#    будет возвращена ошибка. По умолчанию это значение равно 50 мм.
#max_extrude_only_velocity:
#max_extrude_only_accel:
#    Максимальная скорость (в мм/с) и ускорение (в мм/с^2)
#    двигателя экструдера для втягивания и перемещения только экструдера. Эти
#    настройки не оказывают никакого влияния на обычные движения печати. Если они не
#    указаны, то они рассчитываются так, чтобы соответствовать пределу XY
#    движения печати с поперечным сечением 4,0*диаметр_сопла^2
#    иметь.
# pressure_advance: 0.0
#    Количество сырого филамента, которое нужно протолкнуть в экструдер во время
#    ускорения экструдера. Равное количество нити втягивается
#    во время замедления. Измеряется в миллиметрах на
#    миллиметр/секунду. По умолчанию установлено значение 0, что отключает давление
#    опережение.
#pressure_advance_smooth_time: 0.040
#    Диапазон времени (в секундах), используемый при расчете средней
#    скорости экструдера для опережения давления. Большее значение приводит к
#    более плавное движение экструдера. Этот параметр не может превышать 200 мс.
#    Эта настройка применяется только в том случае, если pressure_advance ненулевое. На
#    по умолчанию составляет 0,040 (40 миллисекунд).
#
#    Остальные переменные описывают нагреватель экструдера.
heater_pin:
#    ШИМ-выходной контакт, управляющий нагревателем. Этот параметр должен быть
#    предоставлен.
#max_power: 1.0
#    Максимальная мощность (выраженная в виде значения от 0,0 до 1,0), на которую может быть установлен
#    нагревателя_контакта может быть установлена. Значение 1.0 позволяет установить контакт
#    полностью включенным на длительное время, в то время как значение 0,5
#    позволит контакту быть включенным не более половины времени. Этот
#    настройка может быть использована для ограничения общей выходной мощности (в течение длительных
#    периодов) на нагреватель. По умолчанию значение равно 1,0.
тип_датчика:
#    Тип датчика - распространенные термисторы: "EPCOS 100K B57560G104F",
#    "ATC Semitec 104GT-2", "ATC Semitec 104NT-4-R025H42G", "Generic
#    3950", "Honeywell 100K 135-104LAG-J01", "NTC 100K MGB18-104F39050L32",
#    "SliceEngineering 450", и "TDK NTCG104LH104JT1". См.
#    "Датчики температуры" для других датчиков. Этот параметр
#    должен быть указан.
sensor_pin:
#    Контакт аналогового входа, подключенный к датчику. Этот параметр должен быть
#    предоставлен.
#pullup_resistor: 4700
#    Сопротивление (в омах) подтяжки, подключенной к термистору.
#    Этот параметр действителен только в том случае, если датчик является термистором. По адресу
#    по умолчанию составляет 4700 Ом.
#smooth_time: 1.0
#    Значение времени (в секундах), в течение которого измерения температуры будут
#    будут сглажены, чтобы уменьшить влияние шума при измерении. По умолчанию
#    является 1 секунда.
control:
#    Алгоритм управления (либо pid, либо watermark). Этот параметр должен
#    быть предоставлен.
pid_Kp:
pid_Ki:
pid_Kd:
#    Пропорциональная (pid_Kp), интегральная (pid_Ki) и производная
#    (pid_Kd) настройки для системы управления с обратной связью PID. Клиппер
#    оценивает настройки ПИД-регулятора по следующей общей формуле:
#    heater_pwm = (Kp*error + Ki*integral(error) - Kd*derivative(error)) / 255
#    Где "error" - это "requested_temperature - measured_temperature"
#    и "heater_pwm" - запрашиваемая скорость нагрева, при этом 0.0 - полное
#    выключен, а 1.0 - полностью включен. Рассмотрите возможность использования команды PID_CALIBRATE
#    для получения этих параметров. Параметры pid_Kp, pid_Ki и pid_Kd
#    параметры должны быть указаны для ПИД-нагревателей.
#max_delta: 2.0
#    Для нагревателей с управлением "водяной знак" это количество градусов в
#    Цельсия выше целевой температуры перед отключением нагревателя
#    а также количество градусов ниже целевой температуры перед тем, как
#    повторным включением нагревателя. По умолчанию - 2 градуса Цельсия.
#pwm_cycle_time: 0.100
#   Время в секундах для каждого программного цикла ШИМ нагревателя   
#    не рекомендуется устанавливать это значение, если нет электрического
#    требования переключать нагреватель быстрее, чем 10 раз в секунду.
#    По умолчаию 0,100 секунды.
#min_extrude_temp: 170
#    Минимальная температура (в градусах Цельсия), при которой перемещение экструдера
#    могут быть поданы команды. По умолчанию 170 градусов Цельсия.
min_temp:
max_temp:
#    Максимальный диапазон допустимых температур (в градусах Цельсия), в пределах которого
#    нагреватель должен оставаться в пределах. Это контролирует функцию безопасности
#    реализованной в коде микроконтроллера - если измеренная
#    температура выйдет за пределы этого диапазона, то микроконтроллер
#    перейдет в состояние отключения. Эта проверка может помочь обнаружить некоторые
#    аппаратные сбои нагревателей и датчиков. Установите этот диапазон достаточно широким
#    достаточно, чтобы разумные температуры не приводили к ошибке.
#    Эти параметры должны быть указаны.
```

### [heater_bed]

Раздел heater_bed описывает подогреваемую станину. В нем используются те же настройки нагревателя, что и в разделе "Экструдер".

```
[heater_bed]
контакт_нагревателя:
тип_датчика:
контакт_датчика:
управление:
min_temp:
max_temp:
# Описание вышеуказанных параметров см. в разделе "Экструдер".
```

## Поддержка на уровне кровати

### [кровать_сетка]

Выравнивание слоя сетки. Можно определить раздел конфигурации bed_mesh, чтобы включить преобразования перемещения, которые смещают ось z на основе сетки, созданной из точек зондирования. При использовании датчика для установки оси z рекомендуется задать в файле printer.cfg секцию safe_z_home для установки оси z в центр области печати.

Дополнительную информацию см. в [руководстве по сетке кровати] (Bed_Mesh.md) и [справочнике команд] (G-Codes.md#bed_mesh).

Визуальные примеры:

```
 rectangular bed, probe_count = 3, 3:
             x---x---x (max_point)
             |
             x---x---x
                     |
 (min_point) x---x---x

 round bed, round_probe_count = 5, bed_radius = r:
                 x (0, r) end
               /
             x---x---x
                       \
 (-r, 0) x---x---x---x---x (r, 0)
           \
             x---x---x
                   /
                 x  (0, -r) start
```

```
[bed_mesh]
#speed: 50
#    Скорость (в мм/с) перемещения без рельефа во время калибровки.
#    По умолчанию 50.
#horizontal_move_z: 5
#    Высота (в мм), на которую следует дать команду головке переместиться
#    непосредственно перед началом работы датчика. По умолчанию равно 5.
#mesh_radius:
#    Определяет радиус сетки для зондирования круглых кроватей. Обратите внимание, что
#    радиус задается относительно координаты, указанной параметром
#    параметром mesh_origin. Этот параметр должен быть указан для круглых кроватей
#    и опущен для прямоугольных кроватей.
#mesh_origin:
#    Определяет координаты центра X, Y сетки для круглых кроватей. Эта
#    координата является относительной по отношению к местоположению зонда. Может оказаться полезным
#    настроить mesh_origin в попытке максимизировать размер
#    радиуса сетки. По умолчанию 0, 0. Этот параметр должен быть опущен для
#    прямоугольных кроватей.
#mesh_min:
#    Определяет минимальные координаты X, Y сетки для прямоугольных
#    кровати. Эта координата относится к местоположению зонда. Это
#    будет первой точкой зондирования, ближайшей к началу координат. Этот
#    параметр должен быть задан для прямоугольных грядок.
#mesh_max:
#    Определяет максимальную координату X, Y сетки для прямоугольных
#    кроватей. Придерживается того же принципа, что и mesh_min, однако это будет
#    будет самой удаленной точкой от начала координат кровати. Этот параметр
#    должен быть задан для прямоугольных кроватей.
#probe_count: 3, 3
#    Для прямоугольных кроватей это пара целых чисел через запятую.
#    значений X, Y, определяющих количество точек для зондирования вдоль каждой
#    оси. Одиночное значение также допустимо, в этом случае это значение будет
#    будет применяться к обеим осям. По умолчанию 3, 3.
# round_probe_count: 5
#    Для круглых кроватей это целочисленное значение определяет максимальное количество
#    точек для зондирования вдоль каждой оси. Это значение должно быть нечетным числом.
#    По умолчанию 5.
#fade_start: 1.0
#    Позиция gcode z, в которой начинается постепенное уменьшение z-коррекции
#    когда включено затухание. По умолчанию 1.0.
#fade_end: 0.0
#    Позиция gcode z, в которой завершается фазирование. Если установлено значение
#    значение ниже fade_start, сглаживание отключается. Следует отметить, что
#    затухание может добавить нежелательное масштабирование по оси z отпечатка. Если
#    пользователь хочет включить затухание, рекомендуется использовать значение 10.0.
#    По умолчанию 0.0, что отключает затухание.
#fade_target:
#    Позиция по оси z, в которой должно сходиться затухание. Когда это значение
#    устанавливается ненулевое значение, оно должно быть в диапазоне значений z в
#    сетке. Пользователи, которые хотят сходиться в z-позиции самонаведения
#    должны установить это значение в 0. По умолчанию это среднее значение z сетки.
#split_delta_z: .025
#    Величина разницы Z (в мм) вдоль перемещения, которая вызовет
#    разделение. По умолчанию .025.
#move_check_distance: 5.0
#    Расстояние (в мм) вдоль перемещения для проверки на наличие split_delta_z.
#    Это также минимальная длина, на которую можно разделить ход. По умолчанию
#    равно 5.0.
#mesh_pps: 2, 2
#    Пара целых чисел X, Y, разделенных запятыми, определяющая количество
#    точек в сегменте для интерполяции в сетке вдоль каждой оси. A
#    "сегмент" может быть определен как пространство между каждой точкой зондирования.
#    Пользователь может ввести одно значение, которое будет применяться к обеим
#    осям. По умолчанию 2, 2.
#алгоритм: lagrange
#    Используемый алгоритм интерполяции. Может быть либо "lagrange", либо
#    "bicubic". Эта опция не влияет на сетки 3x3, которые вынуждены
#    использовать выборку Лагранжа. По умолчанию используется lagrange.
#bicubic_tension: .2
#    При использовании бикубического алгоритма параметр tension, указанный выше, может
#    быть применен для изменения величины интерполируемого наклона. Большие
#    числа увеличат величину наклона, что приведет к большей
#    кривизны в сетке. По умолчанию - .2.
# zeroo_reference_position:
#    Необязательная координата X,Y, определяющая местоположение на кровати.
#    где Z = 0. При указании этой опции сетка будет смещена
#    таким образом, чтобы в этом месте происходила нулевая регулировка Z.  По умолчанию
#    без нулевой привязки.
#faulty_region_1_min:
#faulty_region_1_max:
#    Необязательные точки, определяющие дефектную область.  См. docs/Bed_Mesh.md
#    для получения подробной информации о дефектных регионах.  Может быть добавлено до 99 дефектных областей.
#    По умолчанию дефектные области не заданы.
#adaptive_margin:
#    Необязательное поле (в мм), добавляемое вокруг области кровати, используемой
#    определенными объектами печати при генерации адаптивной сетки.
#scan_overshoot:
#    Максимальная величина перемещения (в мм), доступная за пределами сетки.
#    Для прямоугольных станин это относится к перемещению по оси X, а для круглых станин
#    это относится ко всему радиусу.  Инструмент должен иметь возможность перемещаться на указанную величину
#    указанного за пределами сетки.  Это значение используется для оптимизации
#    пути при выполнении "быстрого сканирования".  Минимальное значение, которое может быть указано.
#    равно 1. По умолчанию проскакивание отсутствует.
```

### [кровать_наклон]

Компенсация наклона кровати. Можно определить секцию конфигурации bed_tilt, чтобы включить трансформации перемещения, учитывающие наклон кровати. Обратите внимание, что bed_mesh и bed_tilt несовместимы; оба эти параметра не могут быть определены.

Дополнительную информацию см. в [справочнике команд](G-Codes.md#bed_tilt).

```
[bed_tilt]
#x_adjust: 0
#    Сумма, которую нужно добавить к высоте Z каждого движения за каждый мм по оси X
#    оси. По умолчанию 0.
#y_adjust: 0
#    Сумма, добавляемая к высоте Z каждого хода за каждый мм по оси Y
#    оси. По умолчанию 0.
#z_adjust: 0
#    Сумма, добавляемая к высоте Z, когда сопло номинально находится в точке
#    0, 0. По умолчанию 0.
#    Остальные параметры управляют расширенной командой BED_TILT_CALIBRATE
#    командой g-кода, которая может быть использована для калибровки соответствующих x и y
#    параметров настройки.
#points:
#    Список координат X, Y (по одной в строке; последующие строки
#    с отступом), которые должны быть проверены во время выполнения команды BED_TILT_CALIBRATE
#    команды. Укажите координаты сопла и убедитесь, что зонд
#    находится над пластом в заданных координатах сопла. По умолчанию
#    не включать команду.
#speed: 50
#    Скорость (в мм/с) перемещения без зондирования во время калибровки.
#    По умолчанию - 50.
#horizontal_move_z: 5
#    Высота (в мм), на которую следует дать команду головке переместиться
#    непосредственно перед началом работы датчика. По умолчанию равно 5.
```

### [bed_screws]

Инструмент для регулировки винтов выравнивания кровати. Можно определить секцию конфигурации [bed_screws], чтобы включить команду g-кода BED_SCREWS_ADJUST.

Дополнительную информацию см. в [руководстве по выравниванию] (Manual_Level.md#adjusting bed-leveling-screws) и [справочнике команд](G-Codes.md#bed_screws).

```
[bed_screws]
#screw1:
#   The X, Y coordinate of the first bed leveling screw. This is a
#   position to command the nozzle to that is directly above the bed
#   screw (or as close as possible while still being above the bed).
#   This parameter must be provided.
#screw1_name:
#   An arbitrary name for the given screw. This name is displayed when
#   the helper script runs. The default is to use a name based upon
#   the screw XY location.
#screw1_fine_adjust:
#   An X, Y coordinate to command the nozzle to so that one can fine
#   tune the bed leveling screw. The default is to not perform fine
#   adjustments on the bed screw.
#screw2:
#screw2_name:
#screw2_fine_adjust:
#...
#   Additional bed leveling screws. At least three screws must be
#   defined.
#horizontal_move_z: 5
#   The height (in mm) that the head should be commanded to move to
#   when moving from one screw location to the next. The default is 5.
#probe_height: 0
#   The height of the probe (in mm) after adjusting for the thermal
#   expansion of bed and nozzle. The default is zero.
#speed: 50
#   The speed (in mm/s) of non-probing moves during the calibration.
#   The default is 50.
#probe_speed: 5
#   The speed (in mm/s) when moving from a horizontal_move_z position
#   to a probe_height position. The default is 5.
```

### [screws_tilt_adjust]

Инструмент для регулировки наклона винтов кровати с помощью Z-зонда. Можно определить секцию конфигурации screws_tilt_adjust, чтобы включить команду g-кода SCREWS_TILT_CALCULATE.

Дополнительную информацию см. в [руководстве по выравниванию] (Manual_Level.md#adjusting bed-leveling-screws-using-the-bed-probe) и [справочнике команд](G-Codes.md#screws_tilt_adjust).

```
[screws_tilt_adjust]
#screw1:
#    Координата (X, Y) первого винта выравнивания кровати. Это
#    положение, в которое нужно установить сопло, чтобы зонд находился прямо
#    над винтом кровати (или как можно ближе к нему, оставаясь при этом
#    над станиной). Это базовый винт, используемый в расчетах. Этот
#    параметр должен быть предоставлен.
#screw1_name:
#    произвольное имя для данного винта. Это имя отображается при
#    запуске вспомогательного скрипта. По умолчанию используется имя, основанное на
#    расположения винта по оси XY.
#screw2:
#screw2_name:
#...
#    Дополнительные винты для выравнивания кровати. Должно быть определено не менее двух винтов.
#    определены.
#speed: 50
#    Скорость (в мм/с) перемещения без пробивки во время калибровки.
#    По умолчанию 50.
#horizontal_move_z: 5
#    Высота (в мм), на которую следует дать команду головке переместиться
#    непосредственно перед началом работы датчика. По умолчанию равно 5.
#screw_thread: CW-M3
#    Тип винта, используемого для выравнивания ложа, M3, M4 или M5, и
#    направление вращения ручки, используемой для выравнивания кровати.
#    Принимаемые значения: CW-M3, CCW-M3, CW-M4, CCW-M4, CW-M5, CCW-M5.
#    Значение по умолчанию - CW-M3, которое используется в большинстве принтеров. Вращение по часовой стрелке
#    вращение ручки уменьшает зазор между соплом и
#    постелью. И наоборот, поворот против часовой стрелки увеличивает зазор.
```

### [z_tilt]

Регулировка наклона нескольких Z-шаговиков. Эта функция позволяет независимо регулировать наклон нескольких шаговиков z (см. раздел "stepper_z1"). Если эта секция присутствует, то становится доступной расширенная [команда G-кода] Z_TILT_ADJUST (G-Codes.md#z_tilt).

```
[z_tilt]
#z_positions:
#    Список координат X, Y (по одной в строке; последующие строки
#    с отступом), описывающих расположение каждой "точки поворота" кровати. На
#    "точка поворота" - это точка, в которой кровать крепится к данному Z
#    степперу. Она описывается с помощью координат сопла (положение X, Y
#    сопла, если бы оно могло двигаться прямо над точкой). На
#    первая запись соответствует stepper_z, вторая - stepper_z1,
#    третья - stepper_z2 и т. д. Этот параметр должен быть указан.
#points:
#    Список координат X, Y (по одной в строке; последующие строки
#    отступы), которые должны быть проверены во время выполнения команды Z_TILT_ADJUST.
#    Укажите координаты сопла и убедитесь, что зонд находится над
#    станиной в заданных координатах сопла. Этот параметр должен быть
#    предоставлен.
#speed: 50
#    Скорость (в мм/с) перемещения без зондирования во время калибровки.
#    По умолчанию - 50.
#horizontal_move_z: 5
#    Высота (в мм), на которую следует дать команду головке переместиться
#    непосредственно перед началом работы датчика. По умолчанию равно 5.
#retries: 0
#    Количество повторных попыток, если точки зондирования не находятся в пределах
#    допуска.
#retry_tolerance: 0
#    Если включены повторные попытки, то повторите попытку, если наибольшая и наименьшая прозондированные
#    точки отличаются больше, чем допуск retry_tolerance. Обратите внимание, что наименьшей единицей
#    изменения здесь будет один шаг. Однако если вы измеряете
#    больше точек, чем шагов, то у вас, скорее всего, будет фиксированное
#    минимальное значение для диапазона зондируемых точек, которое можно узнать
#    путем наблюдения за выводом команды.
```

### [quad_gantry_level]

Выравнивание подвижного портала с помощью 4 независимо управляемых двигателей Z. Корректирует эффект гиперболической параболы (картофельной крошки) на подвижном портале, который является более гибким. ПРЕДУПРЕЖДЕНИЕ: Использование этой функции на движущейся станине может привести к нежелательным результатам. Если эта секция присутствует, то становится доступной расширенная команда G-кода QUAD_GANTRY_LEVEL. Эта процедура предполагает следующую конфигурацию двигателя Z:

```
 ----------------
 |Z1          Z2|
 |  ---------   |
 |  |       |   |
 |  |       |   |
 |  x--------   |
 |Z           Z3|
 ----------------
```

Где x - точка 0, 0 на станине.

```
[quad_gantry_level]
#gantry_corners:
#    Список координат X, Y, разделенных новой строкой, описывающий два
#    противоположные углы портала. Первая запись соответствует Z,
#    вторая - Z2. Этот параметр должен быть указан.
#points:
#    Список из четырех точек X, Y, которые должны быть прощупаны
#    во время выполнения команды QUAD_GANTRY_LEVEL. Порядок расположения точек
#    важен и должен соответствовать расположению Z, Z1, Z2 и Z3 в
#    порядке. Этот параметр должен быть указан. Для достижения максимальной точности,
#    убедитесь, что смещения ваших датчиков настроены.
#speed: 50
#    Скорость (в мм/с) перемещения без зондирования во время калибровки.
#    По умолчанию - 50.
#horizontal_move_z: 5
#    Высота (в мм), на которую следует дать команду головке переместиться
#    непосредственно перед началом работы датчика. По умолчанию равно 5.
#max_adjust: 4
#    Предел безопасности, если запрашивается регулировка, превышающая это значение.
#    quad_gantry_level прервется.
#retries: 0
#    Количество повторных попыток, если точки зондирования не находятся в пределах
#    допуска.
#retry_tolerance: 0
#    Если включены повторные попытки, то повторите попытку, если наибольшая и наименьшая прозондированные
#    точки отличаются больше, чем допуск retry_tolerance.
```

### [skew_correction]

Коррекция перекоса принтера. С помощью программного обеспечения можно исправить перекос принтера в трех плоскостях - xy, xz, yz. Это делается путем печати калибровочной модели вдоль плоскости и измерения трех длин. В силу особенностей коррекции перекоса эти длины задаются с помощью gcode. Подробности см. в разделе [Skew Correction](Skew_Correction.md) и [Command Reference](G-Codes.md#skew_correction).

```
[skew_correction]
```

### [z_thermal_adjust]

Регулировка положения Z головки инструмента в зависимости от температуры. Компенсация вертикального перемещения головки инструмента, вызванного тепловым расширением рамы принтера, в режиме реального времени с помощью датчика температуры (обычно подключаемого к вертикальной части рамы).

Смотрите также: [расширенные команды g-кода](G-Codes.md#z_thermal_adjust).

```
[z_thermal_adjust]
#temp_coeff:
#    Температурный коэффициент расширения, в мм/degC. Например.
# temp_coeff 0,01 мм/degC будет перемещать ось Z вниз на 0,01 мм за
#    каждый градус Цельсия, на который увеличивается температура датчика. По умолчанию
#    0,0 мм/градус Цельсия, при котором корректировка не применяется.
#smooth_time:
#    Окно сглаживания, применяемое к датчику температуры, в секундах. Может уменьшить
#    шум двигателя от чрезмерно малых коррекций в ответ на шум датчика.
#    По умолчанию 2,0 секунды.
#z_adjust_off_above:
#    Отключает корректировку выше данной высоты Z [мм]. Последняя рассчитанная коррекция
#    будет применяться до тех пор, пока головка инструмента не переместится ниже указанной высоты Z
#    снова. По умолчанию 99999999.0 мм (всегда включена).
#max_z_adjustment:
#    Максимальная абсолютная корректировка, которая может быть применена к оси Z [мм]. По
#    по умолчанию 99999999.0 мм (неограниченно).
#sensor_type:
#sensor_pin:
#min_temp:
#max_temp:
#    Конфигурация датчика температуры.
#    См. раздел "Экструдер" для определения вышеуказанных
#    параметров.
#gcode_id:
#    Определение этого параметра см. в разделе "Нагреватель_генератора".
#    параметра.
```

## Индивидуальная наводка

### [safe_z_home]

Безопасная установка оси Z. С помощью этого механизма можно установить ось Z на определенную координату X, Y. Это полезно, если, например, инструментальная головка должна переместиться в центр станины, прежде чем ось Z будет установлена.

```
[safe_z_home]
home_xy_position:
#    Координаты X, Y (например, 100, 100), по которым должно быть выполнено Z-самонаведение.
#    выполняться. Этот параметр должен быть предоставлен.
#speed: 50.0
#    Скорость, с которой головка инструмента перемещается в безопасную точку Z.
#    координате. По умолчанию 50 мм/с.
#z_hop:
#    Расстояние (в мм) для подъема оси Z перед установкой в исходное положение. Это значение
#    применяется к любой команде наведения, даже если она не наводит ось Z.
#    Если ось Z уже установлена и текущее положение Z меньше
#    чем z_hop, то эта команда поднимет головку на высоту z_hop. Если
#    ось Z еще не выведена, то головка будет поднята на высоту z_hop.
#    По умолчанию Z-хоп не используется.
#z_hop_speed: 15.0
#    Скорость (в мм/с), с которой ось Z поднимается перед самонаведением. По
#    по умолчанию составляет 15 мм/с.
#move_to_previous: False
#    Если установлено значение True, оси X и Y возвращаются в свои предыдущие
#    положения после наведения оси Z. По умолчанию установлено значение False.
```

### [homing_override]

Переопределение наведения. С помощью этого механизма можно запустить серию команд g-кода вместо G28, используемого при обычном вводе g-кода. Это может быть полезно для принтеров, которые требуют специальной процедуры для установки машины в исходное положение.

```
[homing_override]
gcode:
#    Список команд G-кода для выполнения вместо команд G28.
#    встречающихся в обычном вводе G-кода. См. docs/Command_Templates.md
#    для формата G-кода. Если G28 содержится в этом списке команд.
#    то она вызовет обычную процедуру возврата принтера в исходное положение.
#    Команды, перечисленные здесь, должны вывести все оси. Этот параметр должен быть
#    быть предоставлен.
#axes: xyz
#    Оси для переопределения. Например, если этот параметр имеет значение "z", то скрипт
#    скрипт переопределения будет выполняться только при наведении оси z (например, через
#    команду "G28" или "G28 Z0"). Обратите внимание, что сценарий переопределения должен
#    по-прежнему устанавливать все оси. По умолчанию используется значение "xyz", которое заставляет
#    скрипт переопределения будет выполняться вместо всех команд G28.
#set_position_x:
#set_position_y:
#set_position_z:
#    Если указано, принтер будет считать, что ось находится в указанном
#    позиции перед выполнением вышеуказанных команд g-кода. Установка этого параметра
#    отключает проверку наведения для этой оси. Это может быть полезно, если
#    головка должна перемещаться до того, как будет задействован обычный механизм G28 для оси
#    оси. По умолчанию положение оси не задается.
```

### [endstop_phase]

Конечные остановки с регулировкой фазы шагового механизма. Чтобы использовать эту функцию, определите секцию конфигурации с префиксом "endstop_phase", за которым следует имя соответствующей секции конфигурации степпера (например, "[endstop_phase stepper_z]"). Эта функция может повысить точность переключения конечных остановок. Добавьте голое объявление "[endstop_phase]", чтобы включить команду ENDSTOP_PHASE_CALIBRATE.

Дополнительную информацию см. в руководстве [Endstop Phases guide](Endstop_Phase.md) и [command reference](G-Codes.md#endstop_phase).

```
[endstop_phase stepper_z]
#endstop_accuracy:
#    Устанавливает ожидаемую точность (в мм) концевого упора. Это представляет собой
#    максимальное расстояние ошибки, на котором может сработать концевой ограничитель (например, если
#    концевой упор может иногда срабатывать на 100 м раньше или до 100 м позже
#    то установите значение 0.200 для 200um). По умолчанию
#    4*расстояние_вращения/полное_количество_шагов_на_вращение.
#    фаза_триггера:
#    Здесь указывается фаза драйвера шагового двигателя, которую следует ожидать
#    при ударе о конечный ограничитель. Она состоит из двух чисел, разделенных
#    символом прямой косой черты - фаза и общее количество
#    фаз (например, "7/64"). Устанавливайте это значение только в том случае, если вы уверены, что
#    драйвер шагового двигателя сбрасывается каждый раз при перезагрузке микроконтроллера. Если это значение
#    не установлено, то фаза шагового двигателя будет определена при первом
#    доме и эта фаза будет использоваться во всех последующих домах.
#endstop_align_zero: False
#    Если установлено значение true, то позиционный_концевой_стоп оси будет эффективно
#    изменен таким образом, что нулевая позиция для оси происходит на полном
#    шаге шагового двигателя. (Если используется на оси Z и высота печатного
#    высота слоя печати кратна расстоянию полного шага, то каждый
#    слой будет располагаться на полном шаге). По умолчанию установлено значение False.
```

## Макросы и события G-кода

### [gcode_macro]

Макросы G-кода (можно определить любое количество секций с префиксом "gcode_macro"). Дополнительную информацию см. в руководстве [Шаблоны команд] (Command_Templates.md).

```
gcode_macro my_cmd]
#gcode:
#    Список команд G-кода для выполнения вместо "my_cmd". См.
#    docs/Command_Templates.md для формата G-кода. Этот параметр должен быть
#    быть предоставлен.
#    переменная_<имя>:
#    Можно указать любое количество параметров с префиксом "переменная_".
#    Заданному имени переменной будет присвоено заданное значение (разобранное
#    как литерал Python) и будет доступно при расширении макроса.
#    Например, конфигурация с "variable_fan_speed = 75" может содержать
#    gcode-команды, содержащие "M106 S{ fan_speed * 255 }". Переменные
#    могут быть изменены во время выполнения программы с помощью команды SET_GCODE_VARIABLE
#    (подробности см. в файле docs/Command_Templates.md). Имена переменных могут
#    не использовать символы верхнего регистра.
#rename_existing:
#    Этот параметр заставит макрос переопределить существующую команду G-Code
#    команду и предоставить предыдущее определение команды через
#    имя, указанное здесь. Это можно использовать для переопределения встроенных G-Code
#    команды. При переопределении команд следует соблюдать осторожность, так как это может
#    привести к сложным и неожиданным результатам. По умолчанию не следует
#    переопределять существующую команду G-Code.
#description: Макрос G-кода
#    Это добавит краткое описание, используемое в команде HELP или при
#    использовании функции автоматического завершения. По умолчанию "макрос G-кода"
```

### [delayed_gcode]

Выполнение gcode с заданной задержкой. Дополнительную информацию см. в [руководстве по шаблонам команд](Command_Templates.md#delayed-gcodes) и [справочнике команд](G-Codes.md#delayed_gcode).

```
[delayed_gcode my_delayed_gcode]
gcode:
#    Список команд G-кода для выполнения, когда длительность задержки
#    истекло. Поддерживаются шаблоны G-кода. Этот параметр должен быть
#    предоставлен.
#initial_duration: 0.0
#    Длительность начальной задержки (в секундах). Если задано
#    ненулевое значение, то отложенный_гкод будет выполняться указанное количество
#    секунд после того, как принтер перейдет в состояние "готов". Это может быть
#    полезным для процедур инициализации или повторяющегося delayed_gcode.
#    Если установлено значение 0, отложенный_gcode не будет выполняться при запуске.
#    По умолчанию 0.
```

### [save_variables]

Поддержка сохранения переменных на диск, чтобы они сохранялись после перезапуска. Дополнительную информацию см. в [шаблонах команд](Command_Templates.md#save-variables-to-disk) и [справочнике G-кодов](G-Codes.md#save_variables).

```
[save_variables]
filename:
#    Требуется - укажите имя файла, который будет использоваться для сохранения
#    переменных на диск, например ~/variables.cfg
```

### [idle_timeout]

Таймаут простоя. Таймаут простоя включается автоматически - добавьте явную секцию конфигурации idle_timeout, чтобы изменить настройки по умолчанию.

```
[idle_timeout]
#gcode:
#    Список команд G-кода для выполнения по таймауту простоя. См.
#    docs/Command_Templates.md для формата G-кода. По умолчанию выполняется
#    "TURN_OFF_HEATERS" и "M84".
#timeout: 600
#    Время простоя (в секундах) для ожидания перед выполнением вышеуказанных G-кодов
#    команды. По умолчанию установлено значение 600 секунд.
```

## Optional G-Code features

### [virtual_sdcard]

Виртуальная sdcard может быть полезна, если хост-машина недостаточно быстра для хорошей работы OctoPrint. Она позволяет хост-программе Klipper напрямую печатать файлы gcode, хранящиеся в каталоге на хосте, используя стандартные команды sdcard G-Code (например, M24).

```
[virtual_sdcard]
путь:
#    Путь к локальному каталогу на хост-машине для поиска
#    файлы g-кода. Это каталог, доступный только для чтения (запись файлов sdcard
#    не поддерживается). Можно указать на каталог загрузки OctoPrint.
#    каталог (обычно ~/.octoprint/uploads/ ). Этот параметр должен
#    быть предоставлен.
#on_error_gcode:
#    Список команд G-кода для выполнения при сообщении об ошибке.
#    Формат G-кода см. в файле docs/Command_Templates.md. По умолчанию
#    выполнить TURN_OFF_HEATERS.
```

### [sdcard_loop]

Некоторые принтеры с функцией очистки этапа, такие как выталкиватель деталей или ленточный принтер, могут найти применение в зацикливании секций файла sdcard. (Например, для печати одной и той же детали снова и снова или повторения участка детали для создания цепочки или другого повторяющегося узора).

Поддерживаемые команды см. в [справочнике команд](G-Codes.md#sdcard_loop). Файл [sample-macros.cfg](../config/sample-macros.cfg) для макроса G-кода M808, совместимого с Marlin.

```
[sdcard_loop]
```

### [force_move]

Поддержка ручного перемещения шаговых двигателей в целях диагностики. Обратите внимание, что использование этой функции может перевести принтер в нерабочее состояние - важные подробности см. в [справочнике команд](G-Codes.md#force_move).

```
[force_move]
#enable_force_move: False
#    Установите значение true, чтобы включить FORCE_MOVE и SET_KINEMATIC_POSITION
#    расширенные команды G-кода. По умолчанию установлено значение false.
```

### [pause_resume]

Функции паузы/возобновления с поддержкой захвата и восстановления позиции. Дополнительную информацию см. в [справочнике команд](G-Codes.md#pause_resume).

```
[pause_resume]
#recover_velocity: 50.
#    Когда захват/восстановление включен, скорость, с которой нужно вернуться в
#    захваченному положению (в мм/с). По умолчанию 50,0 мм/с.
```

### [firmware_retraction]

Втягивание нити прошивки. Это позволяет выполнять GCODE-команды G10 (втягивание) и G11 (оттягивание), выдаваемые многими слайсерами. Приведенные ниже параметры являются начальными значениями по умолчанию, однако их можно настроить с помощью команды SET_RETRACTION [command](G-Codes.md#firmware_retraction)), что позволяет устанавливать параметры для каждого филамента и настраивать их во время работы.

```
[firmware_retraction]
#retract_length: 0
#    Длина нити (в мм) для втягивания при активации G10,
#    и не втягивать при активации G11 (но см.
#    unretract_extra_length ниже). По умолчанию 0 мм.
#retract_speed: 20
#    Скорость втягивания, в мм/с. По умолчанию 20 мм/с.
#unretract_extra_length: 0
#    Длина (в мм) *дополнительной* нити, которую нужно добавить при
#    распутывании.
#unretract_speed: 10
#    Скорость распутывания, в мм/с. По умолчанию 10 мм/с.
```

### [gcode_arcs]

Поддержка команд gcode arc (G2/G3).

```
[gcode_arcs]
#разрешение: 1.0
#    Дуга будет разбита на сегменты. Длина каждого сегмента будет
#    равна разрешению в мм, заданному выше. При меньших значениях получится
#    более тонкую дугу, но и больше работы для вашего станка. Дуги меньше, чем
#    заданного значения, станут прямыми линиями. По умолчанию
#    1 мм.
```

### [respond]

Включите расширенные [команды] "M118" и "RESPOND" (G-Codes.md#respond).

```
[ответить]
#default_type: echo
#    Устанавливает префикс вывода "M118" и "RESPOND" по умолчанию в одно из следующих значений
#        из следующих:
#        echo: "echo: " (Это значение по умолчанию)
#        command: "// "
#    error: "!! "
#default_prefix: echo:
#    Непосредственно задает префикс по умолчанию. Если он присутствует, это значение будет
#    отменяет значение "default_type".
```

### [exclude_object]

Включает поддержку исключения или отмены отдельных объектов в процессе печати.

Дополнительную информацию см. в руководстве [exclude objects guide](Exclude_Object.md) и [command reference](G-Codes.md#excludeobject). Смотрите файл [sample-macros.cfg](../config/sample-macros.cfg) для макроса G-кода M486, совместимого с Marlin/RepRapFirmware.

```
[exclude_object]
```

## Компенсация резонанса

### [input_shaper]

Включает [компенсацию резонанса](Resonance_Compensation.md). Также см. справочник [команд](G-Codes.md#input_shaper).

```
[input_shaper]
#shaper_freq_x: 0
#    Частота (в Гц) входного формирователя для оси X. Это
#    обычно резонансная частота оси X, которую входной формирователь
#    должен подавлять. Для более сложных формирователей, например 2- и 3-горбых EI
#    входных формирователей, этот параметр может быть задан из различных
#    соображений. Значение по умолчанию равно 0, что отключает входной
#    формирователь для оси X.
#shaper_freq_y: 0
#    Частота (в Гц) входного шейпера для оси Y. Это
#    обычно резонансная частота оси Y, которую входной формирователь
#    должен подавлять. Для более сложных формирователей, например 2- и 3-горбых EI
#    входных формирователей, этот параметр может быть задан из различных
#    соображений. Значение по умолчанию равно 0, что отключает входной
#    формирователь для оси Y.
#shaper_type: mzv
#    Тип входного формирователя, который будет использоваться для осей X и Y. Поддерживаемые
#    шейперы: zv, mzv, zvd, ei, 2hump_ei и 3hump_ei. По умолчанию
#    является входной шейпер mzv.
#shaper_type_x:
#shaper_type_y:
#    Если тип_шейпера не задан, эти два параметра можно использовать для того, чтобы
#    настроить разные входные формирователи для осей X и Y. Те же
#    значения, что и для параметра shaper_type.
#damping_ratio_x: 0.1
#damping_ratio_y: 0.1
#    Коэффициенты демпфирования вибраций по осям X и Y, используемые входными формирователями
#    для улучшения подавления вибраций. Значение по умолчанию - 0,1, что является
#    хорошим универсальным значением для большинства принтеров. В большинстве случаев этот
#    параметр не требует настройки и не должен изменяться.
```

### [adxl345]

Поддержка акселерометров ADXL345. Эта поддержка позволяет запрашивать измерения акселерометра у датчика. Для этого используется команда ACCELEROMETER_MEASURE (более подробную информацию см. в [G-Codes](G-Codes.md#adxl345)). По умолчанию используется имя чипа "default", но можно указать явное имя (например, [adxl345 my_chip_name]).

```
[adxl345]
cs_pin:
#    Контакт разрешения SPI для датчика. Этот параметр должен быть указан.
#spi_speed: 5000000
#    Скорость SPI (в гц), используемая при обмене данными с чипом.
#    По умолчанию 5000000.
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
#axes_map: x, y, z
#    Ось акселерометра для каждой из осей X, Y и Z принтера.
#    Это может быть полезно, если акселерометр установлен в
#    ориентации, которая не совпадает с ориентацией принтера. Например,
#    например, можно установить значение "y, x, z", чтобы поменять местами оси X и Y.
#    Также можно отменить ось, если акселерометр
#    направление меняется на противоположное (например, "x, z, -y"). По умолчанию используется значение "x, y, z".
# rate: 3200
#    Скорость передачи выходных данных для ADXL345. ADXL345 поддерживает следующие данные
#    скорости: 3200, 1600, 800, 400, 200, 100, 50 и 25. Обратите внимание, что
#    не рекомендуется изменять эту скорость по сравнению с 3200 по умолчанию, и
#    скорости ниже 800 значительно ухудшают качество резонансных
#    измерений.
```

### [lis2dw]

Поддержка акселерометров LIS2DW.

```
[lis2dw]
cs_pin:
#    Контакт разрешения SPI для датчика. Этот параметр должен быть указан.
#spi_speed: 5000000
#    Скорость SPI (в гц), используемая при обмене данными с микросхемой.
#    По умолчанию 5000000.
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
#axes_map: x, y, z
#    Информацию об этом параметре см. в разделе "adxl345".
```

### [mpu9250]

Поддержка акселерометров MPU-9250, MPU-9255, MPU-6515, MPU-6050 и MPU-6500 (можно задать любое количество секций с префиксом "mpu9250").

```
[mpu9250 my_accelerometer]
#i2c_address:
#    По умолчанию 104 (0x68). Если AD0 имеет высокий уровень, вместо него будет 0x69.
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed: 400000
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров. По умолчанию "i2c_speed" равно 400000.
# axes_map: x, y, z
#    Информацию об этом параметре см. в разделе "adxl345".
```

### [resonance_tester]

Поддержка тестирования резонансов и автоматической калибровки входного формирователя. Для использования большей части функциональности этого модуля необходимо установить дополнительные программные зависимости; за дополнительной информацией обратитесь к разделу [Измерение резонансов](Measuring_Resonances.md) и справочнику [Команда](G-Codes.md#resonance_tester). Дополнительную информацию о параметре `max_smoothing` и его использовании см. в разделе [Max smoothing](Measuring_Resonances.md#max-smoothing) руководства по измерению резонансов.

```
[resonance_tester]
#probe_points:
#    Список координат X, Y, Z точек (по одной точке на линию) для проверки
#    резонансы. Требуется указать хотя бы одну точку. Убедитесь, что все
#    точки с некоторым запасом прочности в плоскости XY (~ несколько сантиметров)
#    доступны для инструментальной головки.
#accel_chip:
#    Имя чипа акселерометра, который будет использоваться для измерений. Если
#    чип adxl345 был определен без явного имени, этот параметр
#    может просто ссылаться на него как "accel_chip: adxl345", в противном случае
#    необходимо указать явное имя, например, "accel_chip: adxl345
#    имя_моего_чипа". Либо этот, либо следующие два параметра должны быть
#    set.
#accel_chip_x:
#accel_chip_y:
#    Имена чипов акселерометров, которые будут использоваться для измерений по каждой
#    оси. Может быть полезно, например, для принтера с продольным перемещением,
#    если два отдельных акселерометра установлены на станине (для оси Y)
#    и на головке инструмента (для оси X). Эти параметры имеют тот же
#    формат, что и параметр 'accel_chip'. Только 'accel_chip' или эти два
#    параметра должны быть указаны.
#max_smoothing:
#    Максимальное сглаживание входного формирователя, допустимое для каждой оси при формировании
#    автокалибровки (с помощью команды 'SHAPER_CALIBRATE'). По умолчанию нет
#    максимальное сглаживание не задано. См. руководство "Измерение_резонансов
#    для получения более подробной информации об использовании этой функции.
#min_freq: 5
#    Минимальная частота для проверки на резонанс. По умолчанию - 5 Гц.
#max_freq: 133.33
#    Максимальная частота для проверки на резонанс. По умолчанию 133,33 Гц.
#accel_per_hz: 75
#    Этот параметр используется для определения ускорения, которое нужно использовать для
#    тестирования определенной частоты: accel = accel_per_hz * freq. Чем выше
#    значение, тем выше энергия колебаний. Может быть установлено
#    меньшее значение, чем значение по умолчанию, если резонанс становится слишком сильным на
#    принтере. Однако более низкие значения делают измерения
#    высокочастотных резонансов менее точными. Значение по умолчанию равно 75
#    (мм/сек).
#hz_per_sec: 1
#    Определяет скорость тестирования. При тестировании всех частот в
#    диапазоне [min_freq, max_freq], каждую секунду частота увеличивается на
#    hz_per_sec. Малые значения делают тест медленным, а большие значения
#    уменьшат точность теста. По умолчанию значение равно 1,0
#    (Гц/сек == сек^-2).
```

## Помощники для конфигурационных файлов

### [board_pins]

Псевдонимы выводов платы (можно задать любое количество секций с префиксом "board_pins"). Используйте это для определения псевдонимов выводов микроконтроллера.

```
[board_pins my_aliases]
mcu: mcu
#   A comma separated list of micro-controllers that may use the
#   aliases. The default is to apply the aliases to the main "mcu".
aliases:
aliases_<name>:
#   A comma separated list of "name=value" aliases to create for the
#   given micro-controller. For example, "EXP1_1=PE6" would create an
#   "EXP1_1" alias for the "PE6" pin. However, if "value" is enclosed
#   in "<>" then "name" is created as a reserved pin (for example,
#   "EXP1_9=<GND>" would reserve "EXP1_9"). Any number of options
#   starting with "aliases_" may be specified.
```

### [включить]

Поддержка включаемых файлов. Можно включить дополнительный файл конфигурации из основного файла конфигурации принтера. Также могут использоваться символы подстановки (например, "configs/*.cfg").

```
[include my_other_config.cfg]
```

### [duplicate_pin_override]

Этот инструмент позволяет многократно определять один вывод микроконтроллера в конфигурационном файле без обычной проверки ошибок. Это предназначено для диагностики и отладки. Этот раздел не нужен там, где Klipper поддерживает многократное использование одного и того же вывода, и использование этого переопределения может привести к запутанным и неожиданным результатам.

```
[duplicate_pin_override]
пины:
#    Список пинов, разделенных запятыми, который может быть использован несколько раз в
#    конфигурационном файле без обычных проверок на ошибки. Этот параметр должен быть
#    предоставлен.
```

## Оборудование для зондирования кровати

### [зонд]

Датчик высоты Z. Эту секцию можно определить, чтобы включить аппаратное обеспечение зондирования высоты Z. Когда эта секция включена, становятся доступными расширенные команды [g-кода] PROBE и QUERY_PROBE (G-Codes.md#probe). Также см. руководство по калибровке [probe calibrate](Probe_Calibrate.md). Секция probe также создает виртуальный вывод "probe:z_virtual_endstop". На принтерах картезианского типа, использующих датчик вместо концевого упора по оси z, можно установить контакт stepper_z endstop_pin на этот виртуальный контакт. Если вы используете "probe:z_virtual_endstop", то не определяйте position_endstop в разделе конфигурации stepper_z.

```
[probe]
pin:
#    Контакт обнаружения зонда. Если этот вывод находится на другом микроконтроллере.
#    чем Z-шаговый, то он включает "multi-mcu homing". Этот
#    параметр должен быть указан.
#deactivate_on_each_sample: True
#    Этот параметр определяет, должен ли Klipper выполнять gcode деактивации
#    между каждой попыткой зондирования при выполнении последовательности из нескольких зондирований
#    последовательности. По умолчанию установлено значение True.
#x_offset: 0.0
#    Расстояние (в мм) между зондом и соплом по оси
#    оси x. По умолчанию равно 0.
#y_offset: 0.0
#    Расстояние (в мм) между зондом и соплом по оси
#    оси y. По умолчанию равно 0.
z_offset:
#    Расстояние (в мм) между станиной и соплом, когда зонд
#    срабатывает. Этот параметр должен быть предоставлен.
#speed: 5.0
#    Скорость (в мм/с) оси Z при зондировании. По умолчанию 5 мм/с.
#samples: 1
#    Количество раз для зондирования каждой точки. Полученные значения z
#    будут усреднены. По умолчанию зондирование выполняется 1 раз.
#sample_retract_dist: 2.0
#    Расстояние (в мм), на которое следует поднимать головку инструмента между каждым образцом (если
#    отбора проб более одного раза). По умолчанию - 2 мм.
#lift_speed:
#    Скорость (в мм/с) оси Z при подъеме зонда между
#    пробами. По умолчанию используется то же значение, что и параметр 'speed'
#    параметр.
#samples_result: average
#    Метод расчета при более чем однократной выборке - либо
#    "медиана" или "среднее". По умолчанию используется среднее значение.
#samples_tolerance: 0.100
#    Максимальное расстояние по Z (в мм), на которое образец может отличаться от других
#    образцов. Если этот допуск превышен, то либо сообщается об ошибке
#    сообщается об ошибке, либо попытка перезапускается (см.
# samples_tolerance_retries). По умолчанию 0,100 мм.
#samples_tolerance_retries: 0
#    Количество повторных попыток, если найден образец, превышающий
# samples_tolerance. При повторной попытке все текущие образцы отбрасываются
#    и попытка зондирования начинается заново. Если правильный набор образцов
#    не получен за заданное число повторных попыток, то об ошибке
#    сообщается об ошибке. По умолчанию равно нулю, что приводит к сообщению об ошибке
#    на первом образце, превышающем samples_tolerance.
#activate_gcode:
#    Список команд G-кода для выполнения перед каждой попыткой зондирования.
#    Формат G-кода см. в файле docs/Command_Templates.md. Это может быть
#    полезным, если зонд нужно активировать каким-либо образом. Не следует
#    вводить сюда команды, которые перемещают головку инструмента (например, G1). По адресу
#    по умолчанию не запускать никаких специальных команд G-кода при активации.
#deactivate_gcode:
#    Список команд G-кода для выполнения после каждой попытки зондирования
#    завершается. Формат G-кода см. в файле docs/Command_Templates.md. Не следует
#    выполнять здесь команды, которые перемещают головку инструмента. По умолчанию
#    не выполнять никаких специальных команд G-кода при деактивации.
```

### [bltouch]

Сенсорный датчик BLTouch. Можно определить эту секцию (вместо секции зонда), чтобы включить зонд BLTouch. Дополнительную информацию см. в [BL-Touch guide](BLTouch.md) и [command reference](G-Codes.md#bltouch). Также создается виртуальный вывод "probe:z_virtual_endstop" (подробности см. в разделе "probe").

```
[bltouch]
sensor_pin:
#    Контакт, подключенный к контакту датчика BLTouch. Большинство устройств BLTouch
#    требуют подтяжки к выводу датчика (префикс имени вывода - "^").
#    Этот параметр должен быть указан.
control_pin:
#    Контакт, подключенный к управляющему контакту BLTouch. Этот параметр должен быть
#    предоставлен.
#pin_move_time: 0.680
#    Количество времени (в секундах), в течение которого нужно ждать, пока пин BLTouch
#    перемещение вверх или вниз. По умолчанию 0,680 секунды.
#stow_on_each_sample: True
#    Это определяет, должен ли Klipper давать команду штырьку двигаться вверх
#    между каждой попыткой зондирования при выполнении последовательности из нескольких зондирований
#    последовательности. Прочитайте инструкции в файле docs/BLTouch.md, прежде чем устанавливать значение
#    это значение на False. По умолчанию установлено значение True.
#probe_with_touch_mode: False
#    Если это значение установлено в True, то Klipper будет зондировать устройство в
#    "touch_mode". По умолчанию установлено значение False (зондирование в режиме "pin_down").
#pin_up_reports_not_triggered: True
#    Устанавливается, если BLTouch постоянно сообщает о том, что пробник находится в состоянии "не
#    сработал" после успешной команды "pin_up". Это должно
#    быть True для всех подлинных устройств BLTouch. Прочитайте инструкции в
#    docs/BLTouch.md, прежде чем устанавливать значение False. По умолчанию установлено значение True.
#pin_up_touch_mode_reports_triggered: True
#    Устанавливает, будет ли BLTouch постоянно сообщать о состоянии "срабатывания" после
#    команды "pin_up", за которой следует "touch_mode". Это должно быть
#    True для всех настоящих устройств BLTouch. Прочитайте инструкции в
#    docs/BLTouch.md, прежде чем устанавливать значение False. По умолчанию установлено значение True.
#set_output_mode:
#    Запрашивает определенный режим вывода контактов датчика на BLTouch V3.0 (и
#    более поздних версий). Эта настройка не должна использоваться для других типов датчиков.
#    Установите значение "5V", чтобы запросить выход датчика на 5 вольт (используйте только в том случае, если
#    плата контроллера нуждается в режиме 5 В и допускает 5 В на своем входе
#    сигнальной линии). Установите значение "OD", чтобы запросить использование выхода датчика в режиме
#    режим открытого стока. По умолчанию режим вывода не запрашивается.
#x_offset:
#y_offset:
#z_offset:
#speed:
#lift_speed:
#samples:
#sample_retract_dist:
#samples_result:
#samples_tolerance:
#samples_tolerance_retries:
#    Информацию об этих параметрах см. в разделе "probe".
```

### [smart_effector]

Smart Effector" из Duet3d реализует Z-зонд с помощью датчика силы. Можно определить эту секцию вместо `[probe]`, чтобы включить специфические функции Smart Effector. Это также позволяет использовать [runtime commands](G-Codes.md#smart_effector) для настройки параметров Smart Effector во время выполнения.

```
[smart_effector]
pin:
#    Контакт, подключенный к выходному контакту Smart Effector Z Probe (контакт 5). Обратите внимание, что
#    подтягивающий резистор на плате обычно не требуется. Однако если
#    выходной контакт подключен к контакту платы с подтягивающим резистором, этот
#    резистор должен иметь высокое значение (например, 10K Ом или более). На некоторых платах подтягивающий резистор имеет низкое
#    подтягивающий резистор на входе датчика Z, что, скорее всего, приведет к тому, что
#    всегда задействованному состоянию датчика. В этом случае подключите интеллектуальный эффектор к
#    другому выводу на плате. Этот параметр является обязательным.
#control_pin:
#    Контакт, подключенный к входному контакту управления Smart Effector (контакт 7). Если задан,
#    становятся доступны команды программирования чувствительности Smart Effector.
#probe_accel:
#    Если установлен, ограничивает ускорение перемещения зонда (в мм/сек^2).
#    Внезапное большое ускорение в начале движения зонда может
#    привести к ложным срабатываниям датчика, особенно если хотэнд тяжелый.
#    Чтобы предотвратить это, может потребоваться уменьшить ускорение
#    движения зонда с помощью этого параметра.
#    время_восстановления: 0,4
#    Задержка между перемещением и перемещением зонда в секундах. Быстрое
#    перемещение перед зондированием может привести к ложным срабатываниям зонда.
#    Это может привести к ошибке "Зонд сработал до перемещения", если задержка не установлена.
#    не установлена. Значение 0 отключает задержку восстановления.
#    Значение по умолчанию - 0,4.
#x_offset:
#y_offset:
#    следует оставить без значения (или установить на 0).
z_offset:
#    Высота срабатывания датчика. Начните с -0,1 (мм), а затем скорректируйте с помощью
#    команды `PROBE_CALIBRATE`. Этот параметр должен быть указан.
#speed:
#    Скорость (в мм/с) оси Z при выполнении зондирования. Рекомендуется начинать
#    со скорости зондирования 20 мм/с и регулировать ее по мере необходимости для повышения
#    точности и повторяемости срабатывания датчика.
# образцы:
#sample_retract_dist:
#samples_result:
#samples_tolerance:
#samples_tolerance_retries:
#activate_gcode:
#deactivate_gcode:
#deactivate_on_each_sample:
#    Дополнительные сведения о параметрах см. в разделе "Зонд".
```

### [probe_eddy_current]

Поддержка вихретоковых индуктивных датчиков. Можно определить эту секцию (вместо секции зонда), чтобы включить этот зонд. Дополнительную информацию см. в [справочнике команд](G-Codes.md#probe_eddy_current).

```
[probe_eddy_current my_eddy_probe]
тип_датчика: ldc1612
#    Микросхема датчика, используемая для измерения вихревых токов. Этот
#    параметр должен быть предоставлен и должен быть установлен в ldc1612.
#intb_pin:
#    вывод gpio MCU, подключенный к выводу INTB датчика ldc1612 (если
#    доступен). По умолчанию вывод INTB не используется.
#z_offset:
#    Номинальное расстояние (в мм) между соплом и станиной, при котором
#    попытка зондирования должна остановиться. Этот параметр должен быть указан.
#i2c_address:
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    Настройки i2c для микросхемы датчика. См. раздел "Общие настройки I2C
#    настройки" для описания вышеуказанных параметров.
#x_offset:
#y_offset:
#speed:
#lift_speed:
#samples:
#sample_retract_dist:
#samples_result:
#samples_tolerance:
#samples_tolerance_retries:
#    Информацию об этих параметрах см. в разделе "probe".
```

### [axis_twist_compensation]

Инструмент для компенсации неточных показаний датчиков из-за скручивания X-образного портала. Более подробную информацию о симптомах, конфигурации и настройке см. в руководстве [Axis Twist Compensation Guide](Axis_Twist_Compensation.md).

```
[axis_twist_compensation]
#speed: 50
#    Скорость (в мм/с) перемещения без пробивки во время калибровки.
#    По умолчанию 50.
#horizontal_move_z: 5
#    Высота (в мм), на которую следует дать команду головке переместиться
#    непосредственно перед началом работы датчика. По умолчанию равно 5.
calibrate_start_x: 20
#    Определяет минимальную координату X для калибровки.
#    Это должна быть координата X, которая позиционирует насадку в начальной
#    позиции калибровки. Этот параметр должен быть указан.
calibrate_end_x: 200
#    Определяет максимальную координату X калибровки.
#    Это должна быть координата X, которая позиционирует насадку в конечной # позиции калибровки.
#    позиции калибровки. Этот параметр должен быть указан.
calibrate_y: 112.5
#    Определяет координату Y калибровки.
#    Это должна быть координата Y, по которой позиционируется сопло во время
#    процесса калибровки. Этот параметр должен быть задан и рекомендуется, чтобы
#    находиться вблизи центра станины
```

## Дополнительные шаговые двигатели и экструдеры

### [stepper_z1]

Многошаговые оси. В принтере, работающем в картезианском стиле, степпер, управляющий данной осью, может иметь дополнительные блоки конфигурации, определяющие степперы, которые должны работать в паре с основным степпером. Можно задать любое количество секций с числовым суффиксом, начиная с 1 (например, "stepper_z1", "stepper_z2" и т. д.).

```
[stepper_z1]
#step_pin:
#dir_pin:
#enable_pin:
#микрошаги:
#rotation_distance:
#    Определение вышеуказанных параметров см. в разделе "степпер".
#endstop_pin:
#    Если для дополнительного шагового механизма задан штифт endstop_pin, то он
#    степпер будет двигаться до тех пор, пока не сработает endstop. В противном случае
#    шаговый механизм будет перемещаться до тех пор, пока не сработает концевой упор на основном шаговом механизме для
#    оси не сработает.
```

### [экструдер1]

В принтере с несколькими экструдерами добавьте дополнительную секцию для каждого экструдера. Дополнительные секции экструдера должны называться " экструдер1", "экструдер2", "экструдер3" и так далее. Описание доступных параметров смотрите в разделе "Экструдер".

Пример конфигурации смотрите в [sample-multi-extruder.cfg](../config/sample-multi-extruder.cfg).

```
[extruder1]
#step_pin:
#dir_pin:
#...
#    См. раздел "Экструдер" для получения информации о доступных шаговых и нагревательных
#    параметры.
#shared_heater:
#    Эта опция устарела и больше не должна указываться.
```

### [dual_carriage]

Поддержка картезианских и гибридных_corexy/z принтеров с двумя каретками на одной оси. Режим каретки может быть установлен с помощью расширенной команды g-кода SET_DUAL_CARRIAGE. Например, команда "SET_DUAL_CARRIAGE CARRIAGE=1" активирует каретку, определенную в этом разделе (CARRIAGE=0 возвращает активацию к основной каретке). Поддержка двойной каретки обычно сочетается с дополнительными экструдерами - команда SET_DUAL_CARRIAGE часто вызывается одновременно с командой ACTIVATE_EXTRUDER. Не забудьте припарковать каретки во время деактивации. Обратите внимание, что при наведении G28 обычно сначала наводится основная каретка, а затем каретка, определенная в разделе конфигурации `[dual_carriage]`. Однако каретка `[dual_carriage]` будет направлена первой, если обе каретки возвращаются в положительном направлении и каретка [dual_carriage] имеет `позицию_endstop` больше, чем основная каретка, или если обе каретки возвращаются в отрицательном направлении и каретка `[dual_carriage]` имеет `позицию_endstop` меньше, чем основная каретка.

Кроме того, можно использовать команды "SET_DUAL_CARRIAGE CARRIAGE=1 MODE=COPY" или "SET_DUAL_CARRIAGE CARRIAGE=1 MODE=MIRROR" для активации режима копирования или зеркального отображения двойной каретки, в этом случае она будет следовать за движением каретки 0 соответственно. Эти команды можно использовать для одновременной печати двух деталей - либо двух одинаковых деталей (в режиме COPY), либо зеркально отраженных (в режиме MIRROR). Обратите внимание, что режимы COPY и MIRROR также требуют соответствующей настройки экструдера на двойной каретке, что обычно достигается с помощью команды "SYNC_EXTRUDER_MOTION MOTION_QUEUE=extruder EXTRUDER=<dual_carriage_extruder>" или аналогичной команды.

Пример конфигурации смотрите в [sample-idex.cfg](../config/sample-idex.cfg).

```
[dual_carriage]
ось:
#    Ось, по которой перемещается дополнительная каретка (либо x, либо y). Этот параметр
#    должен быть указан.
#safe_distance:
#    Минимальное расстояние (в мм), которое должно соблюдаться между двойной и основной
#    каретками. Если будет выполнена команда G-кода, которая приблизит каретки
#    ближе, чем указанный предел, такая команда будет отклонена с ошибкой
#    ошибкой. Если безопасное_расстояние не указано, оно будет выведено из
#    position_min и position_max для сдвоенной и основной кареток. Если установлено
#    на 0 (или безопасное_расстояние не задано, а position_min и position_max
#    одинаковы для основной и двойной кареток), проверка близости кареток
#    проверки будут отключены.
#step_pin:
#dir_pin:
#enable_pin:
#микрошаги:
#rotation_distance:
#endstop_pin:
#position_endstop:
#position_min:
#position_max:
#    Определение вышеуказанных параметров см. в разделе "Шаговый механизм".
```

### [extruder_stepper]

Поддержка дополнительных степперов, синхронизированных с движением экструдера (можно определить любое количество секций с префиксом "extruder_stepper").

Дополнительную информацию см. в [справочнике команд](G-Codes.md#extruder).

```
[extruder_stepper my_extra_stepper].
extruder:
#    Экструдер, с которым синхронизируется этот степпер. Если это значение установлено в
#    пустая строка, то степпер не будет синхронизирован с
#    экструдером. Этот параметр должен быть указан.
#step_pin:
#dir_pin:
#enable_pin:
#микрошаги:
#rotation_distance:
#    См. раздел "Степпер" для определения вышеуказанных
#    параметров.
```

### [manual_stepper]

Ручные степперы (можно определить любое количество секций с префиксом "manual_stepper"). Это степперы, которые управляются командой g-кода MANUAL_STEPPER. Например: "MANUAL_STEPPER STEPPER=my_stepper MOVE=10 SPEED=5". Описание команды MANUAL_STEPPER см. в файле [G-Codes](G-Codes.md#manual_stepper). Шаговые механизмы не связаны с обычной кинематикой принтера.

```
[manual_stepper my_stepper]
#step_pin:
#dir_pin:
#enable_pin:
#микрошаги:
#rotation_distance:
#    Описание этих параметров см. в разделе "Шаговый механизм".
#velocity:
#    Установите скорость по умолчанию (в мм/с) для шагового механизма. Это значение
#    будет использоваться, если в команде MANUAL_STEPPER не указан параметр SPEED
#    параметр. По умолчанию - 5 мм/с.
#accel:
#    Устанавливает ускорение по умолчанию (в мм/с^2) для шагового механизма. Значение
#    ускорение, равное нулю, приведет к отсутствию ускорения. Это значение
#    будет использоваться, если в команде MANUAL_STEPPER не указан параметр ACCEL
#    параметр. По умолчанию это значение равно нулю.
#endstop_pin:
#    Контакт обнаружения переключателя конечного останова. Если он указан, то можно выполнять
#    "самонаводящиеся движения", добавив параметр STOP_ON_ENDSTOP к
#    командам движения MANUAL_STEPPER.
```

## Индивидуальные нагреватели и датчики

### [verify_heater]

Проверка нагревателя и датчика температуры. Проверка нагревателя автоматически включается для каждого нагревателя, настроенного на принтере. Используйте секции verify_heater, чтобы изменить настройки по умолчанию.

```
[verify_heater heater_config_name]
#max_error: 120
#   Максимальная "суммарная ошибка температуры" перед тем, как выдать
#   ошибку. Меньшие значения приводят к более строгой проверке, а большие
#   значения позволяют увеличить время до сообщения об ошибке.
#   В частности, температура проверяется раз в секунду, и если она
#   близка к целевой температуре, то внутренний "счетчик ошибок
#   счетчик ошибок" сбрасывается; в противном случае, если температура ниже
#   целевого диапазона, то счетчик увеличивается на величину
#   зарегистрированная температура отличается от этого диапазона. Если счетчик
#   превысит это значение "max_error", то будет выдана ошибка. По умолчанию
#   120.
#check_gain_time:
#   Это контролирует проверку нагревателя во время начального нагрева. Меньшие
#   значения приводят к более строгой проверке, а большие значения позволяют
#   больше времени до сообщения об ошибке. В частности, во время
#   начального нагрева, если температура нагревателя увеличивается
#   в течение этого времени (указанного в секундах), то внутренний
#   "счетчик ошибок" сбрасывается. По умолчанию это 20 секунд для экструдеров
#   и 60 секунд для нагревателя_кровати.
#гистерезис: 5
#   Максимальная разница температур (в градусах Цельсия) с целевой
#   температуры, которая считается в диапазоне целевой. Это
#   управляет проверкой диапазона max_error. Настраивать это
#   значение. По умолчанию это значение равно 5.
#heating_gain: 2
#   Минимальная температура (в градусах Цельсия), на которую должен увеличиться нагреватель.
#   на время проверки check_gain_time. Настраивать это
#   значение. По умолчанию это значение равно 2.
```

### [homing_heaters]

Инструмент для отключения нагревателей при наведении или зондировании оси.

```
[homing_heaters]
#steppers:
#    Список степперов, которые должны вызывать отключение нагревателей, разделенный запятыми.
#    отключены. По умолчанию нагреватели отключаются для любого хоминга/пробивания
#    move.
#    Типичный пример: stepper_z
#heaters:
#    Список нагревателей, которые нужно отключить во время хоминга/пробивания, разделенный запятыми.
#    движения. По умолчанию отключаются все нагреватели.
#    Типичный пример: экструдер, нагревательная_кровать
```

### [термистор]

Пользовательские термисторы (можно определить любое количество секций с префиксом "термистор"). Пользовательский термистор может быть использован в поле sensor_type секции конфигурации нагревателя. (Например, если определить секцию "[термистор мой_термистор]", то при определении нагревателя можно использовать "тип_датчика: мой_термистор"). Обязательно поместите секцию термистора в конфигурационный файл выше ее первого использования в секции нагревателя.

```
[thermistor my_thermistor]
#температура1:
#сопротивление1:
#temperature2:
#сопротивление2:
#temperature3:
#resistance3:
#    Три измерения сопротивления (в Омах) при заданных температурах
#    (в градусах Цельсия). Эти три измерения будут использованы для расчета
#    коэффициентов Штейнхарта-Харта для термистора. Эти параметры
#    должны быть указаны при использовании метода Штейнхарта-Харта для определения
#    термистора.
#beta:
#    Альтернативно, можно определить температуру1, сопротивление1 и бету
#    для определения параметров термистора. Этот параметр должен быть
#    указываться при использовании "beta" для определения термистора.
```

### [adc_temperature]

Пользовательские датчики температуры АЦП (можно определить любое количество секций с префиксом "adc_temperature"). Это позволяет определить пользовательский датчик температуры, который измеряет напряжение на выводе аналого-цифрового преобразователя (ADC) и использует линейную интерполяцию между набором настроенных измерений температуры/напряжения (или температуры/сопротивления) для определения температуры. Полученный датчик можно использовать как тип_датчика в секции нагревателя. (Например, если определить секцию "[adc_temperature my_sensor]", то при определении нагревателя можно использовать "sensor_type: my_sensor"). Обязательно поместите секцию датчика в конфигурационный файл выше ее первого использования в секции нагревателя.

```
[adc_temperature my_sensor]
#температура1:
#voltage1:
#temperature2:
#voltage2:
#...
#    Набор температур (в градусах Цельсия) и напряжений (в вольтах) для использования
#    в качестве ссылки при преобразовании температуры. Секция нагревателя, использующая
#    этот датчик, может также указать параметры adc_voltage и voltage_offset
#    параметры для определения напряжения АЦП (см. раздел "Общие температурные
#    усилители" для получения подробной информации). Необходимо указать как минимум два измерения
#    быть предоставлены.
#температура1:
#сопротивление1:
#температура2:
#сопротивление2:
#...
#    В качестве альтернативы можно указать набор температур (в градусах Цельсия)
#    и сопротивление (в Омах) для использования в качестве эталона при преобразовании
#    температуры. Секция нагревателя, использующая этот датчик, может также указать
#    параметр pullup_resistor (подробности см. в разделе "Экструдер"). На
#    необходимо указать как минимум два измерения.
```

### [heater_generic]

Общие нагреватели (можно определить любое количество секций с префиксом "heater_generic"). Эти нагреватели ведут себя так же, как и стандартные нагреватели (экструдеры, обогреваемые станины). Для задания целевой температуры используйте команду SET_HEATER_TEMPERATURE (подробности см. в [G-Codes](G-Codes.md#heaters)).

```
[heater_generic my_generic_heater]
#gcode_id:
#    Идентификатор, который будет использоваться при сообщении температуры в команде M105.
#    Этот параметр должен быть указан.
#heater_pin:
#max_power:
#sensor_type:
#sensor_pin:
#smooth_time:
#control:
#pid_Kp:
#pid_Ki:
#pid_Kd:
#pwm_cycle_time:
#min_temp:
#max_temp:
#    См. раздел "Экструдер" для определения вышеуказанных
#    параметров.
```

### [temperature_sensor]

Общие датчики температуры. Можно определить любое количество дополнительных датчиков температуры, которые будут сообщаться с помощью команды M105.

```
[температурный_сенсор мой_сенсор]
#сенсор_типа:
#sensor_pin:
#min_temp:
#max_temp:
#    См. раздел "Экструдер" для определения вышеуказанных
#    параметров.
#gcode_id:
#    Определение этого параметра см. в разделе "Нагреватель_генеральный".
#    параметра.
```

### [temperature_probe]

Сообщает о температуре катушки зонда. Включает дополнительную калибровку теплового дрейфа для зондов на основе вихревых токов. Секция `[temperature_probe]` может быть связана с секцией `[probe_eddy_current]`, используя один и тот же постфикс для обеих секций.

```
[temperature_probe my_probe]
#sensor_type:
#sensor_pin:
#min_temp:
#max_temp:
#    Конфигурация датчика температуры.
#    См. раздел "Экструдер" для определения вышеуказанных
#    параметров.
#smooth_time:
#    Значение времени (в секундах), в течение которого измерения температуры будут
#    сглаживаться для уменьшения влияния шумов при измерениях. По умолчанию
#    является 2,0 секунды.
#gcode_id:
#    Определение этого параметра см. в разделе "heater_generic".
#    параметра.
#speed:
#    Скорость перемещения [мм/с] для перемещений по оси xy во время калибровки.  По умолчанию
#    скорость, определяемая датчиком.
#horizontal_move_z:
#    Расстояние по z [мм] от станины, на котором будут происходить xy-перемещения
#    во время калибровки. По умолчанию - 2 мм.
# resting_z:
#    Расстояние по z [мм] от станины, на котором инструмент будет отдыхать
#    для нагрева катушки зонда во время калибровки.  По умолчанию .4 мм.
#calibration_position:
#    Позиция X, Y, Z, в которую следует переместить инструмент при
#    инициализации калибровки дрейфа зонда.  Это место.
#    где произойдет первый ручной зонд.  Если это значение опущено, то
#    по умолчанию инструмент не будет перемещаться до первого
#    ручного зондирования.
#calibration_bed_temp:
#    Максимальная безопасная температура ложа (в C), используемая для нагрева зонда
#    во время калибровки дрейфа зонда.  Если это значение установлено, процедура калибровки
#    процедура калибровки будет включать кровать после того, как будет взят первый образец
#    взятия пробы.  По завершении процедуры калибровки # температура ложа
#    температура будет установлена на ноль.  Если значение опущено, то по умолчанию
#    температура станины не устанавливается.
#calibration_extruder_temp:
#    Температура экструдера (в C), установленная зондом во время калибровки дрейфа.
#    При указании этого параметра процедура будет ждать, пока не будет достигнута
#    указанная температура будет достигнута, прежде чем запросить первый ручной
#    зонда.  По завершении процедуры калибровки температура экструдера
#    температура экструдера будет установлена на 0. Если опция опущена, то по умолчанию
#    не устанавливать температуру экструдера.
#extruder_heating_z: 50.
#    Расположение по оси Z, в котором будет происходить нагрев экструдера, если
#    установлена опция "calibration_extruder_temp".  Рекомендуется нагревать
#    экструдер на некотором расстоянии от станины, чтобы минимизировать его влияние на
#    температуру катушки зонда.  По умолчанию это значение равно 50.
```

## Датчики температуры

Klipper содержит определения для многих типов температурных датчиков. Эти датчики можно использовать в любой секции конфигурации, где требуется датчик температуры (например, в секции `[extruder]` или `[heater_bed]`).

### Обычные термисторы

Обычные термисторы. Следующие параметры доступны в секциях нагревателей, использующих один из этих датчиков.

```
sensor_type:
#    Один из "EPCOS 100K B57560G104F", "ATC Semitec 104GT-2",
#    "ATC Semitec 104NT-4-R025H42G", "Generic 3950",
#    "Honeywell 100K 135-104LAG-J01", "NTC 100K MGB18-104F39050L32",
#    "SliceEngineering 450", или "TDK NTCG104LH104JT1".
sensor_pin:
#    Контакт аналогового входа, подключенный к термистору. Этот параметр должен
#    быть предоставлен.
#pullup_resistor: 4700
#    Сопротивление (в омах) подтяжки, подключенной к термистору.
#    По умолчанию 4700 Ом.
#inline_resistor: 0
#    Сопротивление (в омах) дополнительного (не изменяющего тепло) резистора.
#    который устанавливается в линию с термистором. Это редко задается.
#    По умолчанию 0 Ом.
```

### Усилители общей температуры

Общие усилители температуры. Следующие параметры доступны в секциях нагревателей, использующих один из этих датчиков.

```
тип_датчика:
#    Один из "PT100 INA826", "AD595", "AD597", "AD8494", "AD8495",
#    "AD8496" или "AD8497".
sensor_pin:
#    Контакт аналогового входа, подключенный к датчику. Этот параметр должен быть
#    предоставлен.
#adc_voltage: 5.0
#    Напряжение сравнения АЦП (в вольтах). По умолчанию 5 вольт.
#voltage_offset: 0
#    Смещение напряжения АЦП (в вольтах). По умолчанию 0.
```

### Датчик PT1000 с прямым подключением

Датчик PT1000 с прямым подключением. Следующие параметры доступны в секциях нагревателей, использующих один из этих датчиков.

```
тип_датчика: PT1000
sensor_pin:
#    Контакт аналогового входа, подключенный к датчику. Этот параметр должен быть
#    предоставлен.
#pullup_resistor: 4700
#    Сопротивление (в омах) подтягивающего устройства, подключенного к датчику. По
#    по умолчанию составляет 4700 Ом.
```

### Датчики температуры MAXxxxxx

Датчики температуры на основе последовательного периферийного интерфейса (SPI) MAXxxxxx. Следующие параметры доступны в секциях нагревателей, использующих один из этих типов датчиков.

```
тип_датчика:
# Один из "MAX6675", "MAX31855", "MAX31856" или "MAX31865".
sensor_pin:
# Линия выбора микросхемы для микросхемы датчика. Этот параметр должен быть
# предоставлен.
#spi_speed: 4000000
# Скорость SPI (в гц), используемая при обмене данными с микросхемой.
# По умолчанию 4000000.
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
#tc_type: K
#tc_use_50Hz_filter: False
#tc_averaging_count: 1
# Вышеуказанные параметры управляют параметрами датчиков MAX31856
#    микросхемы. Значения по умолчанию для каждого параметра находятся рядом с его
#    в приведенном выше списке.
#rtd_nominal_r: 100
#rtd_reference_r: 430
#rtd_num_of_wires: 2
#rtd_use_50Hz_filter: False
#    Вышеуказанные параметры управляют параметрами датчиков микросхемы MAX31865
#    микросхемы. Значения по умолчанию для каждого параметра находятся рядом с его
#    в приведенном выше списке.
```

### Датчик температуры BMP180/BMP280/BME280/BMP388/BME680

Датчики окружающей среды BMP180/BMP280/BME280/BMP388/BME680 с двухпроводным интерфейсом (I2C). Обратите внимание, что эти датчики не предназначены для использования с экструдерами и нагревателями, а скорее для мониторинга температуры окружающей среды (C), давления (гПа), относительной влажности и, в случае BME680, уровня газа. Смотрите [sample-macros.cfg](../config/sample-macros.cfg) для gcode_macro, который может использоваться для сообщения о давлении и влажности в дополнение к температуре.

```
тип_датчика: BME280
#i2c_address:
#    По умолчанию 118 (0x76). Датчики BMP180, BMP388 и некоторые датчики BME280
#    имеют адрес 119 (0x77).
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
```

### Датчик температуры AHT10/AHT20/AHT21

Датчики окружающей среды AHT10/AHT20/AHT21 с двухпроводным интерфейсом (I2C). Обратите внимание, что эти датчики не предназначены для использования с экструдерами и нагревателями, а скорее для мониторинга температуры окружающей среды (C) и относительной влажности. Смотрите [sample-macros.cfg](../config/sample-macros.cfg) для макроса gcode_macro, который можно использовать для сообщения о влажности в дополнение к температуре.

```
тип_датчика: AHT10
#    Также используйте AHT10 для датчиков AHT20 и AHT21.
#i2c_address:
#    По умолчанию 56 (0x38). Некоторые датчики AHT10 позволяют использовать.
#    57 (0x39) путем перемещения резистора.
#i2c_mcu:
#i2c_bus:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
#aht10_report_time:
#    Интервал в секундах между считываниями. По умолчанию 30, минимум 5
```

### Датчик HTU21D

Датчик окружающей среды семейства HTU21D с двухпроводным интерфейсом (I2C). Обратите внимание, что этот датчик не предназначен для использования с экструдерами и нагревателями, а скорее для мониторинга температуры окружающей среды (C) и относительной влажности. Смотрите [sample-macros.cfg](../config/sample-macros.cfg) для макроса gcode_macro, который можно использовать для сообщения о влажности в дополнение к температуре.

```
тип_датчика:
#    Должно быть "HTU21D", "SI7013", "SI7020", "SI7021" или "SHT21".
#i2c_address:
#    По умолчанию 64 (0x40).
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
# вышеуказанных параметров.
#htu21d_hold_master:
#    Может ли датчик удерживать I2C buf во время чтения. Если True, то никакие другие
#    обмен данными по шине не может осуществляться во время чтения.
#    По умолчанию False.
#htu21d_resolution:
#    Разрешение показаний температуры и влажности.
#    Допустимые значения:
#    'TEMP14_HUM12' -> 14 бит для температуры и 12 бит для влажности.
#     'TEMP13_HUM10' -> 13 бит для температуры и 10 бит для влажности
#     'TEMP12_HUM08' -> 12 бит для температуры и 08 бит для влажности
#     'TEMP11_HUM11' -> 11 бит для температуры и 11 бит для влажности
#    По умолчанию: "TEMP11_HUM11"
#htu21d_report_time:
#    Интервал в секундах между показаниями. По умолчанию 30
```

### Датчик SHT3X

Датчики окружающей среды семейства SHT3X с двухпроводным интерфейсом (I2C). Эти датчики имеют диапазон -55~125 C, поэтому могут использоваться, например, для мониторинга температуры в камере. Они также могут работать в качестве простых контроллеров вентиляторов/нагревателей.

```
тип_датчика: SHT3X
#i2c_address:
#    По умолчанию 68 (0x44).
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
```

### Датчик температуры LM75

Датчики температуры LM75/LM75A с двухпроводным подключением (I2C). Эти датчики имеют диапазон -55~125 C, поэтому могут использоваться, например, для контроля температуры в камере. Они также могут работать в качестве простых контроллеров вентиляторов/нагревателей.

```
тип_датчика: LM75
#i2c_address:
#    По умолчанию 72 (0x48). Нормальный диапазон - 72-79 (0x48-0x4F), а 3
#    младших бита адреса конфигурируются с помощью выводов на чипе
#    (обычно с помощью перемычек или жесткого подключения).
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
#lm75_report_time:
#    Интервал в секундах между считываниями. По умолчанию 0,8, минимальное значение
#    0.5.
```

### Встроенный микроконтроллерный датчик температуры

Микроконтроллеры atsam, atsamd и stm32 содержат внутренний датчик температуры. Для мониторинга этих температур можно использовать датчик "temperature_mcu".

```
тип_датчика: temperature_mcu
#sensor_mcu: mcu
#    Микроконтроллер, с которого будет считываться информация. По умолчанию используется "mcu".
#sensor_temperature1:
#sensor_adc1:
#    Укажите два вышеуказанных параметра (температуру в градусах Цельсия и
#    значение АЦП в виде плавающей величины между 0,0 и 1,0) для калибровки
#    температуры микроконтроллера. Это может улучшить заявленную
#    точность температуры на некоторых чипах. Типичный способ получения этой
#    калибровочной информации является полное отключение питания от
#    принтера на несколько часов (чтобы убедиться, что он находится при температуре окружающей среды).
#    температуре окружающей среды), затем включить его и использовать команду QUERY_ADC для
#    получения измерений АЦП. Используйте какой-либо другой датчик температуры на
#    принтера, чтобы найти соответствующую температуру окружающей среды. На сайте
#    по умолчанию используются данные заводской калибровки на
#    микроконтроллера (если применимо) или номинальные значения из
#    спецификации микроконтроллера.
#sensor_temperature2:
#sensor_adc2:
#    Если указаны sensor_temperature1/sensor_adc1, то можно также
#    указать калибровочные данные sensor_temperature2/sensor_adc2. В этом случае
#    может предоставить калиброванную информацию о "температурном наклоне". По
#    по умолчанию используются заводские калибровочные данные на
#    микроконтроллера (если применимо) или номинальные значения из
#    спецификации микроконтроллера.
```

### Датчик температуры хоста

Температура от компьютера (например, Raspberry Pi), на котором запущено программное обеспечение хоста.

```
тип_датчика: температура_хоста
#sensor_path:
#    Путь к системному файлу температуры. По умолчанию это.
#    "/sys/class/thermal/thermal_zone0/temp", который является температурным
#    системный файл на компьютере Raspberry Pi.
```

### Датчик температуры DS18B20

DS18B20 - это 1-проводной (w1) цифровой датчик температуры. Обратите внимание, что этот датчик не предназначен для использования с экструдерами и нагревателями, а скорее для контроля температуры окружающей среды (C). Эти датчики имеют диапазон до 125 C, поэтому их можно использовать, например, для контроля температуры в камере. Они также могут работать в качестве простых контроллеров вентиляторов/нагревателей. Датчики DS18B20 поддерживаются только на "главном микроконтроллере", например, Raspberry Pi. Необходимо установить модуль w1-gpio ядра Linux.

```
тип_датчика: DS18B20
serial_no:
#    Каждое 1-проводное устройство имеет уникальный серийный номер, используемый для идентификации устройства,
#    обычно в формате 28-031674b175ff. Этот параметр должен быть указан.
#    Присоединенные 1-проводные устройства можно перечислить с помощью следующей команды Linux:
#    ls /sys/bus/w1/devices/
#ds18_report_time:
#    Интервал в секундах между считываниями. По умолчанию 3,0, минимум 1,0.
#sensor_mcu:
#    Микроконтроллер, с которого будут считываться данные. Должен быть host_mcu
```

### Комбинированный датчик температуры

Комбинированный датчик температуры - это виртуальный датчик температуры, основанный на нескольких других датчиках. Этот датчик можно использовать с экструдерами, нагревателем_generic и нагревателями.

```
тип_датчика: температура_комбинированная
#sensor_list:
#    Должен быть предоставлен. Список датчиков для объединения в новый "виртуальный"
#    sensor.
#    Например, 'temperature_sensor sensor1,extruder,heater_bed'
#combination_method:
#    Должно быть указано. Метод объединения, используемый для датчика.
#    Доступны следующие варианты: 'max', 'min', 'mean'.
#maximum_deviation:
#    Должно быть указано. Максимально допустимое отклонение между датчиками.
#    для объединения (например, 5 градусов). Чтобы отключить его, используйте большое значение (например, 999,9).
```

## Вентиляторы

### [вентилятор]

Вентилятор охлаждения печати.

```
[fan]
pin:
#    Выходной контакт, управляющий вентилятором. Этот параметр должен быть предоставлен.
#max_power: 1.0
#    Максимальная мощность (выраженная в виде значения от 0,0 до 1,0), на которую может быть установлен
#    пин может быть установлен. Значение 1.0 позволяет установить пин полностью
#    включенным на длительное время, в то время как значение 0,5 позволяет
#    пин быть включенным не более чем на половину времени. Эта настройка может
#    может использоваться для ограничения общей выходной мощности (в течение длительного времени)
#    вентилятора. Если это значение меньше 1,0, то запросы скорости вентилятора
#    будут масштабироваться между нулем и max_power (например, если
#    max_power равно .9 и запрашивается скорость вентилятора 80 %, то вентилятор
#    мощность будет установлена на 72%). По умолчанию это значение равно 1,0.
#shutdown_speed: 0
#    Желаемая скорость вращения вентилятора (выражается в виде значения от 0,0 до 1,0), если
#    программное обеспечение микроконтроллера перейдет в состояние ошибки. По умолчанию
#    является 0.
#cycle_time: 0.010
#    Количество времени (в секундах) для каждого цикла питания ШИМ для
#    вентилятора. Рекомендуется, чтобы это время составляло 10 миллисекунд или больше, если
#    использовании программного ШИМ. По умолчанию 0,010 секунды.
#hardware_pwm: False
#    Включите эту опцию, чтобы использовать аппаратный ШИМ вместо программного ШИМ. Большинство вентиляторов
#    плохо работают с аппаратным ШИМ, поэтому не рекомендуется
#    включать эту опцию, если только нет электрических требований к переключению на
#    очень высоких скоростях. При использовании аппаратной ШИМ фактическое время цикла
#    ограничивается реализацией и может значительно
#    отличаться от запрошенного времени цикла. По умолчанию установлено значение False.
#kick_start_time: 0.100
#    Время (в секундах) для запуска вентилятора на полную скорость при первом
#    включении, либо увеличении ее более чем на 50 % (помогает заставить вентилятор
#    вращаться). По умолчанию 0,100 секунды.
#off_below: 0.0
#    Минимальная входная скорость, при которой вентилятор будет работать (выражается в виде
#    значение от 0.0 до 1.0). Если запрашивается скорость ниже, чем off_below
#    запрашивается, вентилятор будет выключен. Эта настройка может быть
#    использоваться для предотвращения остановки вентилятора и для обеспечения эффективного запуска
#    эффективным. По умолчанию 0.0.
#
#    Эту настройку следует перекалибровать при каждом изменении max_power.
#    Чтобы откалибровать эту настройку, начните с того, что off_below установлено на 0.0 и
#    вращается вентилятор. Постепенно снижайте скорость вентилятора, чтобы определить самую низкую
#    входной скорости, которая обеспечивает надежную работу вентилятора без застоев. Установите
#    off_below на рабочий цикл, соответствующий этому значению (например.
#    например, 12% -> 0,12) или немного выше.
#tachometer_pin:
#    Входной контакт тахометра для контроля скорости вращения вентилятора. Подтягивание обычно
#    требуется. Этот параметр необязателен.
#tachometer_ppr: 2
#    Если указан параметр tachometer_pin, это количество импульсов на один
#    оборот сигнала тахометра. Для вентилятора BLDC это
#    обычно половина числа полюсов. По умолчанию это 2.
#tachometer_poll_interval: 0.0015
#    Если указан tachometer_pin, это период опроса
#    пина тахометра, в секундах. По умолчанию 0.0015, что достаточно быстро
#    достаточно быстро для вентиляторов со скоростью менее 10000 об/мин при 2 PPR. Это значение должно быть меньше, чем
#    30/(tachometer_ppr*rpm), с некоторым запасом, где rpm - это
#    максимальная скорость (в оборотах в минуту) вентилятора.
#enable_pin:
#    Дополнительный контакт для включения питания вентилятора. Это может быть полезно для вентиляторов
#    с выделенными ШИМ-входами. Некоторые из этих вентиляторов остаются включенными даже при 0% ШИМ
#    на входе. В этом случае вывод PWM можно использовать нормально, и, например.
#    переключаемый на землю FET (стандартный вывод вентилятора) может быть использован для управления питанием
#    вентилятора.
```

### [heater_fan]

Вентиляторы охлаждения нагревателя (можно определить любое количество секций с префиксом "heater_fan"). Вентилятор нагревателя" - это вентилятор, который будет включен каждый раз, когда соответствующий ему нагреватель активен. По умолчанию вентилятор_нагревателя имеет скорость выключения, равную max_power.

```
[heater_fan heatbreak_cooling_fan]
#pin:
#макс_мощность:
#shutdown_speed:
#cycle_time:
#hardware_pwm:
#kick_start_time:
#off_below:
#tachometer_pin:
#tachometer_ppr:
#tachometer_poll_interval:
#enable_pin:
#    Описание вышеуказанных параметров см. в разделе "Вентилятор".
#heater: extruder
#    Имя секции конфигурации, определяющей нагреватель, с которым связан этот вентилятор.
#    ассоциирован с ним. Если список имен нагревателей, разделенных запятой.
#    указан, то вентилятор будет включен, когда любой из указанных
#    нагревателей. По умолчанию используется "Экструдер".
#heater_temp: 50.0
#    Температура (в градусах Цельсия), ниже которой должен опуститься нагреватель, прежде чем
#    отключения вентилятора. По умолчанию 50 градусов Цельсия.
#fan_speed: 1.0
#    Скорость вентилятора (выраженная в виде значения от 0,0 до 1,0), которую вентилятор
#    будет установлена при включении связанного с ним нагревателя. По умолчанию
#    является 1.0
```

### [controller_fan]

Вентилятор охлаждения контроллера (можно определить любое количество секций с префиксом "controller_fan"). Вентилятор контроллера" - это вентилятор, который будет включен всякий раз, когда активен связанный с ним нагреватель или связанный с ним шаговый драйвер. Вентилятор будет останавливаться при достижении значения idle_timeout, чтобы исключить перегрев после отключения компонента, за которым ведется наблюдение.

```
[controller_fan my_controller_fan]
#pin:
#max_power:
#shutdown_speed:
#cycle_time:
#hardware_pwm:
#kick_start_time:
#off_below:
#tachometer_pin:
#tachometer_ppr:
#tachometer_poll_interval:
#enable_pin:
#    Описание вышеуказанных параметров см. в разделе "Вентилятор".
#fan_speed: 1.0
#    Скорость вентилятора (выраженная в виде значения от 0.0 до 1.0), на которую вентилятор
#    будет установлена, когда активен нагреватель или шаговый драйвер.
#    По умолчанию 1.0
#idle_timeout:
#    Количество времени (в секундах) после того, как шаговый драйвер или нагреватель
#    был активен, и вентилятор должен продолжать работать. По умолчанию
#    является 30 секунд.
#idle_speed:
#    Скорость вентилятора (выраженная в виде значения от 0,0 до 1,0), которую вентилятор
#    будет установлена, если нагреватель или шаговый драйвер были активны и
#    до достижения значения idle_timeout. По умолчанию используется значение fan_speed.
#heater:
#stepper:
#    Имя секции конфигурации, определяющей нагреватель/шаговый вентилятор, с которым этот вентилятор
#    связан с этим вентилятором. Если список имен нагревателей/шаговиков, разделенных запятой.
#    указан здесь, то вентилятор будет включен, когда любой из указанных
#    нагревателей/шаговиков. Нагревателем по умолчанию является "Экструдер", а
#    шаговый по умолчанию - все.
```

### [temperature_fan]

Вентиляторы охлаждения с температурным триггером (можно определить любое количество секций с префиксом "temperature_fan"). Температурный вентилятор" - это вентилятор, который будет включаться всякий раз, когда температура соответствующего датчика будет выше заданной. По умолчанию у вентилятора temperature_fan скорость выключения равна max_power.

Дополнительную информацию см. в [справочнике команд](G-Codes.md#temperature_fan).

```
[temperature_fan my_temp_fan]
#pin:
#max_power:
#shutdown_speed:
#cycle_time:
#hardware_pwm:
#kick_start_time:
#off_below:
#tachometer_pin:
#tachometer_ppr:
#tachometer_poll_interval:
#enable_pin:
#    Описание вышеуказанных параметров см. в разделе "Вентилятор".
#sensor_type:
#sensor_pin:
#control:
#max_delta:
#min_temp:
#max_temp:
#    Описание вышеуказанных параметров см. в разделе "Экструдер".
#pid_Kp:
#pid_Ki:
#pid_Kd:
#    Пропорциональная (pid_Kp), интегральная (pid_Ki) и производная
#    (pid_Kd) настройки для системы управления с обратной связью PID. Клиппер
#    оценивает настройки ПИД-регулятора по следующей общей формуле:
#    fan_pwm = max_power - (Kp*e + Ki*integral(e) - Kd*derivative(e)) / 255
#    Где "e" - это "целевая_температура - измеренная_температура" и
#    "fan_pwm" - запрашиваемая частота вращения вентилятора, где 0.0 - полное выключение, а
#    1.0 - полное включение. Параметры pid_Kp, pid_Ki и pid_Kd должны быть
#    должны быть заданы, если включен алгоритм ПИД-регулирования.
#pid_deriv_time: 2.0
#    Значение времени (в секундах), в течение которого измерения температуры будут
#    сглаживаться при использовании алгоритма ПИД-регулирования. Это может уменьшить
#    влияние шума при измерениях. По умолчанию установлено значение 2 секунды.
#target_temp: 40.0
#    Температура (в градусах Цельсия), которая будет целевой температурой.
#    По умолчанию - 40 градусов.
#max_speed: 1.0
#    Скорость вращения вентилятора (выраженная в виде значения от 0,0 до 1,0), на которую вентилятор
#    будет установлена, когда температура датчика превысит заданное значение.
#    По умолчанию 1.0.
#min_speed: 0.3
#    Минимальная скорость вентилятора (выраженная в виде значения от 0,0 до 1,0), на которую
#    будет установлена для вентиляторов с ПИД-регулятором температуры.
#    По умолчанию 0.3.
#gcode_id:
#    Если задано, температура будет сообщаться в запросах M105 с использованием
#    заданный идентификатор. По умолчанию температура не сообщается через M105.
```

### [fan_generic]

Вентилятор с ручным управлением (можно определить любое количество секций с префиксом "fan_generic"). Скорость вентилятора с ручным управлением задается командой SET_FAN_SPEED [gcode](G-Codes.md#fan_generic).

```
[fan_generic extruder_partfan]
#pin:
#max_power:
#shutdown_speed:
#cycle_time:
#hardware_pwm:
#kick_start_time:
#off_below:
#tachometer_pin:
#tachometer_ppr:
#tachometer_poll_interval:
#enable_pin:
#    Описание вышеуказанных параметров см. в разделе "Вентилятор".
```

## LEDs

### [led]

Поддержка светодиодов (и светодиодных лент), управляемых через ШИМ-штырьки микроконтроллера (можно задать любое количество секций с префиксом "led"). Дополнительную информацию см. в [справочнике команд](G-Codes.md#led).

```
[led my_led]
#red_pin:
#green_pin:
#blue_pin:
#white_pin:
#    Контакт, управляющий заданным цветом светодиода. Хотя бы один из перечисленных выше
#    параметров должно быть указано.
#cycle_time: 0.010
#    Количество времени (в секундах) на один цикл ШИМ. Рекомендуется.
#    это время должно быть 10 миллисекунд или больше, если используется программный ШИМ.
#    По умолчанию 0,010 секунды.
#hardware_pwm: False
#    Включите эту опцию, чтобы использовать аппаратный ШИМ вместо программного. Когда
#    использовании аппаратной ШИМ фактическое время цикла ограничивается
#    реализацией и может значительно отличаться от
#    запрошенного времени цикла. По умолчанию установлено значение False.
#initial_RED: 0.0
#initial_GREEN: 0.0
#initial_BLUE: 0.0
#initial_WHITE: 0.0
#    Устанавливает начальный цвет светодиода. Каждое значение должно находиться в диапазоне от 0,0 до
#    1.0. По умолчанию для каждого цвета установлено значение 0.
```

### [неопиксель]

Поддержка неопиксельных (они же WS2812) светодиодов (можно задать любое количество секций с префиксом "neopixel"). Дополнительную информацию см. в [справочнике команд](G-Codes.md#led).

Обратите внимание, что реализация [linux mcu](RPi_microcontroller.md) в настоящее время не поддерживает напрямую подключенные неопиксели. Текущая конструкция, использующая интерфейс ядра Linux, не позволяет реализовать этот сценарий, поскольку интерфейс GPIO ядра недостаточно быстр для обеспечения требуемой частоты импульсов.

```
[neopixel my_neopixel].
pin:
#    Контакт, подключенный к неопикселю. Этот параметр должен быть
#    предоставлен.
#chain_count:
#    Количество чипов Neopixel, которые "соединены в цепочку" с
#    указанному пину. По умолчанию равно 1 (что означает, что только один
#    Neopixel подключен к пину).
#color_order: GRB
#    Устанавливает порядок пикселей, требуемый аппаратным обеспечением светодиода (используется строка
#    содержащей буквы R, G, B, W, причём W необязательно). В качестве альтернативы,
#    это может быть разделенный запятыми список порядков пикселей - по одному для каждого
#    светодиодов в цепочке. По умолчанию используется GRB.
#initial_RED: 0.0
#initial_GREEN: 0.0
#initial_BLUE: 0.0
#initial_WHITE: 0.0
#    Информацию об этих параметрах см. в разделе "led".
```

### [dotstar]

Поддержка светодиодов Dotstar (aka APA102) (можно задать любое количество секций с префиксом "dotstar"). Дополнительную информацию см. в [справочнике команд](G-Codes.md#led).

```
[dotstar my_dotstar]
data_pin:
#    Контакт, подключенный к линии данных дотстара. Этот параметр
#    должен быть указан.
clock_pin:
#    Контакт, подключенный к тактовой линии дотстара. Этот параметр
#    должен быть указан.
#chain_count:
#    Информацию об этом параметре см. в разделе "Неопиксели".
#initial_RED: 0.0
#initial_GREEN: 0.0
#initial_BLUE: 0.0
#    Информацию об этих параметрах см. в разделе "led".
```

### [pca9533]

Поддержка светодиодов PCA9533. PCA9533 используется на плате mightyboard.

```
[pca9533 my_pca9533]
#i2c_address: 98
#    Адрес i2c, который чип использует на шине i2c. Используйте 98 для
#    PCA9533/1, 99 - для PCA9533/2. По умолчанию используется 98.
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
#initial_RED: 0.0
#initial_GREEN: 0.0
#initial_BLUE: 0.0
#initial_WHITE: 0.0
#    Информацию об этих параметрах см. в разделе "led".
```

### [pca9632]

Поддержка светодиодов PCA9632. PCA9632 используется в FlashForge Dreamer.

```
[pca9632 my_pca9632]
#i2c_address: 98
#    Адрес i2c, который чип использует на шине i2c. Это может быть
#    96, 97, 98 или 99.  По умолчанию это 98.
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
#scl_pin:
#sda_pin:
#    Альтернативный вариант, если pca9632 не подключен к аппаратной I2C
#    шине, то можно указать "часы" (scl_pin) и "данные"
#    (sda_pin). По умолчанию используется аппаратный I2C.
#color_order: RGBW
#    Устанавливает порядок пикселей светодиода (используя строку, содержащую
#    буквы R, G, B, W). По умолчанию используется RGBW.
#initial_RED: 0.0
#initial_GREEN: 0.0
#initial_BLUE: 0.0
#initial_WHITE: 0.0
#    Информацию об этих параметрах см. в разделе "led".
```

## Дополнительные сервоприводы, кнопки и другие контакты

### [сервопривод]

Сервоприводы (можно задать любое количество секций с префиксом "servo"). Сервоприводами можно управлять с помощью команды SET_SERVO [g-код](G-Codes.md#servo). Например: SET_SERVO SERVO=my_servo ANGLE=180

```
[servo my_servo]
пин:
#    ШИМ-выход, управляющий сервоприводом. Этот параметр должен быть
#    предоставлен.
#maximum_servo_angle: 180
#    Максимальный угол (в градусах), на который может быть установлен данный сервопривод. По
#    по умолчанию составляет 180 градусов.
#minimum_pulse_width: 0.001
#    Минимальная длительность импульса (в секундах). Это должно соответствовать
#    с углом в 0 градусов. По умолчанию 0,001 секунды.
#maximum_pulse_width: 0.002
#    Время максимальной ширины импульса (в секундах). Это должно соответствовать
#    с углом maximum_servo_angle. По умолчанию 0,002
#    секунд.
#initial_angle:
#    Начальный угол (в градусах) для установки сервопривода. По умолчанию
#    не посылать никаких сигналов при запуске.
#initial_pulse_width:
#    Начальная длительность импульса (в секундах) для настройки сервопривода. (Это
#    действует только в том случае, если не задан initial_angle). По умолчанию не
#    посылать никаких сигналов при запуске.
```

### [gcode_button]

Выполняйте gcode при нажатии или отпускании кнопки (или при изменении состояния пина). Вы можете проверить состояние кнопки, используя `QUERY_BUTTON button=my_gcode_button`.

```
[gcode_button my_gcode_button]
pin:
#    Контакт, к которому подключена кнопка. Этот параметр должен быть
#    предоставлен.
#analog_range:
#    Два сопротивления (в Омах), разделенные запятыми, указывающие минимальный
#    и максимальный диапазон сопротивления для кнопки. Если параметр analog_range
#    указан, то пин должен быть пином с аналоговой поддержкой. По умолчанию
#    используется цифровой gpio для кнопки.
#analog_pullup_resistor:
#    Сопротивление подтяжки (в Омах), если указан аналоговый_диапазон.
#    По умолчанию 4700 Ом.
#press_gcode:
#    Список команд G-Code для выполнения при нажатии кнопки.
#    Поддерживаются шаблоны G-кода. Этот параметр должен быть указан.
#release_gcode:
#    Список команд G-кода для выполнения при отпускании кнопки.
#    Поддерживаются шаблоны G-кода. По умолчанию не выполняется ни одна
#    команды при отпускании кнопки.
```

### [output_pin]

Конфигурируемые во время выполнения выходные пины (можно определить любое количество секций с префиксом "output_pin"). Сконфигурированные здесь пины будут настроены как выходные, и их можно будет изменить во время выполнения с помощью расширенных [команд g-кода] типа "SET_PIN PIN=my_pin VALUE=.1" (G-Codes.md#output_pin).

```
[output_pin my_pin]
pin:
#    Вывод для конфигурирования в качестве выхода. Этот параметр должен быть
#    предоставлен.
#pwm: False
#    Устанавливает, должен ли выходной пин иметь возможность широтно-импульсной модуляции.
#    Если этот параметр истинный, поля значений должны быть от 0 до 1; если он
#    false, то поля значений должны быть либо 0, либо 1.    По умолчанию
# False.
#value:
#    Значение, на которое изначально устанавливается вывод при конфигурировании MCU.
#    По умолчанию 0 (для низкого напряжения).
#shutdown_value:
#    Значение, на которое устанавливается вывод при событии выключения MCU. По умолчанию
#    является 0 (для низкого напряжения).
#cycle_time: 0.100
#    Количество времени (в секундах) на один цикл ШИМ. Рекомендуется.
#    при использовании программного ШИМ это время должно быть 10 миллисекунд или больше.
#    По умолчанию 0,100 секунды для pwm пинов.
#hardware_pwm: False
#    Включите эту опцию, чтобы использовать аппаратный ШИМ вместо программного. Когда
#    использовании аппаратной ШИМ фактическое время цикла ограничивается
#    реализацией и может значительно отличаться от
#    запрошенного времени цикла. По умолчанию установлено значение False.
#scale:
#    Этот параметр можно использовать для изменения того, как параметры 'value' и
#    'shutdown_value' интерпретируются для pwm пинов. Если
#    указан, то параметр 'value' должен быть между 0.0 и
#    'scale'. Это может быть полезно при настройке вывода ШИМ, который
#    управляет опорным напряжением шагового двигателя. Параметр 'scale' может быть установлен в значение
#    эквивалентную силу тока шагового двигателя, если бы ШИМ был полностью включен, и
#    затем параметр 'value' можно задать, используя желаемую
#    ампераж для шагового двигателя. По умолчанию параметр 'value' не масштабируется.
#    параметр.
#maximum_mcu_duration:
#static_value:
#    Эти параметры устарели и больше не должны указываться.
```

### [pwm_tool]

Цифровые выходные контакты с широтно-импульсной модуляцией, способные к высокоскоростному обновлению (можно определить любое количество секций с префиксом "output_pin"). Сконфигурированные здесь пины будут настроены как выходные, и их можно будет изменить во время выполнения программы с помощью расширенных типа "SET_PIN PIN=my_pin VALUE=.1"[команд g-кода](G-Codes.md#output_pin).

```
[pwm_tool my_tool]
pin:
#    Контакт для конфигурирования в качестве выхода. Этот параметр должен быть указан.
#maximum_mcu_duration:
#    Максимальное время, в течение которого MCU может управлять не выключенным значением.
#    без подтверждения от хоста.
#    Если хост не успевает за обновлением, MCU выключится
#    и установит все пины в соответствующие значения отключения.
#    По умолчанию: 0 (отключено)
#    Обычные значения составляют около 5 секунд.
#value:
#shutdown_value:
#cycle_time: 0.100
#hardware_pwm: False
#scale:
#    Определение этих параметров см. в разделе "output_pin".
```

### Цикл PWM

Конфигурируемые во время выполнения выходные пины с динамической синхронизацией циклов pwm (можно определить любое количество секций с префиксом "pwm_cycle_time"). Сконфигурированные здесь пины будут настроены как выходные, и их можно будет изменять во время выполнения с помощью расширенных [команд g-кода] типа "SET_PIN PIN=my_pin VALUE=.1 CYCLE_TIME=0.100" (G-Codes.md#pwm_cycle_time).

```
[pwm_cycle_time my_pin]
пин:
#значение:
#выключение_значения:
#cycle_time: 0.100
#scale:
#    Информацию об этих параметрах см. в разделе "output_pin".
```

### [static_digital_output]

Статически сконфигурированные цифровые выходные контакты (можно определить любое количество секций с префиксом "static_digital_output"). Настроенные здесь выводы будут установлены как выводы GPIO во время конфигурирования MCU. Они не могут быть изменены во время выполнения программы.

```
[static_digital_output my_output_pins]
pins:
#    Список выводов, которые будут установлены в качестве выходных выводов GPIO, разделенный запятыми. Пины
#    пин будет установлен на высокий уровень, если перед именем пина не стоит
#    с "!". Этот параметр должен быть указан.
```

### [multi_pin]

Многоконтактные выходы (можно определить любое количество секций с префиксом "multi_pin"). Выход multi_pin создает внутренний псевдоним пина, который может изменять несколько выходных пинов каждый раз, когда устанавливается псевдоним пина. Например, можно определить объект "[multi_pin my_fan]", содержащий два вывода, а затем задать "pin=multi_pin:my_fan" в секции "[fan]" - при каждом изменении вентилятора оба вывода будут обновляться. Эти псевдонимы нельзя использовать с контактами шагового двигателя.

```
[multi_pin my_multi_pin].
pins:
#    Список пинов, связанных с этим псевдонимом, разделенный запятыми. Этот
#    параметр должен быть указан.
```

## Конфигурация шагового драйвера TMC

Конфигурация драйверов шаговых двигателей Trinamic в режиме UART/SPI. Дополнительная информация содержится в руководстве [TMC Drivers guide](TMC_Drivers.md) и в справочнике [command reference](G-Codes.md#tmcxxxx).

### [tmc2130]

Конфигурирование драйвера шагового двигателя TMC2130 через шину SPI. Чтобы использовать эту функцию, определите секцию конфигурации с префиксом "tmc2130", за которым следует имя соответствующей секции конфигурации шагового двигателя (например, "[tmc2130 stepper_x]").

```
[tmc2130 stepper_x]
cs_pin:
#    Вывод, соответствующий линии выбора микросхемы TMC2130. Этот вывод
#    будет установлен в низкий уровень в начале SPI-сообщения и поднят в высокий уровень
#    после завершения сообщения. Этот параметр должен быть указан.
#spi_speed:
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
#chain_position:
#chain_length:
#    Эти параметры конфигурируют последовательную цепочку SPI. Два параметра
#    определяют позицию шаговика в цепи и общую длину цепи.
#    Позиция 1 соответствует шаговику, который подключается к сигналу MOSI.
#    По умолчанию SPI-цепочка не используется.
#interpolate: True
#    Если true, включите интерполяцию шагов (драйвер будет внутренне
#    шагать с частотой 256 микрошагов). Такая интерполяция
#    вносит небольшое систематическое отклонение позиционирования - см.
#    TMC_Drivers.md для получения подробной информации. По умолчанию установлено значение True.
run_current:
#    Количество тока (в амперах RMS) для настройки драйвера на использование
#    во время движения шагового механизма. Этот параметр должен быть указан.
#hold_current:
#    Величина тока (в амперах RMS) для настройки драйвера на использование.
#    когда шаговик не движется. Установка параметра hold_current не
#    рекомендуется (подробности см. в TMC_Drivers.md). По умолчанию
#    не уменьшать ток.
#sense_resistor: 0.110
#    Сопротивление (в омах) резистора чувства двигателя. По умолчанию
#    является 0,110 Ом.
#stealthchop_threshold: 0
#    Скорость (в мм/с), на которую устанавливается порог "stealthChop". Когда
#    установлен, режим "stealthChop" будет включен, если скорость шагового двигателя
#    скорость ниже этого значения. По умолчанию установлено значение 0, которое отключает
#    режим "stealthChop".
#coolstep_threshold:
#    Скорость (в мм/с) для установки внутреннего "CoolStep" драйвера TMC.
#    порог. Если установлено, функция "Coolstep" будет включена, когда
#    скорость шагового двигателя близка к этому значению или превышает его. Важно
#    - если установлен порог coolstep_threshold и используется "бессенсорное наведение",
#    то необходимо убедиться, что скорость самонаведения выше порога coolstep
#    порога! По умолчанию функция coolstep не включена.
#high_velocity_threshold:
#    Скорость (в мм/с) для установки внутреннего "высокого порога" драйвера TMC
#    порог высокой скорости" (THIGH). Обычно это используется для отключения
#    функции "CoolStep" на высоких скоростях. По умолчанию не устанавливается
#    порог "высокой скорости" TMC.
#driver_MSLUT0: 2863314260
#driver_MSLUT1: 1251300522
#driver_MSLUT2: 608774441
#driver_MSLUT3: 269500962
#driver_MSLUT4: 4227858431
#driver_MSLUT5: 3048961917
#driver_MSLUT6: 1227445590
#driver_MSLUT7: 4211234
#driver_W0: 2
#driver_W1: 1
#driver_W2: 1
#driver_W3: 1
#driver_X1: 128
#driver_X2: 255
#driver_X3: 255
#driver_START_SIN: 0
#driver_START_SIN90: 247
#    Эти поля управляют регистрами таблицы микрошагов напрямую. Оптимальная
#    волновая таблица специфична для каждого двигателя и может меняться в зависимости от тока. На
#    оптимальная конфигурация будет иметь минимальные артефакты печати, вызванные
#    нелинейным движением шагового двигателя. Значения, указанные выше, являются значениями по умолчанию
#    значения, используемые драйвером. Значение должно быть указано в виде целого десятичного числа
#    (шестнадцатеричная форма не поддерживается). Для вычисления полей волновой таблицы,
#    смотрите "Расчетную таблицу" tmc2130 с сайта Trinamic.
#driver_IHOLDDELAY: 8
#driver_TPOWERDOWN: 0
#driver_TBL: 1
#driver_TOFF: 4
#driver_HEND: 7
#driver_HSTRT: 0
#driver_VHIGHFS: 0
#driver_VHIGHCHM: 0
#driver_PWM_AUTOSCALE: True
#driver_PWM_FREQ: 1
#driver_PWM_GRAD: 4
#driver_PWM_AMPL: 128
#driver_SGT: 0
#driver_SEMIN: 0
#driver_SEUP: 0
#driver_SEMAX: 0
#driver_SEDN: 0
#driver_SEIMIN: 0
#driver_SFILT: 0
#    Установите данный регистр во время конфигурирования микросхемы TMC2130
#    чипа. Это может быть использовано для установки пользовательских параметров двигателя. На
#    значения по умолчанию для каждого параметра находятся рядом с названием параметра в
#    вышеприведенном списке.
#diag0_pin:
#diag1_pin:
#    вывод микроконтроллера, подключенный к одной из линий DIAG микросхемы
#    микросхемы TMC2130. Следует указывать только один вывод diag. Контакт
#    является "активным низким" и поэтому обычно предваряется символом "^!". Установка
#    это создает виртуальный пин "tmc2130_stepper_x:virtual_endstop"
#    который может быть использован в качестве контакта endstop_pin шагового механизма. Это позволяет
#    "бессенсорное наведение". (Не забудьте также установить для параметра driver_SGT
#    соответствующее значение чувствительности). По умолчанию не включается
#    бессенсорное наведение.
```

### [tmc2208]

Настройка драйвера шагового двигателя TMC2208 (или TMC2224) через однопроводной UART. Чтобы использовать эту функцию, определите секцию конфигурации с префиксом "tmc2208", за которым следует имя соответствующей секции конфигурации шагового двигателя (например, "[tmc2208 stepper_x]").

```
[tmc2208 stepper_x]
uart_pin:
#    Контакт, подключенный к линии TMC2208 PDN_UART. Этот параметр
#    должен быть предоставлен.
#tx_pin:
#    Если для связи с драйвером используются отдельные линии приема и передачи.
#    драйвером, то установите uart_pin на вывод приема, а tx_pin - на вывод
#    передаче. По умолчанию uart_pin используется как для чтения, так и для
#    записи.
#select_pins:
#    Список выводов, разделенных запятыми, который необходимо установить перед доступом к
#    tmc2208 UART. Это может быть полезно для настройки аналогового мукса для
#    связи с UART. По умолчанию пины не задаются.
#interpolate: True
#    Если true, включите пошаговую интерполяцию (драйвер будет внутренне
#    шаг с частотой 256 микрошагов). Такая интерполяция
#    вносит небольшое систематическое отклонение позиционирования - см.
#   TMC_Drivers.md для получения подробной информации. По умолчанию установлено значение True.
run_current:
#    Количество тока (в амперах RMS) для настройки драйвера на использование
#    во время движения шагового механизма. Этот параметр должен быть указан.
#hold_current:
#    Количество тока (в амперах RMS) для настройки драйвера на использование.
#    когда шаговик не движется. Установка параметра hold_current не
#    рекомендуется (подробности см. в TMC_Drivers.md). По умолчанию
#    не уменьшать ток.
#sense_resistor: 0.110
#    Сопротивление (в омах) резистора чувства двигателя. По умолчанию
#    является 0,110 Ом.
#stealthchop_threshold: 0
#    Скорость (в мм/с), на которую устанавливается порог "stealthChop". Когда
#    установлен, режим "stealthChop" будет включен, если скорость шагового двигателя
#    скорость ниже этого значения. По умолчанию установлено значение 0, которое отключает
#    режим "stealthChop".
#driver_MULTISTEP_FILT: True
#driver_IHOLDDELAY: 8
#driver_TPOWERDOWN: 20
#driver_TBL: 2
#driver_TOFF: 3
#driver_HEND: 0
#driver_HSTRT: 5
#driver_PWM_AUTOGRAD: True
#driver_PWM_AUTOSCALE: True
#driver_PWM_LIM: 12
#driver_PWM_REG: 8
#driver_PWM_FREQ: 1
#driver_PWM_GRAD: 14
#driver_PWM_OFS: 36
#    Установите данный регистр во время конфигурирования микросхемы TMC2208
#    чипа. Это может быть использовано для установки пользовательских параметров двигателя. На
#    значения по умолчанию для каждого параметра находятся рядом с именем параметра в
#    вышеприведенном списке.
```

### [tmc2209]

Настройка драйвера шагового двигателя TMC2209 через однопроводной UART. Чтобы использовать эту функцию, определите секцию конфигурации с префиксом "tmc2209", за которым следует имя соответствующей секции конфигурации шагового двигателя (например, "[tmc2209 stepper_x]").

```
[tmc2209 stepper_x]
uart_pin:
#tx_pin:
#select_pins:
#interpolate: True
run_current:
#hold_current:
#sense_resistor: 0.110
#stealthchop_threshold: 0
#    См. раздел "tmc2208" для определения этих параметров.
#coolstep_threshold:
#    Скорость (в мм/с) для установки внутреннего "CoolStep" драйвера TMC.
#    порог. Если установлено, функция "Coolstep" будет включена, когда
#    скорость шагового двигателя близка к этому значению или превышает его. Важно
#    - если установлен порог coolstep_threshold и используется "бессенсорное наведение",
#    то необходимо убедиться, что скорость самонаведения выше порога coolstep
#    порога! По умолчанию функция coolstep не включена.
#uart_address:
#    Адрес микросхемы TMC2209 для сообщений UART (целое число
#    от 0 до 3). Это обычно используется, когда несколько микросхем TMC2209
#    микросхем подключены к одному выводу UART. По умолчанию - ноль.
#driver_MULTISTEP_FILT: True
#driver_IHOLDDELAY: 8
#driver_TPOWERDOWN: 20
#driver_TBL: 2
#driver_TOFF: 3
#driver_HEND: 0
#driver_HSTRT: 5
#driver_PWM_AUTOGRAD: True
#driver_PWM_AUTOSCALE: True
#driver_PWM_LIM: 12
#driver_PWM_REG: 8
#driver_PWM_FREQ: 1
#driver_PWM_GRAD: 14
#driver_PWM_OFS: 36
#driver_SGTHRS: 0
#driver_SEMIN: 0
#driver_SEUP: 0
#driver_SEMAX: 0
#driver_SEDN: 0
#driver_SEIMIN: 0
#    Установите данный регистр во время конфигурирования микросхемы TMC2209
#    чипа. Это может быть использовано для установки пользовательских параметров двигателя. На
#    значения по умолчанию для каждого параметра находятся рядом с названием параметра в
#    вышеприведенном списке.
#diag_pin:
#    вывод микроконтроллера, подключенный к линии DIAG микросхемы TMC2209.
#    микросхемы. Перед выводом обычно ставится "^", чтобы включить подтягивание.
#    Установка этого параметра создает виртуальный "tmc2209_stepper_x:virtual_endstop"
#    вывод, который может быть использован в качестве конечного_контакта шаговика. При этом
#    включает "бессенсорное наведение". (Не забудьте также установить для параметра driver_SGTHRS
#    соответствующее значение чувствительности). По умолчанию не включается
#    бессенсорное наведение.
```

### [tmc2660]

Конфигурирование драйвера шагового двигателя TMC2660 через шину SPI. Чтобы использовать эту функцию, определите секцию конфигурации с префиксом tmc2660, за которым следует имя соответствующей секции конфигурации шагового двигателя (например, "[tmc2660 stepper_x]").

```
[tmc2660 stepper_x]
cs_pin:
#    Вывод, соответствующий линии выбора микросхемы TMC2660. Этот вывод
#    будет установлен в низкий уровень в начале передачи SPI-сообщений и в высокий уровень
#    после завершения передачи сообщения. Этот параметр должен быть
#    предоставлен.
#spi_speed: 4000000
#    Частота шины SPI, используемая для связи с шаговым механизмом TMC2660
#    драйвером. По умолчанию - 4000000.
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
#interpolate: True
#    Если true, включите пошаговую интерполяцию (драйвер будет внутренне
#    шагать с частотой 256 микрошагов). Это работает только в том случае, если параметр microsteps
#    установлено значение 16. Интерполяция вносит небольшое системное
#    позиционное отклонение - подробности см. в TMC_Drivers.md. По умолчанию
# является True.
run_current:
#    Количество тока (в амперах RMS), используемого драйвером во время
#    движения шаговика. Этот параметр должен быть предоставлен.
#sense_resistor:
#    Сопротивление (в омах) резистора чувства двигателя. Этот
#    параметр должен быть указан.
#idle_current_percent: 100
#    Процент от тока работы, на который будет опускаться драйвер шагового двигателя.
#    снижаться, когда истечет таймаут холостого хода (необходимо настроить
#    таймаут с помощью секции конфигурации [idle_timeout]). Ток будет
#    будет снова повышен, как только шаговый механизм снова начнет двигаться. Убедитесь, что
#    установить достаточно высокое значение, чтобы шаговики не потеряли
#    свое положение. Существует также небольшая задержка, пока ток
#    снова увеличится, так что учитывайте это при командовании быстрыми движениями
#    во время холостого хода шагового механизма. По умолчанию установлено значение 100 (без уменьшения).
#driver_TBL: 2
#driver_RNDTF: 0
#driver_HDEC: 0
#driver_CHM: 0
#driver_HEND: 3
#driver_HSTRT: 3
#driver_TOFF: 4
#driver_SEIMIN: 0
#driver_SEDN: 0
#driver_SEMAX: 0
#driver_SEUP: 0
#driver_SEMIN: 0
#driver_SFILT: 0
#driver_SGT: 0
#driver_SLPH: 0
#driver_SLPL: 0
#driver_DISS2G: 0
#driver_TS2G: 3
#    Установите данный параметр во время конфигурирования микросхемы TMC2660
#    чипа. Это может быть использовано для установки пользовательских параметров драйвера. На
#    значения по умолчанию для каждого параметра находятся рядом с его именем в
#    списке выше. О том, что делает каждый параметр, смотрите в техническом описании TMC2660.
#    и ограничения на комбинации параметров. Будьте
#    особенно внимательны к регистру CHOPCONF, где установка CHM в
#    либо в ноль, либо в единицу приведет к изменению схемы (первый бит
#    HDEC) интерпретируется как MSB HSTRT в этом случае).
```

### [tmc2240]

Конфигурирование драйвера шагового двигателя TMC2240 через шину SPI или UART. Чтобы использовать эту функцию, определите секцию конфигурации с префиксом "tmc2240", за которым следует имя соответствующей секции конфигурации шагового двигателя (например, "[tmc2240 stepper_x]").

```
[tmc2240 stepper_x]
cs_pin:
#    Вывод, соответствующий линии выбора микросхемы TMC2240. Этот вывод
#    будет установлен в низкий уровень при запуске SPI-сообщений и поднят в высокий уровень
#    после завершения сообщения. Этот параметр должен быть указан.
#spi_speed:
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
#uart_pin:
#    Вывод, подключенный к линии TMC2240 DIAG1/SW. Если этот параметр
#    указан, то используется связь UART, а не SPI.
#chain_position:
#chain_length:
#    Эти параметры конфигурируют последовательную цепочку SPI. Два параметра
#    определяют позицию шаговика в цепи и общую длину цепи.
#    Позиция 1 соответствует шаговику, который подключается к сигналу MOSI.
#    По умолчанию SPI-цепочка не используется.
#interpolate: True
#    Если true, включите интерполяцию шагов (драйвер будет внутренне
#    шагать с частотой 256 микрошагов). По умолчанию установлено значение True.
run_current:
#    Величина тока (в амперах RMS) для настройки драйвера на использование
#    во время шагового движения. Этот параметр должен быть предоставлен.
#hold_current:
#    Величина тока (в амперах RMS) для настройки драйвера на использование.
#    когда шаговик не движется. Установка параметра hold_current не
#    рекомендуется (подробности см. в TMC_Drivers.md). По умолчанию
#    не уменьшать ток.
#rref: 12000
#    Сопротивление (в омах) резистора между IREF и GND. По адресу
#    по умолчанию - 12000.
#stealthchop_threshold: 0
#    Скорость (в мм/с), на которую устанавливается порог "stealthChop". Когда
#    установлен, режим "stealthChop" будет включен, если скорость шагового двигателя
#    скорость ниже этого значения. По умолчанию установлено значение 0, которое отключает
#    режим "stealthChop".
#coolstep_threshold:
#    Скорость (в мм/с) для установки внутреннего "CoolStep" драйвера TMC.
#    порог. Если установлено, функция "Coolstep" будет включена, когда
#    скорость шагового двигателя близка к этому значению или превышает его. Важно
#    - если установлен порог coolstep_threshold и используется "бессенсорное наведение",
#    то необходимо убедиться, что скорость самонаведения выше порога coolstep
#    порога! По умолчанию функция coolstep не включена.
#high_velocity_threshold:
#    Скорость (в мм/с) для установки внутреннего "высокого порога" драйвера TMC
#    порог высокой скорости" (THIGH). Обычно это используется для отключения
#    функции "CoolStep" на высоких скоростях. По умолчанию не устанавливается
#    порог "высокой скорости" TMC.
#driver_MSLUT0: 2863314260
#driver_MSLUT1: 1251300522
#driver_MSLUT2: 608774441
#driver_MSLUT3: 269500962
#driver_MSLUT4: 4227858431
#driver_MSLUT5: 3048961917
#driver_MSLUT6: 1227445590
#driver_MSLUT7: 4211234
#driver_W0: 2
#driver_W1: 1
#driver_W2: 1
#driver_W3: 1
#driver_X1: 128
#driver_X2: 255
#driver_X3: 255
#driver_START_SIN: 0
#driver_START_SIN90: 247
#driver_OFFSET_SIN90: 0
#    Эти поля управляют регистрами таблицы микрошагов напрямую. Оптимальная
#    волновая таблица специфична для каждого двигателя и может меняться в зависимости от тока. На
#    оптимальная конфигурация будет иметь минимальные артефакты печати, вызванные
#    нелинейным движением шагового двигателя. Значения, указанные выше, являются значениями по умолчанию
#    значения, используемые драйвером. Значение должно быть указано в виде целого десятичного числа
#    (шестнадцатеричная форма не поддерживается). Для вычисления полей волновой таблицы,
#    смотрите "Расчетную таблицу" tmc2130 с сайта Trinamic.
#    Кроме того, в этом драйвере есть поле OFFSET_SIN90, которое может быть использовано
#    для настройки двигателя с несбалансированными катушками. См. раздел ``Таблица поиска синусоидальных волн``
#    раздел в техническом описании для получения информации об этом поле и о том, как его настроить.
#    его.
#driver_MULTISTEP_FILT: True
#driver_IHOLDDELAY: 6
#driver_IRUNDELAY: 4
#driver_TPOWERDOWN: 10
#driver_TBL: 2
#driver_TOFF: 3
#driver_HEND: 2
#driver_HSTRT: 5
#driver_FD3: 0
#driver_TPFD: 4
#driver_CHM: 0
#driver_VHIGHFS: 0
#driver_VHIGHCHM: 0
#driver_DISS2G: 0
#driver_DISS2VS: 0
#driver_PWM_AUTOSCALE: True
#driver_PWM_AUTOGRAD: True
#driver_PWM_FREQ: 0
#driver_FREEWHEEL: 0
#driver_PWM_GRAD: 0
#driver_PWM_OFS: 29
#driver_PWM_REG: 4
#driver_PWM_LIM: 12
#driver_SGT: 0
#driver_SEMIN: 0
#driver_SEUP: 0
#driver_SEMAX: 0
#driver_SEDN: 0
#driver_SEIMIN: 0
#driver_SFILT: 0
#driver_SG4_ANGLE_OFFSET: 1
#    Установите данный регистр во время конфигурирования микросхемы TMC2240
#    чипа. Это может быть использовано для установки пользовательских параметров двигателя. На
#    значения по умолчанию для каждого параметра находятся рядом с именем параметра в
#    вышеприведенном списке.
#diag0_pin:
#diag1_pin:
#    вывод микроконтроллера, подключенный к одной из линий DIAG микросхемы
#    микросхемы TMC2240. Следует указывать только один вывод diag. Контакт
#    является "активным низким" и поэтому обычно предваряется символом "^!". Установка
#    это создает виртуальный пин "tmc2240_stepper_x:virtual_endstop"
#    который может быть использован в качестве контакта endstop_pin шагового механизма. Это позволяет
#    "бессенсорное наведение". (Не забудьте также установить для параметра driver_SGT
#    соответствующее значение чувствительности). По умолчанию не включается
#    бессенсорное наведение.
```

### [tmc5160]

Конфигурирование драйвера шагового двигателя TMC5160 через шину SPI. Чтобы использовать эту функцию, определите секцию конфигурации с префиксом "tmc5160", за которым следует имя соответствующей секции конфигурации шагового двигателя (например, "[tmc5160 stepper_x]").

```
[tmc5160 stepper_x]
cs_pin:
#    Вывод, соответствующий линии выбора микросхемы TMC5160. Этот вывод
#    будет установлен в низкий уровень в начале SPI-сообщений и поднят в высокий уровень
#    после завершения сообщения. Этот параметр должен быть указан.
#spi_speed:
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
#chain_position:
#chain_length:
#    Эти параметры конфигурируют последовательную цепочку SPI. Два параметра
#    определяют позицию шаговика в цепи и общую длину цепи.
#    Позиция 1 соответствует шаговику, который подключается к сигналу MOSI.
#    По умолчанию SPI-цепочка не используется.
#interpolate: True
#    Если true, включите интерполяцию шагов (драйвер будет внутренне
#    шагать с частотой 256 микрошагов). По умолчанию установлено значение True.
run_current:
#    Величина тока (в амперах RMS) для настройки драйвера на использование
#    во время шагового движения. Этот параметр должен быть предоставлен.
#hold_current:
#    Величина тока (в амперах RMS) для настройки драйвера на использование.
#    когда шаговик не движется. Установка параметра hold_current не
#    рекомендуется (подробности см. в TMC_Drivers.md). По умолчанию
#    не уменьшать ток.
#sense_resistor: 0.075
#    Сопротивление (в омах) резистора чувства двигателя. По умолчанию
#    является 0,075 Ом.
#stealthchop_threshold: 0
#    Скорость (в мм/с), на которую устанавливается порог "stealthChop". Когда
#    установлен, режим "stealthChop" будет включен, если скорость шагового двигателя
#    скорость ниже этого значения. По умолчанию установлено значение 0, которое отключает
#    режим "stealthChop".
#coolstep_threshold:
#    Скорость (в мм/с) для установки внутреннего "CoolStep" драйвера TMC.
#    порог. Если установлено, функция "Coolstep" будет включена, когда
#    скорость шагового двигателя близка к этому значению или превышает его. Важно
#    - если установлен порог coolstep_threshold и используется "бессенсорное наведение",
#    то необходимо убедиться, что скорость самонаведения выше порога coolstep
#    порога! По умолчанию функция coolstep не включена.
#high_velocity_threshold:
#    Скорость (в мм/с) для установки внутреннего "высокого порога" драйвера TMC
#    порог высокой скорости" (THIGH). Обычно это используется для отключения
#    функции "CoolStep" на высоких скоростях. По умолчанию не устанавливается
#    порог "высокой скорости" TMC.
#driver_MSLUT0: 2863314260
#driver_MSLUT1: 1251300522
#driver_MSLUT2: 608774441
#driver_MSLUT3: 269500962
#driver_MSLUT4: 4227858431
#driver_MSLUT5: 3048961917
#driver_MSLUT6: 1227445590
#driver_MSLUT7: 4211234
#driver_W0: 2
#driver_W1: 1
#driver_W2: 1
#driver_W3: 1
#driver_X1: 128
#driver_X2: 255
#driver_X3: 255
#driver_START_SIN: 0
#driver_START_SIN90: 247
#    Эти поля управляют регистрами таблицы микрошагов напрямую. Оптимальная
#    волновая таблица специфична для каждого двигателя и может меняться в зависимости от тока. На
#    оптимальная конфигурация будет иметь минимальные артефакты печати, вызванные
#    нелинейным движением шагового двигателя. Значения, указанные выше, являются значениями по умолчанию
#    значения, используемые драйвером. Значение должно быть указано в виде целого десятичного числа
#    (шестнадцатеричная форма не поддерживается). Для вычисления полей волновой таблицы,
#    смотрите "Расчетную таблицу" tmc2130 с сайта Trinamic.
#driver_MULTISTEP_FILT: True
#driver_IHOLDDELAY: 6
#driver_TPOWERDOWN: 10
#driver_TBL: 2
#driver_TOFF: 3
#driver_HEND: 2
#driver_HSTRT: 5
#driver_FD3: 0
#driver_TPFD: 4
#driver_CHM: 0
#driver_VHIGHFS: 0
#driver_VHIGHCHM: 0
#driver_DISS2G: 0
#driver_DISS2VS: 0
#driver_PWM_AUTOSCALE: True
#driver_PWM_AUTOGRAD: True
#driver_PWM_FREQ: 0
#driver_FREEWHEEL: 0
#driver_PWM_GRAD: 0
#driver_PWM_OFS: 30
#driver_PWM_REG: 4
#driver_PWM_LIM: 12
#driver_SGT: 0
#driver_SEMIN: 0
#driver_SEUP: 0
#driver_SEMAX: 0
#driver_SEDN: 0
#driver_SEIMIN: 0
#driver_SFILT: 0
#driver_DRVSTRENGTH: 0
#driver_BBMCLKS: 4
#driver_BBMTIME: 0
#driver_FILT_ISENSE: 0
#    Установите данный регистр во время конфигурирования микросхемы TMC5160
#    микросхемы. Это может быть использовано для установки пользовательских параметров двигателя. На
#    значения по умолчанию для каждого параметра находятся рядом с названием параметра в
#    вышеприведенном списке.
#diag0_pin:
#diag1_pin:
#    вывод микроконтроллера, подключенный к одной из линий DIAG микросхемы
#    микросхемы TMC5160. Следует указывать только один вывод diag. Контакт
#    является "активным низким" и поэтому обычно предваряется символом "^!". Установка
#    это создает виртуальный пин "tmc5160_stepper_x:virtual_endstop"
#    который может быть использован в качестве контакта endstop_pin шагового механизма. Это позволяет
#    "бессенсорное наведение". (Не забудьте также установить для параметра driver_SGT
#    соответствующее значение чувствительности). По умолчанию не включается
#    бессенсорное наведение.
```

## Конфигурация тока шагового двигателя во время работы

### [ad5206]

Статически сконфигурированные дигипоты AD5206, подключенные через шину SPI (можно задать любое количество секций с префиксом "ad5206").

```
[ad5206 my_digipot]
enable_pin:
#    Вывод, соответствующий линии выбора микросхемы AD5206. Этот вывод
#    будет установлен в низкий уровень при запуске SPI-сообщений и поднят в высокий уровень
#    после завершения сообщения. Этот параметр должен быть указан.
#spi_speed:
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
#channel_1:
#channel_2:
#channel_3:
#channel_4:
#channel_5:
#channel_6:
#    Значение, на которое статически устанавливается данный канал AD5206. Это
#    обычно задается числом от 0.0 до 1.0, причем 1.0 - это самое
#    наибольшее сопротивление, а 0.0 - наименьшее. Однако,
#    диапазон может быть изменен с помощью параметра 'scale' (см. ниже).
#    Если канал не указан, то он остается неконфигурированным.
#scale:
#    Этот параметр можно использовать для изменения того, как параметры 'channel_x'
#    интерпретируются. Если он указан, то параметры 'channel_x'
#    должны находиться в диапазоне от 0,0 до 'scale'. Это может быть полезно, когда
#    AD5206 используется для установки опорного напряжения шагового управления. Значение 'scale' может
#    быть установлен на эквивалентную силу тока шагового двигателя, если бы AD5206 был на
#    максимальном сопротивлении, а затем параметры 'channel_x' могут быть
#    задаются с помощью желаемого значения силы тока для шаговика. На сайте
#    по умолчанию параметры 'channel_x' не масштабируются.
```

### [mcp4451]

Статически сконфигурированный дигипот MCP4451, подключенный по шине I2C (можно задать любое количество секций с префиксом "mcp4451").

```
[mcp4451 my_digipot]
i2c_address:
#    Адрес i2c, который микросхема использует на шине i2c. Этот
#    параметр должен быть предоставлен.
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
#wiper_0:
#wiper_1:
#wiper_2:
#wiper_3:
#    Значение, на которое статически устанавливается данный "дворник" MCP4451. Это
#    обычно устанавливается в число от 0.0 до 1.0, причем 1.0 - это
#    наибольшее сопротивление, а 0.0 - наименьшее. Однако,
#    диапазон может быть изменен с помощью параметра 'scale' (см. ниже).
#    Если стеклоочиститель не указан, то он остается ненастроенным.
#scale:
#    Этот параметр можно использовать для изменения того, как параметры 'wiper_x'
#    интерпретируются. Если он задан, то параметры 'wiper_x' должны
#    находиться в диапазоне от 0.0 до 'scale'. Это может быть полезно, когда MCP4451
#    используется для установки опорных значений шагового напряжения. Параметр 'scale' может быть установлен в значение
#    эквивалентную силу тока шагового двигателя, если бы MCP4451 имел максимальное
#    сопротивление, а затем параметры 'wiper_x' могут быть заданы
#    используя желаемое значение силы тока для шагового двигателя. По умолчанию
#    не масштабировать параметры 'wiper_x'.
```

### [mcp4728]

Статически сконфигурированный цифро-аналоговый преобразователь MCP4728, подключенный по шине I2C (можно задать любое количество секций с префиксом "mcp4728").

```
[mcp4728 my_dac]
#i2c_address: 96
#    Адрес i2c, который чип использует на шине i2c. По умолчанию
#    96.
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
#channel_a:
#channel_b:
#channel_c:
#channel_d:
#    Значение, на которое статически устанавливается данный канал MCP4728. Это
#    обычно устанавливается в число от 0.0 до 1.0, причем 1.0 - это
#    самое высокое напряжение (2,048 В) и 0,0 - самое низкое напряжение.
#    Однако диапазон может быть изменен с помощью параметра 'scale' (см.
#    ниже). Если канал не указан, то он остается
#    ненастроенным.
#scale:
#    Этот параметр можно использовать для изменения того, как параметры 'channel_x'
#    интерпретируются. Если он указан, то параметры 'channel_x'
#    должны находиться в диапазоне от 0,0 до 'scale'. Это может быть полезно, когда
#    MCP4728 используется для установки опорного напряжения шагового управления. Значение 'scale' может
#    быть установлен на эквивалентный ампераж шагового двигателя, если бы MCP4728 был на
#    максимальном напряжении (2,048 В), а затем параметры 'channel_x'
#    можно задать, используя желаемое значение силы тока для
#    шаговика. По умолчанию параметры 'channel_x' не масштабируются.
```

### [mcp4018]

Статически сконфигурированный дигипот MCP4018, подключенный через два gpio "bit banging" пина (можно задать любое количество секций с префиксом "mcp4018").

```
[mcp4018 my_digipot]
scl_pin:
#    Вывод "тактового" сигнала SCL. Этот параметр должен быть указан.
sda_pin:
#    Вывод SDA "данные". Этот параметр должен быть указан.
wiper:
#    Значение, на которое статически устанавливается данный "дворник" MCP4018. Это
#    обычно устанавливается в число от 0.0 до 1.0, причем 1.0 - это самое
#    наибольшее сопротивление, а 0.0 - наименьшее. Однако,
#    диапазон может быть изменен с помощью параметра 'scale' (см. ниже).
#    Этот параметр должен быть указан.
#scale:
#    Этот параметр можно использовать для изменения того, как будет интерпретироваться параметр 'wiper'
#    интерпретации. Если он указан, то параметр 'wiper' должен находиться
#    между 0,0 и 'scale'. Это может быть полезно, когда MCP4018
#    используется для установки опорных значений шагового напряжения. Параметр 'scale' может быть установлен в значение
#    эквивалентную силу тока шагового двигателя, если MCP4018 имеет максимальное
#    сопротивление, а затем параметр 'wiper' может быть задан с помощью
#    желаемое значение силы тока для шаговика. По умолчанию
#    масштабирование параметра 'wiper'.
```

## Поддержка дисплея

### [display]

Поддержка дисплея, подключенного к микроконтроллеру.

```
[display]
lcd_type:
#    Тип используемого ЖК-чипа. Это может быть "hd44780", "hd44780_spi",
#    "st7920", "emulated_st7920", "uc1701", "ssd1306" или "sh1106".
#    Информацию о каждом типе и # дополнительных параметрах, которые они предоставляют, см. в разделах о дисплеях ниже.
#    дополнительных параметрах, которые они предоставляют. Этот параметр должен быть
#    предоставлен.
#display_group:
#    Имя группы отображаемых_данных для отображения на дисплее. Этот
#    управляет содержимым экрана (см. раздел "display_data"
#    для получения дополнительной информации). По умолчанию используется _default_20x4 для hd44780
#    дисплеев и _default_16x4 для других дисплеев.
#menu_timeout:
#    Таймаут для меню. Неактивность в течение этого количества секунд
#    вызовет выход из меню или возврат в корневое меню при включенном автозапуске
#    включен. По умолчанию 0 секунд (отключено)
#menu_root:
#    Имя раздела главного меню, который будет отображаться при нажатии на энкодер
#    на главном экране. По умолчанию это __main, и оно показывает
#    меню по умолчанию, как определено в klippy/extras/display/menu.cfg
#menu_reverse_navigation:
#    Когда включено, это изменит направления вверх и вниз для списка
#    навигации. По умолчанию стоит False. Этот параметр необязателен.
#encoder_pins:
#    Пины, подключенные к энкодеру. Необходимо указать 2 контакта при использовании
#    энкодера. Этот параметр должен быть указан при использовании меню.
#encoder_steps_per_detent:
#    Количество шагов, которое энкодер делает за одно нажатие ("клик"). Если
#    кодеру требуется два шага для перемещения между позициями или он перемещает две
#    записи с одной остановки, попробуйте изменить это значение. Допустимые значения: 2
#    (полушаг) или 4 (полный шаг). По умолчанию установлено значение 4.
#click_pin:
#    Контакт, подключенный к кнопке 'enter' или энкодеру 'click'. Этот
#    параметр должен быть указан при использовании меню. Наличие
#    параметра конфигурации 'analog_range_click_pin' превращает этот параметр
#    из цифрового в аналоговый.
#back_pin:
#    Контакт, подключенный к кнопке "назад". Этот параметр необязателен,
#    меню может использоваться без него. Наличие
#    конфигурационного параметра 'analog_range_back_pin' превращает этот параметр из
#    цифрового в аналоговый.
#up_pin:
#    Контакт, подключенный к кнопке "вверх". Этот параметр должен быть указан
#    при использовании меню без энкодера. Наличие
#    параметра конфигурации 'analog_range_up_pin' превращает этот параметр из
#    цифрового в аналоговый.
#down_pin:
#    Контакт, подключенный к кнопке "вниз". Этот параметр должен быть
#    при использовании меню без энкодера. Наличие
#    параметра конфигурации 'analog_range_down_pin' превращает этот параметр из
#    цифрового в аналоговый.
#kill_pin:
#    Контакт, подключенный к кнопке 'kill'. Эта кнопка будет вызывать
#    аварийный останов. Наличие конфигурации 'analog_range_kill_pin'
#    параметра превращает этот параметр из цифрового в аналоговый.
#    аналоговый_подтягивающий_резистор: 4700
#    Сопротивление (в омах) подтягивающего резистора, подключенного к аналоговой
#    кнопке. По умолчанию 4700 Ом.
#analog_range_click_pin:
#    Диапазон сопротивления для кнопки "ввод". Минимальное и
#    максимальные значения, разделенные запятыми, должны быть указаны при использовании аналоговой
#    кнопки.
#analog_range_back_pin:
#    Диапазон сопротивления для кнопки "назад". Минимальное и
#    максимальные значения, разделенные запятыми, должны быть указаны при использовании аналоговой
#    кнопки.
#analog_range_up_pin:
#    Диапазон сопротивления для кнопки "вверх". Минимальное и максимальное значения диапазона
#    должны быть указаны через запятую при использовании аналоговой кнопки.
#analog_range_down_pin:
#    Диапазон сопротивления для кнопки "вниз". Минимальное и
#    максимальные значения, разделенные запятыми, должны быть указаны при использовании аналоговой
#    кнопки.
#analog_range_kill_pin:
#    Диапазон сопротивления для кнопки "убить". Минимальное и
#    максимальные значения, разделенные запятыми, должны быть указаны при использовании аналоговой
#    кнопки.
```

#### дисплей hd44780

Информация о настройке дисплеев hd44780 (используется в дисплеях типа "RepRapDiscount 2004 Smart Controller").

```
[дисплей]
lcd_type: hd44780
#    Установите значение "hd44780" для дисплеев hd44780.
rs_pin:
e_pin:
d4_pin:
d5_pin:
d6_pin:
d7_pin:
#    Пины, подключенные к ЖК-дисплею типа hd44780. Эти параметры должны
#    быть предоставлены.
#hd44780_protocol_init: True
#    Выполняет инициализацию 8-битного/4-битного протокола на дисплее hd44780.
#    Это необходимо на реальных устройствах hd44780. Однако может потребоваться
#    отключить это на некоторых "клонированных" устройствах. По умолчанию установлено значение True.
#line_length:
#    Устанавливает количество символов в строке для lcd типа hd44780.
#    Возможные значения: 20 (по умолчанию) и 16. Количество строк
#    фиксировано на 4.
...
```

#### hd44780_spi display

Информация о настройке дисплея hd44780_spi - дисплея 20x04, управляемого через аппаратный "сдвиговый регистр" (который используется в принтерах на базе mightyboard).

```
[display]
lcd_type: hd44780_spi
#    Установите значение "hd44780_spi" для дисплеев hd44780_spi.
latch_pin:
spi_software_sclk_pin:
spi_software_mosi_pin:
spi_software_miso_pin:
#    Пины, подключенные к сдвиговому регистру, управляющему дисплеем.
#    Вывод spi_software_miso_pin должен быть установлен на неиспользуемый вывод
#    основной платы принтера, поскольку сдвиговый регистр не имеет вывода MISO,
#    но программная реализация spi требует, чтобы этот вывод был
#    сконфигурирован.
#hd44780_protocol_init: True
#    Выполняет инициализацию 8-битного/4-битного протокола на дисплее hd44780.
#    Это необходимо на реальных устройствах hd44780. Однако может потребоваться
#    отключить это на некоторых "клонированных" устройствах. По умолчанию установлено значение True.
#line_length:
#    Устанавливает количество символов в строке для lcd типа hd44780.
#    Возможные значения: 20 (по умолчанию) и 16. Количество строк
#    фиксировано на 4.
...
```

#### дисплей st7920

Информация о настройке дисплеев st7920 (используется в дисплеях типа "RepRapDiscount 12864 Full Graphic Smart Controller").

```
[дисплей]
lcd_type: st7920
#    Установите значение "st7920" для дисплеев st7920.
cs_pin:
sclk_pin:
sid_pin:
#    Выводы, подключаемые к ЖК-дисплею типа st7920. Эти параметры должны быть
#    предоставлены.
...
```

#### emulated_st7920 display

Информация о настройке эмулированного дисплея st7920 - встречается в некоторых "2,4-дюймовых устройствах с сенсорным экраном" и им подобных.

```
[display]
lcd_type: emulated_st7920
#    Установите значение "emulated_st7920" для дисплеев emulated_st7920.
en_pin:
spi_software_sclk_pin:
spi_software_mosi_pin:
spi_software_miso_pin:
#    Пины, подключенные к ЖК-дисплею типа emulated_st7920. Вывод en_pin
#    соответствует cs_pin ЖК-дисплея типа st7920,
#    spi_software_sclk_pin соответствует sclk_pin и
#    spi_software_mosi_pin соответствует sid_pin. На сайте
#    spi_software_miso_pin должен быть установлен на неиспользуемый контакт
#    основной платы принтера, поскольку у st7920 нет вывода MISO, но программная
#    реализация spi требует, чтобы этот вывод был настроен.
...
```

#### uc1701 дисплей

Информация о настройке дисплеев uc1701 (который используется в дисплеях типа "MKS Mini 12864").

```
[дисплей]
lcd_type: uc1701
#    Установите значение "uc1701" для дисплеев uc1701.
cs_pin:
a0_pin:
#    Выводы, подключенные к дисплею типа uc1701. Эти параметры должны быть
#    предоставлены.
#rst_pin:
#    Контакт, подключенный к контакту "rst" на ЖК-дисплее. Если он не указан.
#    указан, то аппаратное обеспечение должно иметь подтяжку на
#    соответствующей линии ЖК-дисплея.
#contrast:
#    Устанавливаемый контраст. Значение может варьироваться от 0 до 63, а по
#    по умолчанию - 40.
...
```

#### ssd1306 и sh1106 дисплеи

Информация о настройке дисплеев ssd1306 и sh1106.

```
[display]
lcd_type:
#    Установите значение "ssd1306" или "sh1106" для данного типа дисплея.
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    Дополнительные параметры, доступные для дисплеев, подключенных через шину i2c.
#    шиной. См. раздел "Общие настройки I2C" для описания
#    вышеуказанных параметров.
#cs_pin:
#dc_pin:
#spi_speed:
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    Пины, подключенные к lcd в режиме "4-wire" spi. См.
#    "Общие настройки SPI" для описания параметров.
#    которые начинаются с "spi_". По умолчанию используется режим i2c для
#    дисплея.
#reset_pin:
#    На дисплее может быть указан вывод сброса. Если он не указан.
#    указан, то аппаратное обеспечение должно иметь подтяжку на
#    соответствующей линии ЖК-дисплея.
#contrast:
#    Устанавливаемый контраст. Значение может варьироваться от 0 до 256, а по
#    по умолчанию - 239.
#vcomh: 0
#    Установка значения Vcomh на дисплее. Это значение связано с
#    эффектом "размазывания" на некоторых OLED-дисплеях. Значение может варьироваться
#    от 0 до 63. По умолчанию 0.
#invert: False
#    TRUE инвертирует пиксели на некоторых OLED-дисплеях.  По умолчанию
#    False.
#x_offset: 0
#    Установка значения горизонтального смещения на дисплеях SH1106. По умолчанию
#    0.
...
```

### [display_data]

Поддержка отображения пользовательских данных на ЖК-дисплее. Можно создать любое количество групп отображения и любое количество элементов данных в этих группах. На экране будут отображаться все элементы данных для данной группы, если параметр display_group в секции [display] установлен на имя данной группы.

Автоматически создается [набор групп отображения по умолчанию](.../klippy/extras/display/display.cfg). Можно заменить или расширить эти элементы display_data, переопределив значения по умолчанию в основном файле конфигурации printer.cfg.

```
[display_data my_group_name my_data_name]
позиция:
#    Через запятую строки и столбцы позиции отображения, которая должна
#    использоваться для отображения информации. Этот параметр должен быть
#    предоставлен.
text:
#    Текст для отображения в данной позиции. Это поле оценивается
#    с помощью шаблонов команд (см. docs/Command_Templates.md). Этот
#    параметр должен быть указан.
```

### [display_template]

Текстовые "макросы" отображения данных (можно определить любое количество секций с префиксом display_template). Информацию об оценке шаблонов см. в документе [Шаблоны команд](Command_Templates.md).

Эта возможность позволяет сократить количество повторяющихся определений в секциях display_data. Для оценки шаблона в секциях display_data можно использовать встроенную функцию `render()`. Например, если определить `[display_template my_template]`, то можно использовать `{ render('my_template')}` в секции display_data.

Эта функция также может быть использована для непрерывного обновления светодиодов с помощью команды [SET_LED_TEMPLATE](G-Codes.md#set_led_template).

```
[display_template my_template_name]
#param_<имя>:
#    Можно указать любое количество опций с префиксом "param_". .
#    заданному имени будет присвоено заданное значение (разобранное как Python
#    литерал) и будет доступно при расширении макроса. Если
#    параметр передан в вызове render(), то это значение будет
#    будет использоваться при расширении макроса. Например, конфигурация с
#    "param_speed = 75" может иметь вызывающую функцию с
#    "render('my_template_name', param_speed=80)". Имена параметров могут
#    не использовать символы верхнего регистра.
text:
#    Текст, возвращаемый при рендеринге этого шаблона. Это поле
#    оценивается с помощью шаблонов команд (см.
#    docs/Command_Templates.md). Этот параметр должен быть указан.
```

### [display_glyph]

Отображает пользовательский глиф на дисплеях, которые его поддерживают. Заданное имя будет присвоено данным дисплея, на которые затем можно ссылаться в шаблонах дисплеев по их имени, окруженному двумя символами "тильда", т.е. `~my_display_glyph~`

Примеры смотрите в [sample-glyphs.cfg](../config/sample-glyphs.cfg).

```
[display_glyph my_display_glyph]
#data:
#    Данные дисплея, хранящиеся в виде 16 строк, состоящих из 16 битов (1 на
#    пиксель), где '.' - пустой пиксель, а '*' - включенный пиксель (например,
#    "****************" для отображения сплошной горизонтальной линии).
#    В качестве альтернативы можно использовать '0' для пустого пикселя и '1' для включенного
#    пикселя. Поместите каждую строку отображения в отдельную строку конфигурации. Глиф
#    глиф должен состоять ровно из 16 строк с 16 битами каждая. Этот
#    параметр является необязательным.
#hd44780_data:
#    Глиф для использования на дисплеях 20x4 hd44780. Глиф должен состоять из.
#    ровно 8 строк с 5 битами в каждой. Этот параметр необязателен.
#hd44780_slot:
#    Аппаратный индекс hd44780 (0..7) для хранения глифа. Если
#    несколько разных изображений используют один и тот же слот, то убедитесь, что только
#    использовать только одно из этих изображений на любом экране. Этот параметр
#    требуется, если указан параметр hd44780_data.
```

### [display my_extra_display]

Если в файле printer.cfg определена основная секция [display], как показано выше, можно определить несколько вспомогательных дисплеев. Обратите внимание, что вспомогательные дисплеи в настоящее время не поддерживают функциональность меню, поэтому они не поддерживают опции "меню" или конфигурацию кнопок.

```
[display my_extra_display]
# Доступные параметры см. в разделе "Дисплей".
```

### [меню]

Настраиваемые меню ЖК-дисплея.

Автоматически создается [набор меню по умолчанию](.../klippy/extras/display/menu.cfg). Можно заменить или расширить меню, переопределив значения по умолчанию в основном файле конфигурации printer.cfg.

Информацию об атрибутах меню, доступных при отрисовке шаблона, см. в документе [Шаблоны команд](Command_Templates.md#menu-templates).

```
# Общие параметры, доступные для всех разделов конфигурации меню.
#[menu __some_list __some_name]
#type: disabled
#   Постоянно отключенный элемент меню, единственный обязательный атрибут - 'type'.
#   Позволяет легко отключать/скрывать существующие пункты меню.

#[menu some_name]
#type:
#   Один из команд, ввод, список, текст:
#       command - базовый элемент меню с различными скриптовыми триггерами
#        input    - то же самое, что и 'command', но с возможностью изменения значения.
#                  нажатие запускает/останавливает режим редактирования.
#        список     - позволяет группировать пункты меню в
#                  прокручиваемый список.  Пополняйте список, создавая меню
#                  конфигурации, используя "some_list" в качестве префикса - для
#                  например: [menu some_list some_item_in_the_list]
#       vsdlist - то же самое, что и 'list', но добавляет файлы с виртуальной sdcard
#                 (в будущем будет удален)
#name:
#   Имя пункта меню - оценивается как шаблон.
#enable:
#   Шаблон, который оценивается как True или False.
#index:
#   Позиция, на которую нужно вставить пункт в списке. По умолчанию
#   элемент добавляется в конец.

#[menu some_list]
#type: list
#name:
#enable:
#   Описание этих параметров см. выше.

#[menu some_list some_command]
#type: command
#name:
#enable:
#   Описание этих параметров см. выше.
#gcode:
#   Сценарий для запуска при нажатии кнопки или длительном нажатии. Оценивается как
#  шаблон.

#[menu some_list some_input]
#type: input
#name:
#enable:
#   Описание этих параметров см. выше.
#input:
#   Начальное значение для использования при редактировании - оценивается как шаблон.
#   Результат должен быть float.
#input_min:
#   Минимальное значение диапазона - оценивается как шаблон. По умолчанию -99999.
#input_max:
#   Максимальное значение диапазона - оценивается как шаблон. По умолчанию 99999.
#input_step:
#   Шаг редактирования - должно быть положительным целым числом или плавающей величиной. Имеет
#   внутренний быстрый шаг. Если "(input_max - input_min) /
#   input_step > 100", то быстрый шаг равен 10 * input_step, иначе быстрый шаг
#   шаг скорости равен input_step.
#realtime:
#   Этот атрибут принимает статическое булево значение. Если он включен, то
#   скрипт gcode запускается после каждого изменения значения. По умолчанию установлено значение False.
#gcode:
#   Скрипт для запуска при нажатии кнопки, длительном нажатии или изменении значения.
#   Оценивается как шаблон. Нажатие на кнопку запускает редактирование
#   начало или конец режима.
```

## Датчики нити

### [filament_switch_sensor]

Датчик переключения нити. Поддержка обнаружения вставки и выбега нити с помощью датчика-переключателя, например, концевого выключателя.

Дополнительную информацию см. в [справочнике команд](G-Codes.md#filament_switch_sensor).

```
[filament_switch_sensor my_sensor]
#pause_on_runout: True
#    Если установлено значение True, то пауза будет выполняться сразу же после выбега.
#    будет обнаружена. Обратите внимание, что если pause_on_runout равно False и
#    runout_gcode опущен, то обнаружение выбега будет отключено. По умолчанию
#    равно True.
#runout_gcode:
#    Список команд G-кода для выполнения после того, как будет
#    обнаружено. Формат G-кода см. в файле docs/Command_Templates.md. Если
#    pause_on_runout установлено значение True, этот G-код будет запущен после
#    PAUSE будет завершен. По умолчанию команды G-кода не запускаются.
#insert_gcode:
#    Список команд G-кода для выполнения после того, как вставка нити будет
#    обнаружена. Формат G-кода см. в файле docs/Command_Templates.md. По
#    по умолчанию - не выполнять никаких команд G-кода, что отключает обнаружение вставки
#    обнаружение.
#event_delay: 3.0
#    Минимальное количество времени в секундах для задержки между событиями.
#    События, сработавшие в течение этого периода времени, будут молча
#    игнорироваться. По умолчанию - 3 секунды.
#pause_delay: 0.5
#    Количество времени задержки в секундах между командой паузы
#    отправкой и выполнением runout_gcode. Может быть полезно
#    увеличить эту задержку, если OctoPrint демонстрирует странное поведение паузы.
#    По умолчанию 0,5 секунды.
#switch_pin:
#    Контакт, к которому подключен переключатель. Этот параметр должен быть
#    предоставлен.
```

### [filament_motion_sensor]

Датчик движения нити. Поддержка обнаружения вставки и выбега нити с помощью энкодера, который переключает выходной контакт во время движения нити через датчик.

Дополнительную информацию см. в [справочнике команд](G-Codes.md#filament_switch_sensor).

```
[filament_motion_sensor my_sensor]
detection_length: 7.0
#    Минимальная длина нити, протянутой через датчик, чтобы вызвать
#    изменение состояния на контакте switch_pin
#    По умолчанию 7 мм.
extruder:
#    Имя секции экструдера, с которой связан этот датчик.
#    Этот параметр должен быть указан.
switch_pin:
#pause_on_runout:
#runout_gcode:
#insert_gcode:
#event_delay:
#pause_delay:
#    Описание параметров см. в разделе "filament_switch_sensor".
#    вышеуказанных параметров.
```

### [tsl1401cl_filament_width_sensor]

Датчик ширины филамента на базе TSLl401CL. Дополнительную информацию см. в [руководстве](TSL1401CL_Filament_Width_Sensor.md).

```
[tsl1401cl_filament_width_sensor]
#pin:
#default_nominal_filament_diameter: 1.75 # (mm)
#    Максимально допустимая разница диаметров нитей в мм.
#max_difference: 0.2
#    Расстояние от датчика до плавильной камеры в мм.
#measurement_delay: 100
```

### [hall_filament_width_sensor]

Датчик ширины нити Холла (см. [Hall Filament Width Sensor](Hall_Filament_Width_Sensor.md)).

```
[hall_filament_width_sensor]
adc1:
adc2:
#    Контакты аналогового входа, подключенные к датчику. Эти параметры должны
#    быть предоставлены.
#cal_dia1: 1.50
#cal_dia2: 2.00
#    Калибровочные значения (в мм) для датчиков. По умолчанию
# 1.50 для cal_dia1 и 2.00 для cal_dia2.
#raw_dia1: 9500
#raw_dia2: 10500
#    Необработанные калибровочные значения для датчиков. По умолчанию 9500
#    для raw_dia1 и 10500 для raw_dia2.
#default_nominal_filament_diameter: 1.75
#    Номинальный диаметр нити. Этот параметр должен быть указан.
#max_difference: 0.200
#    Максимально допустимая разница в диаметре нити в миллиметрах (мм).
#    Если разница между номинальным диаметром нити и выходным сигналом датчика
#    превышает +- max_difference, множитель экструзии устанавливается обратно
#    до %100. По умолчанию 0.200.
#measurement_delay: 70
#    Расстояние от датчика до плавильной камеры/горячего конца в
#    миллиметрах (мм). Нить между датчиком и горячим концом
#    будет рассматриваться как диаметр_номинального_филамента_по_умолчанию. Хост
#    модуль работает с логикой FIFO. Он сохраняет каждое значение датчика и
#    положение в массиве и возвращает их в правильное положение. Этот
#    параметр должен быть предоставлен.
#enable: False
#    Датчик включается или выключается после включения питания. По умолчанию
#    disable.
#measurement_interval: 10
#    Приблизительное расстояние (в мм) между показаниями датчика. По
#    по умолчанию - 10 мм.
#logging: False
#    Вывод диаметра в терминал и klipper.log можно включить|отключить командой
#    командой.
#min_diameter: 1.0
#    Минимальный диаметр для срабатывания виртуального датчика filament_switch_sensor.
#use_current_dia_while_delay: False
#    Использовать текущий диаметр вместо номинального, пока
#    задержка измерения не закончилась.
#pause_on_runout:
#runout_gcode:
#insert_gcode:
#event_delay:
#pause_delay:
#    Описание параметров см. в разделе "filament_switch_sensor".
#    вышеуказанных параметров.
```

## Датчики нагрузки

### [load_cell]

Тензодатчик. Использует датчик ADC, подключенный к тензодатчику, для создания цифровой шкалы.

```
[load_cell]
тип_датчика:
#    Это должен быть один из поддерживаемых типов датчиков, см. ниже.
```

#### XH711

Это 24-битная микросхема с низкой частотой дискретизации, использующая "бит-банг" обмен данными. Он подходит для нитевидных весов.

```
[load_cell]
тип датчика: hx711
sclk_pin:
#    Контакт, подключенный к тактовой линии HX711. Этот параметр должен быть указан.
dout_pin:
#    Контакт, подключенный к линии вывода данных HX711. Этот параметр должен быть
#    предоставлен.
#gain: A-128
#    Допустимыми значениями для коэффициента усиления являются: A-128, A-64, B-32. По умолчанию используется значение A-128.
#    'A' обозначает входной канал, а число - коэффициент усиления. Только 3
#    перечисленных комбинаций поддерживаются микросхемой. Обратите внимание, что изменение коэффициента усиления
#    также выбирает считываемый канал.
#sample_rate: 80
#    Допустимые значения для sample_rate - 80 или 10. По умолчанию используется значение 80.
#    Это должно соответствовать схеме подключения микросхемы. Частота дискретизации не может быть изменена
#    в программном обеспечении.
```

#### HX717

Это версия HX711 с 4-кратным увеличением частоты дискретизации, подходящая для измерений.

```
[load_cell]
тип датчика: hx717
sclk_pin:
#    Контакт, подключенный к тактовой линии HX717. Этот параметр должен быть указан.
dout_pin:
#    Контакт, подключенный к линии вывода данных HX717. Этот параметр должен быть
#    предоставлен.
#gain: A-128
#    Допустимые значения коэффициента усиления: A-128, B-64, A-64, B-8.
#    'A' обозначает входной канал, а число - настройку усиления.
#    Микросхема поддерживает только 4 перечисленные комбинации. Обратите внимание, что
#    изменение настройки усиления также выбирает считываемый канал.
#sample_rate: 320
#    Допустимыми значениями для sample_rate являются: 10, 20, 80, 320. По умолчанию используется значение 320.
#    Это должно соответствовать схеме подключения микросхемы. Частота дискретизации не может быть изменена
#    в программном обеспечении.
```

#### ADS1220

ADS1220 - это 24-битный АЦП, поддерживающий частоту дискретизации до 2 КГц, настраиваемую программно.

```
[load_cell]
тип датчика: ads1220
cs_pin:
#    Контакт, подключенный к линии выбора микросхемы ADS1220. Этот параметр должен
#    быть предоставлен.
#spi_speed: 512000
#    Этот чип поддерживает 2 скорости: 256000 или 512000. Более высокая скорость
#    включается только при использовании одной из частот дискретизации Turbo. Правильная скорость spi_speed
#    выбирается в зависимости от частоты дискретизации.
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
data_ready_pin:
#    Контакт, подключенный к линии готовности данных ADS1220. Этот параметр должен быть
#    предоставлен.
#gain: 128
#    Допустимые значения коэффициента усиления: 128, 64, 32, 16, 8, 4, 2, 1.
#    По умолчанию 128
#sample_rate: 660
#    Этот чип поддерживает два диапазона частот дискретизации, Normal и Turbo. В турбо
#    режиме внутренние часы чипа c работают в два раза быстрее, а скорость передачи данных по SPI
#    скорость также удваивается.
#    Нормальная частота дискретизации: 20, 45, 90, 175, 330, 600, 1000
#    Турбо частота дискретизации: 40, 90, 180, 350, 660, 1200, 2000
#    По умолчанию - 660
```

## Поддержка аппаратного обеспечения для конкретной платы

### [sx1509]

Настройте расширитель SX1509 с I2C на GPIO. Из-за задержки, возникающей при обмене данными по протоколу I2C, вы не должны использовать выводы SX1509 в качестве выводов разрешения шага, шага или дир или любых других выводов, требующих быстрого перебора битов. Лучше всего использовать их в качестве статических или управляемых кодом цифровых выходов или аппаратных pwm-выводов для, например, вентиляторов. Можно определить любое количество секций с префиксом "sx1509". Каждый расширитель предоставляет набор из 16 выводов (sx1509_my_sx1509:PIN_0 - sx1509_my_sx1509:PIN_15), которые могут быть использованы в конфигурации принтера.

Пример смотрите в файле [generic-duet2-duex.cfg](../config/generic-duet2-duex.cfg).

```
[sx1509 my_sx1509]
i2c_address:
#    Адрес I2C, используемый этим расширителем. В зависимости от аппаратных
#    перемычек это один из следующих адресов: 62 63 112
#    113. Этот параметр должен быть указан.
#i2c_mcu:
#i2c_bus:
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#i2c_speed:
#    См. раздел "Общие настройки I2C" для описания
#    выше указанных параметров.
```

### [samd_sercom]

Конфигурация SAMD SERCOM, определяющая, какие контакты использовать на данном SERCOM. Можно определить любое количество секций с префиксом "samd_sercom". Каждый SERCOM должен быть сконфигурирован до использования его в качестве периферийного устройства SPI или I2C. Поместите эту секцию конфигурации выше любой другой секции, использующей шины SPI или I2C.

```
[samd_sercom my_sercom]
sercom:
#    Имя шины sercom для конфигурирования в микроконтроллере.
#    Доступные имена: "sercom0", "sercom1" и т. д. Этот параметр
#    должен быть указан.
tx_pin:
#    вывод MOSI для SPI-коммуникации, или вывод SDA (данные) для I2C
#    связи. Контакт должен иметь действительную конфигурацию pinmux
#    для данного периферийного устройства SERCOM. Этот параметр должен быть предоставлен.
#rx_pin:
#    вывод MISO для связи по SPI. Этот вывод не используется для I2C
#    связи (I2C использует tx_pin как для отправки, так и для приема).
#    Контакт должен иметь правильную конфигурацию pinmux для данного
#    периферийного устройства SERCOM. Этот параметр является необязательным.
clk_pin:
#    вывод CLK для SPI-коммуникации, или вывод SCL (тактовый генератор) для I2C
#    связи. Контакт должен иметь правильную конфигурацию pinmux
#    для данного периферийного устройства SERCOM. Этот параметр должен быть предоставлен.
```

### [adc_scaled]

Масштабирование аналоговых сигналов Duet2 Maestro по показаниям vref и vssa. Определение секции adc_scaled позволяет использовать виртуальные выводы adc (например, "my_name:PB0"), которые автоматически корректируются контрольными выводами vref и vssa платы. Обязательно определите эту секцию конфигурации выше всех секций конфигурации, которые используют один из этих виртуальных выводов.

Пример смотрите в файле [generic-duet2-maestro.cfg](../config/generic-duet2-maestro.cfg).

```
[adc_scaled my_name]
vref_pin:
#    Контакт АЦП, который будет использоваться для контроля VREF. Этот параметр должен быть
#    предоставлен.
vssa_pin:
#    Вывод АЦП, используемый для мониторинга VSSA. Этот параметр должен быть
#    предоставлен.
#smooth_time: 2.0
#    Значение времени (в секундах), в течение которого измерения vref и vssa
#    измерения будут сглажены, чтобы уменьшить влияние
#    шума. По умолчанию - 2 секунды.
```

### [реплика]

Поддержка репликации - см. руководство [beaglebone guide](Beaglebone.md) и файл [generic-replicape.cfg](../config/generic-replicape.cfg) для примера.

```
# Раздел конфигурации "replicape" добавляет "replicape:stepper_x_enable"
# виртуальные контакты разрешения шагов (для шагов X, Y, Z, E и H) и
# "replicape:power_x" выходные контакты ШИМ (для hotbed, e, h, fan0, fan1,
# fan2 и fan3), которые затем могут быть использованы в других местах конфигурационного файла.
[replicape].
ревизия:
#    Ревизия аппаратного обеспечения replicape. В настоящее время поддерживается только ревизия "B3"
#    поддерживается. Этот параметр должен быть указан.
#enable_pin: !gpio0_20
#    Глобальный разрешающий пин replicape. По умолчанию используется !gpio0_20 (он же
#    P9_41).
host_mcu:
#    Имя секции конфигурации mcu, которая взаимодействует с
#    экземпляром mcu Klipper "linux process". Этот параметр должен быть
#    предоставлен.
#standstill_power_down: False
#    Этот параметр управляет строкой CFG6_ENN на всех шаговых
#    моторов. True устанавливает строки разрешения в "открытое" состояние. По умолчанию
#    False.
#stepper_x_microstep_mode:
#stepper_y_microstep_mode:
#stepper_z_microstep_mode:
#stepper_e_microstep_mode:
#stepper_h_microstep_mode:
#    Этот параметр управляет контактами CFG1 и CFG2 данного
#    драйвера шагового двигателя. Доступные опции: disable, 1, 2,
#    spread2, 4, 16, spread4, spread16, stealth4 и stealth16. По адресу
#    по умолчанию - disable.
#stepper_x_current:
#stepper_y_current:
#stepper_z_current:
#stepper_e_current:
#stepper_h_current:
#    Настроенный максимальный ток (в амперах) шагового двигателя.
#    драйвера. Этот параметр должен быть указан, если шаговый двигатель не находится в
#    отключенном режиме.
#stepper_x_chopper_off_time_high:
#stepper_y_chopper_off_time_high:
#stepper_z_chopper_off_time_high:
#stepper_e_chopper_off_time_high:
#stepper_h_chopper_off_time_high:
#    Этот параметр управляет выводом CFG0 драйвера шагового двигателя.
#    (True устанавливает высокий уровень CFG0, False - низкий). По умолчанию используется значение False.
#stepper_x_chopper_hysteresis_high:
#stepper_y_chopper_hysteresis_high:
#stepper_z_chopper_hysteresis_high:
#stepper_e_chopper_hysteresis_high:
#stepper_h_chopper_hysteresis_high:
#    Этот параметр управляет выводом CFG4 драйвера шагового двигателя.
#    (True устанавливает высокий уровень CFG4, False - низкий). По умолчанию используется значение False.
#stepper_x_chopper_blank_time_high:
#stepper_y_chopper_blank_time_high:
#stepper_z_chopper_blank_time_high:
#stepper_e_chopper_blank_time_high:
#stepper_h_chopper_blank_time_high:
#    Этот параметр управляет выводом CFG5 драйвера шагового двигателя.
#    (True устанавливает высокий уровень CFG5, False - низкий). По умолчанию установлено значение True.
```

## Другие пользовательские модули

### [палитра2]

Поддержка мультиматериалов Palette 2 - обеспечивает более тесную интеграцию, поддерживая устройства Palette 2 в подключенном режиме.

Для полной функциональности этого модуля также необходимы `[virtual_sdcard]` и `[pause_resume]`.

Если вы используете этот модуль, не используйте плагин Palette 2 для Octoprint, так как они будут конфликтовать, и 1 не сможет инициализироваться должным образом, что приведет к прерыванию печати.

Если вы используете Octoprint и передаете gcode через последовательный порт вместо печати из virtual_sd, то удалите **M1** и **M0** из *Pausing commands* в *Settings > Serial Connection > Firmware & protocol*, чтобы избежать необходимости запуска печати на Palette 2 и снятия паузы в Octoprint для начала печати.

```
[palette2]
serial:
#    Последовательный порт для подключения к Palette 2.
# Baud: 115200
#    Используемая скорость передачи данных. По умолчанию 115200.
#feedrate_splice: 0.8
#    Скорость передачи данных, используемая при сращивании, по умолчанию 0,8
#feedrate_normal: 1.0
#    Скорость подачи после сращивания, по умолчанию 1,0
#auto_load_speed: 2
#    Скорость подачи экструзии при автозагрузке, по умолчанию 2 (мм/с)
#auto_cancel_variation: 0.1
#   Автоматическая отмена печати при изменении пинга выше этого порога
```

### [angle]

Поддержка магнитного датчика угла Холла для считывания измерений угла вала шагового двигателя с помощью микросхем a1333, as5047d или tle5012b с интерфейсом SPI. Измерения доступны через [API-сервер](API_Server.md) и [инструмент анализа движения](Debugging.md#motion-analysis-and-data-logging). Доступные команды см. в [справочнике G-кодов](G-Codes.md#angle).

```
[angle my_angle_sensor]
sensor_type:
#    Тип микросхемы магнитного датчика Холла. Доступны следующие варианты.
#    "a1333", "as5047d" и "tle5012b". Этот параметр должен быть
#    указан.
#sample_period: 0.000400
#    Период запроса (в секундах), используемый при измерениях. По
#    по умолчанию 0.000400 (что составляет 2500 выборок в секунду).
#stepper:
#    Имя шаговика, к которому подключен датчик угла (например,
#    "stepper_x"). Установка этого значения включает калибровку угла
#    инструмент. Чтобы использовать эту функцию, необходимо установить пакет Python "numpy"
#    установлен. По умолчанию калибровка угла не включена для
#    датчика угла.
cs_pin:
#    Контакт разрешения SPI для датчика. Этот параметр должен быть указан.
#spi_speed:
#spi_bus:
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    См. раздел "Общие настройки SPI" для описания
#    вышеуказанных параметров.
```

## Общие параметры шины

### Общие настройки SPI

Следующие параметры обычно доступны для устройств, использующих шину SPI.

```
#spi_speed:
#    Скорость SPI (в гц), которую следует использовать при обмене данными с устройством.
#    Значение по умолчанию зависит от типа устройства.
#spi_bus:
#    Если микроконтроллер поддерживает несколько шин SPI, то можно
#    указать здесь имя шины микроконтроллера. Значение по умолчанию зависит от
#    типа микроконтроллера.
#spi_software_sclk_pin:
#spi_software_mosi_pin:
#spi_software_miso_pin:
#    Укажите вышеуказанные параметры для использования "программного SPI". Этот
#    режим не требует аппаратной поддержки микроконтроллера (обычно
#    могут использоваться любые пины общего назначения). По умолчанию не используется
#    "программный SPI".
```

### Общие настройки I2C

Следующие параметры обычно доступны для устройств, использующих шину I2C.

Обратите внимание, что текущая поддержка I2C микроконтроллерами Klipper, как правило, не толерантна к помехам на линии. Неожиданные ошибки на проводах I2C могут привести к тому, что Klipper выдаст ошибку во время выполнения. Поддержка Klipper для устранения ошибок варьируется в зависимости от типа микроконтроллера. Обычно рекомендуется использовать только те устройства I2C, которые находятся на той же печатной плате, что и микроконтроллер.

Большинство реализаций микроконтроллеров Klipper поддерживают `i2c_speed` только 100000 (*стандартный режим*, 100 кбит/с). Микроконтроллер Klipper "Linux" поддерживает скорость 400000 (*быстрый режим*, 400 кбит/с), но она должна быть [установлена в операционной системе](RPi_microcontroller.md#optional-enabling-i2c) и параметр `i2c_speed` в противном случае игнорируется. Микроконтроллеры Klipper "RP2040" и семейство ATmega AVR поддерживают скорость 400000 через параметр `i2c_speed`. Все остальные микроконтроллеры Klipper используют скорость 100000 и игнорируют параметр `i2c_speed`.

```
#i2c_address:
#    i2c-адрес устройства. Он должен быть указан в виде десятичного
#    число (не в шестнадцатеричном виде). Значение по умолчанию зависит от типа устройства.
#i2c_mcu:
#    Имя микроконтроллера, к которому подключена микросхема.
#    По умолчанию - "mcu".
#i2c_bus:
#    Если микроконтроллер поддерживает несколько шин I2C, то можно
#    указать здесь имя шины микроконтроллера. Значение по умолчанию зависит от
#    типа микроконтроллера.
#i2c_software_scl_pin:
#i2c_software_sda_pin:
#    Укажите эти параметры, чтобы использовать программное обеспечение микроконтроллера.
#    поддержки "битового удара" I2C. Эти два параметра должны соответствовать двум выводам
#    на микроконтроллере для проводов scl и sda. На
#    по умолчанию используется аппаратная поддержка I2C, указанная параметром
#    параметром i2c_bus.
#i2c_speed:
#    Скорость I2C (в Гц), которую следует использовать при взаимодействии с устройством.
#    Реализация Klipper на большинстве микроконтроллеров жестко закодирована
#    на 100000, и изменение этого значения не имеет никакого эффекта. По умолчанию
#    100000. Linux, RP2040 и ATmega поддерживают 400000.
```
