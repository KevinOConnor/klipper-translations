# Функции

Клиппер обладает несколькими привлекательными функциями:

* Высокоточное шаговое движение. Klipper использует прикладной процессор (например, недорогой Raspberry Pi) при расчете движений принтера. Прикладной процессор определяет, когда нужно сделать шаг каждому шаговому двигателю, сжимает эти события, передает их микроконтроллеру, а затем микроконтроллер выполняет каждое событие в требуемое время. Каждое событие шагового двигателя запланировано с точностью 25 микросекунд или лучше. Программное обеспечение не использует кинематические оценки (такие как алгоритм Брезенхема) - вместо этого оно рассчитывает точное время шага, основываясь на физике ускорения и физике кинематики машины. Более точное движение шагового механизма обеспечивает более тихую и стабильную работу принтера.
* Лучшая в своем классе производительность. Klipper способен достичь высокой скорости шагов как на новых, так и на старых микроконтроллерах. Даже на старых 8-битных микроконтроллерах можно получить скорость более 175 тысяч шагов в секунду. На более современных микроконтроллерах возможно выполнение нескольких миллионов шагов в секунду. Более высокая частота шагов позволяет увеличить скорость печати. Временные характеристики шагового механизма остаются точными даже на высоких скоростях, что повышает общую стабильность.
* Klipper поддерживает принтеры с несколькими микроконтроллерами. Например, один микроконтроллер может использоваться для управления экструдером, в то время как другой управляет нагревателями принтера, а третий управляет остальной частью принтера. Программное обеспечение хоста Klipper реализует синхронизацию тактовых импульсов для учета дрейфа тактовых импульсов между микроконтроллерами. Для включения нескольких микроконтроллеров не требуется специального кода - для этого просто требуется несколько дополнительных строк в конфигурационном файле.
* Настройка с помощью простого конфигурационного файла. Нет необходимости перепрошивать микроконтроллер, чтобы изменить настройки. Вся конфигурация Klipper хранится в стандартном конфигурационном файле, который можно легко редактировать. Это упрощает настройку и обслуживание оборудования.
* Klipper поддерживает функцию "Плавное регулировку давления "PA" " - механизм, учитывающий влияние давления в экструдере. Это позволяет уменьшить "сопливость" экструдера и улучшить качество углов печати. Реализация Klipper не предусматривает мгновенного изменения скорости экструдера, что повышает общую стабильность и надежность.
* Klipper поддерживает функцию "Input Shaping" для снижения влияния вибраций на качество печати. Это позволяет уменьшить или устранить "звон" (также известный как "призрак", "эхо" или "рябь") при печати. Это также позволяет увеличить скорость печати при сохранении высокого качества.
* Klipper использует "итеративный решатель" для расчета точного времени шага на основе простых кинематических уравнений. Это облегчает перенос Klipper на новые типы роботов и позволяет сохранять точное время даже при сложной кинематике (не требуется "сегментация линий").
* Klipper не зависит от аппаратного обеспечения. Вы должны получать одинаково точное время независимо от низкоуровневого электронного оборудования. Код микроконтроллера Klipper разработан таким образом, чтобы точно следовать расписанию, предоставленному хост-программой Klipper (или предупреждать пользователя, если это не удается). Это облегчает использование имеющегося оборудования, переход на новое оборудование и уверенность в нем.
* Переносимый код. Klipper работает на микроконтроллерах на базе ARM, AVR и PRU. Существующие принтеры типа "reprap" могут работать с Klipper без аппаратной модификации - достаточно добавить Raspberry Pi. Внутренняя компоновка кода Klipper облегчает поддержку и других архитектур микроконтроллеров.
* Более простой код. В Klipper используется язык очень высокого уровня (Python) для большей части кода. Алгоритмы кинематики, парсинг G-кода, алгоритмы нагрева и терморезисторов и т.д. написаны на Python. Это облегчает разработку новых функций.
* Пользовательские программируемые макросы. Новые команды G-Code можно определить в файле конфигурации принтера (изменения кода не требуются). Эти команды можно программировать - они могут выполнять различные действия в зависимости от состояния принтера.
* Встроенный API-сервер. Помимо стандартного интерфейса G-Code, Klipper поддерживает богатый интерфейс приложений на основе JSON. Это позволяет программистам создавать внешние приложения с детальным управлением принтером.

## Дополнительные возможности

Klipper поддерживает множество стандартных функций 3d-принтера:

* Доступно несколько веб-интерфейсов. Работает с Mainsail, Fluidd, OctoPrint и другими. Это позволяет управлять принтером с помощью обычного веб-браузера. На том же Raspberry Pi, на котором работает Klipper, можно запустить веб-интерфейс.
* Поддержка стандартного G-кода. Поддерживаются общие команды g-кода, которые производятся типичными "слайсерами" (SuperSlicer, Cura, PrusaSlicer и т. д.).
* Поддержка нескольких экструдеров. Также поддерживаются экструдеры с общими нагревателями и экструдеры на независимых каретках (IDEX).
* Поддерживаются принтеры, работающие в форматах cartesian, delta, corexy, corexz, hybrid-corexy, hybrid-corexz, deltesian, rotary delta, polar и cable winch.
* Поддержка автоматического выравнивания кровати. Klipper может быть настроен на базовое определение наклона станины или полное выравнивание станины по сетке. Если в станине используется несколько Z-шаговиков, Klipper также может выравнивать станину, независимо управляя Z-шаговиками. Поддерживается большинство датчиков высоты Z, включая датчики BL-Touch и датчики с сервоприводом.
* Поддержка автоматической дельта-калибровки. Инструмент калибровки может выполнять базовую калибровку по высоте, а также расширенную калибровку по размерам X и Y. Калибровка может выполняться с помощью датчика высоты Z или вручную.
* Поддержка функции "исключить объект" во время выполнения. При настройке этот модуль может облегчить отмену только одного объекта в печати, состоящей из нескольких частей.
* Поддержка распространенных датчиков температуры (например, обычных термисторов, AD595, AD597, AD849x, PT100, PT1000, MAX6675, MAX31855, MAX31856, MAX31865, BME280, HTU21D, DS18B20 и LM75). Также можно настроить пользовательские термисторы и аналоговые датчики температуры. Можно контролировать внутренний датчик температуры микроконтроллера и внутренний датчик температуры Raspberry Pi.
* Базовая тепловая защита нагревателя включена по умолчанию.
* Поддержка стандартных вентиляторов, вентиляторов сопел и вентиляторов с контролем температуры. Нет необходимости держать вентиляторы включенными, когда принтер простаивает. Скорость вращения вентиляторов можно отслеживать на вентиляторах, оснащенных тахометром.
* Поддержка конфигурирования во время выполнения драйверов шаговых двигателей TMC2130, TMC2208/TMC2224, TMC2209, TMC2660 и TMC5160. Также поддерживается управление током традиционных шаговых драйверов с помощью AD5206, DAC084S085, MCP4451, MCP4728, MCP4018 и выводов ШИМ.
* Поддержка распространенных ЖК-дисплеев, подключаемых непосредственно к принтеру. Также доступно меню по умолчанию. Содержимое дисплея и меню можно полностью настроить с помощью файла конфигурации.
* Постоянное ускорение и поддержка "опережения". Все движения принтера постепенно ускоряются от остановки до крейсерской скорости, а затем замедляются до остановки. Поступающий поток команд движения G-кода ставится в очередь и анализируется - ускорение между движениями в одном направлении будет оптимизировано для уменьшения задержек печати и улучшения общего времени печати.
* В Klipper реализован алгоритм "шагового фазового концевика", который позволяет повысить точность типичных концевых выключателей. При правильной настройке он может улучшить адгезию первого слоя отпечатка.
* Поддержка датчиков наличия нити, датчиков движения нити и датчиков ширины нити.
* Поддержка измерения и регистрации ускорения с помощью акселерометров adxl345, mpu9250 и mpu6050.
* Поддержка ограничения максимальной скорости коротких "зигзагообразных" движений для уменьшения вибрации и шума принтера. Дополнительные сведения см. в документе [кинематика ](Kinematics.md).
* Для многих распространенных принтеров доступны образцы конфигурационных файлов. Список можно найти в каталоге [config](../config/).

Чтобы начать работу с Klipper, прочитайте руководство [установка](Installation.md).

## Шаговые ориентиры

Ниже приведены результаты тестов производительности степпера. Цифры показывают общее количество шагов в секунду на микроконтроллере.

| Микроконтроллер | 1 шаговый активный | 3 шаговика активны |
| --- | --- | --- |
| 16 МГц AVR | 157 тыс. | 99 тыс. |
| 20МГц AVR | 196 тыс. | 123 тыс. |
| SAMD21 | 686 тыс. | 471 тыс. |
| STM32F042 | 814 тыс. | 578 тыс. |
| Beaglebone PRU | 866 тыс. | 708 тыс. |
| STM32G0B1 | 1103 тыс. | 790K |
| STM32F103 | 1180 тыс. | 818 тыс. |
| SAM3X8E | 1273 тыс. | 981 тыс. |
| SAM4S8C | 1690 тыс. | 1385 тыс. |
| LPC1768 | 1923 тыс. | 1351 тыс. |
| LPC1769 | 2353 тыс. | 1622 тыс. |
| RP2040 | 2400 тыс. | 1636 тыс. |
| SAM4E8E | 2500 тыс. | 1674 тыс. |
| SAMD51 | 3077 тыс. | 1885 тыс. |
| AR100 | 3529K | 2507K |
| STM32F407 | 3652 тыс. | 2459 тыс. |
| STM32F446 | 3913 тыс. | 2634 тыс. |
| STM32H743 | 9091K | 6061K |

Если вы не знаете, какой микроконтроллер установлен на конкретной плате, найдите соответствующий файл [config](../config/) и найдите название микроконтроллера в комментариях в верхней части этого файла.

Более подробная информация о бенчмарках доступна в документе [Benchmarks](Benchmarks.md).
