# வார்ப்புருக்கள் கட்டளையிடுகின்றன

இந்த ஆவணம் GCODE_MACRO (மற்றும் ஒத்த) கட்டமைப்பு பிரிவுகளில் சி-குறியீடு கட்டளை காட்சிகளை செயல்படுத்துவது பற்றிய தகவல்களை வழங்குகிறது.

## சி-கோட் மேக்ரோ பெயரிடுதல்

ஐயா -கோட் மேக்ரோ பெயருக்கு வழக்கு முக்கியமல்ல - My_macro மற்றும் my_macro ஆகியவை இதை மதிப்பீடு செய்யும், மேலும் அவை மேல் அல்லது கீழ் வழக்கில் அழைக்கப்படலாம். மேக்ரோ பெயரில் ஏதேனும் எண்கள் பயன்படுத்தப்பட்டால், அவை அனைத்தும் பெயரின் முடிவில் இருக்க வேண்டும் (எ.கா., டெச்ட்_மக்ரோ 25 செல்லுபடியாகும், ஆனால் மேக்ரோ 25_TEST3 இல்லை).

## கட்டமைப்பில் சி-குறியீட்டை வடிவமைத்தல்

கட்டமைப்பு கோப்பில் ஒரு மேக்ரோவை வரையறுக்கும்போது உள்தள்ளல் முக்கியமானது. மல்டி-லைன் சி-குறியீட்டு வரிசையைக் குறிப்பிட ஒவ்வொரு வரிக்கும் சரியான உள்தள்ளல் இருப்பது முதன்மை. உதாரணமாக:

```
[gcode_macro bullink_led]
 gcode:
 Set_pin முள் = my_led மதிப்பு = 1
 ஐயா 4 பி 2000
 Set_pin முள் = my_led மதிப்பு = 0
```

`Gcode:` கட்டமைப்பு விருப்பம் எப்போதுமே வரியின் தொடக்கத்தில் எவ்வாறு தொடங்குகிறது என்பதையும், சி-கோட் மேக்ரோவில் அடுத்தடுத்த வரிகளையும் எவ்வாறு ஆரம்பத்தில் தொடங்குவதில்லை என்பதைக் கவனியுங்கள்.

## உங்கள் மேக்ரோவில் ஒரு விளக்கத்தைச் சேர்க்கவும்

செயல்பாட்டை அடையாளம் காண உதவ ஒரு குறுகிய விளக்கத்தை சேர்க்கலாம். செயல்பாட்டை விவரிக்க ஒரு குறுகிய உரையுடன் `விளக்கம்:` சேர்க்கவும். இயல்புநிலை குறிப்பிடப்படாவிட்டால் "சி-கோட் மேக்ரோ" ஆகும். உதாரணமாக:

```
[gcode_macro bullink_led]
 விளக்கம்: ஒரு முறை my_led ஐ ஒளிரச் செய்யுங்கள்
 gcode:
 Set_pin முள் = my_led மதிப்பு = 1
 ஐயா 4 பி 2000
 Set_pin முள் = my_led மதிப்பு = 0
```

நீங்கள் `உதவி` கட்டளை அல்லது தன்னியக்கவியல் செயல்பாட்டைப் பயன்படுத்தும்போது முனையம் விளக்கத்தைக் காண்பிக்கும்.

## சி-குறியீடு நகர்வுகளுக்கான நிலையை சேமிக்கவும்/மீட்டெடுக்கவும்

துரதிர்ச்டவசமாக, சி-கோட் கட்டளை மொழி பயன்படுத்த சவாலாக இருக்கும். கருவியை நகர்த்துவதற்கான நிலையான வழிமுறை `சி 1` கட்டளை வழியாகும் (` ஐயா 0` கட்டளை `சி 1` க்கான மாற்றுப்பெயராகும், மேலும் அதை ஒன்றுக்கொன்று மாற்றாகப் பயன்படுத்தலாம்). எவ்வாறாயினும், இந்த கட்டளை `M82`,` M83`, `G90`,` G91`, `G92` மற்றும் முந்தைய` ஐயா 1` கட்டளைகளால் "சி-கோட் பாகுபடுத்தல் நிலை" அமைப்பை நம்பியுள்ளது. சி-கோட் மேக்ரோவை உருவாக்கும்போது, `சி 1` கட்டளையை வழங்குவதற்கு முன்பு சி-கோட் பாகுபடுத்தும் நிலையை எப்போதும் வெளிப்படையாக அமைப்பது நல்லது. (இல்லையெனில், `சி 1` கட்டளை விரும்பத்தகாத கோரிக்கையை ஏற்படுத்தும் இடர் உள்ளது.)

`G1` நகர்வுகளை` save_gcode_state`, `g91`, மற்றும்` restore_gcode_state` ஆகியவற்றில் மடிக்கச் செய்வதற்கான பொதுவான வழி. உதாரணமாக:

```
[gcode_macro move_up]
 gcode:
 Save_gcode_state பெயர் = my_move_up_state
 ஐயா 91
 G1 Z10 F300
 Restore_gcode_state பெயர் = my_move_up_state
```

`G91` கட்டளை சி-குறியீடு பாகுபடுத்தும் நிலையை" உறவினர் நகர்வு பயன்முறையில் "வைக்கிறது, மேலும்` மீட்டெடுப்பு_சி கோட்_ச்டேட்` கட்டளை மேக்ரோவுக்குள் நுழைவதற்கு முன்பு இருந்ததை மீட்டெடுக்கிறது. முதல் `சி 1` கட்டளையில் வெளிப்படையான வேகத்தை (` எஃப்` அளவுரு வழியாக) குறிப்பிட மறக்காதீர்கள்.

## வார்ப்புரு விரிவாக்கம்

GCODE_MACRO `GCODE:` சின்சா 2 வார்ப்புரு மொழியைப் பயன்படுத்தி கட்டமைப்பு பிரிவு மதிப்பீடு செய்யப்படுகிறது. வெளிப்பாடுகளை `{}` எழுத்துக்களில் மடக்குவதன் மூலம் அல்லது `{ % %}` இல் மூடப்பட்ட நிபந்தனை அறிக்கைகளைப் பயன்படுத்துவதன் மூலம் ரன்-நேரத்தில் மதிப்பீடு செய்யலாம். தொடரியல் பற்றிய கூடுதல் தகவலுக்கு [jinja2 ஆவணம்] (http://jinja.pocoo.org/docs/2.10/templates/) ஐப் பார்க்கவும்.

ஒரு சிக்கலான மேக்ரோவின் எடுத்துக்காட்டு:

```
[gcode_macro clean_nozzle]
 gcode:
 { % wipe_count = 8 %}
 Save_gcode_state பெயர் = cean_nozle_state
 ஐயா 90
 G0 Z15 F300
 வரம்பில் துடைப்பதற்கு % (wipe_count) %}
 [(275, 4), (235, 4)] %} இல் ஒருங்கிணைப்புக்கு % %}
 G0 ஃச் {ஒருங்கிணைப்பு [0]} ஒய் {ஒருங்கிணைப்பு [1] + 0.25 * துடைப்பம்} Z9.7 F12000
 { % endfor %}
 { % endfor %}
 Restore_gcode_state பெயர் = seal_nozles_state
```

### மேக்ரோ அளவுருக்கள்

மேக்ரோ என்று அழைக்கப்படும் போது அதை அனுப்பும் அளவுருக்களை ஆய்வு செய்வது பெரும்பாலும் பயனுள்ளதாக இருக்கும். இந்த அளவுருக்கள் `அளவுருக்கள்` போலி-மாறி வழியாக கிடைக்கின்றன. எடுத்துக்காட்டாக, மேக்ரோ என்றால்:

```
[gcode_macro set_percent]
 gcode:
 M117 இப்போது {params.value | மிதவை * 100}%
```

`set_percent மதிப்பு = .2` என அழைக்கப்பட்டது, இது இப்போது 20%` M117 க்கு மதிப்பீடு செய்யும். மேக்ரோவில் மதிப்பிடும்போது அளவுரு பெயர்கள் எப்போதும் மேல்-வழக்கில் இருக்கும் என்பதை நினைவில் கொள்க, அவை எப்போதும் சரங்களாக அனுப்பப்படுகின்றன. கணிதத்தைச் செய்தால், அவை வெளிப்படையாக முழு எண்ணாக அல்லது மிதவைகளாக மாற்றப்பட வேண்டும்.

இயல்புநிலை அளவுருவைப் பயன்படுத்தவும், முடிவை உள்ளக பெயருக்கு ஒதுக்கவும் சின்சா 2 `செட்` உத்தரவை பயன்படுத்துவது பொதுவானது. உதாரணமாக:

```
[gcode_macro set_bed_temperature]
 gcode:
 { % கணம் bed_temp = params.temperature | இயல்புநிலை (40) | மிதவை %}
 M140 S {bed_temp}
```

### "ராவபரம்ச்" மாறி

இயங்கும் மேக்ரோவுக்கான முழு ஒப்பிடமுடியாத அளவுருக்கள் `ராவபரம்கள்` போலி-மாறி வழியாக அணுகலாம்.

அசல் கட்டளையின் ஒரு பகுதியாக இருந்த எந்த கருத்துகளும் இதில் அடங்கும் என்பதை நினைவில் கொள்க.

`ராவபரம்கள்` ஐப் பயன்படுத்தி` M117` கட்டளையை எவ்வாறு மேலெழுதுவது என்பதைக் காட்டும் எடுத்துக்காட்டுக்கு [மாதிரி-macros.cfg] (../ config/salem-macros.cfg) கோப்பைப் பார்க்கவும்.

### "அச்சுப்பொறி" மாறி

அச்சுப்பொறியின் தற்போதைய நிலையை `அச்சுப்பொறி` போலி-மாறி மூலம் ஆய்வு செய்ய (மற்றும் மாற்ற) முடியும். உதாரணமாக:

```
[gcode_macro slow_fan]
 gcode:
 M106 S {printel.fan.speed * 0.9 * 255}
```

கிடைக்கக்கூடிய புலங்கள் [நிலை குறிப்பு] (status_reference.md) ஆவணத்தில் வரையறுக்கப்பட்டுள்ளன.

முக்கியமானது! மேக்ரோக்கள் முதலில் முழுவதுமாக மதிப்பிடப்படுகின்றன, அதன் விளைவாக மட்டுமே கட்டளைகள் செயல்படுத்தப்படுகின்றன. அச்சுப்பொறியின் நிலையை மாற்றும் ஒரு கட்டளையை ஒரு மேக்ரோ வெளியிட்டால், மேக்ரோவின் மதிப்பீட்டின் போது அந்த மாநில மாற்றத்தின் முடிவுகள் காணப்படாது. ஒரு மேக்ரோ மற்ற மேக்ரோக்களை அழைக்கும் கட்டளைகளை உருவாக்கும் போது இது நுட்பமான நடத்தைக்கு வழிவகுக்கும், ஏனெனில் இது அழைக்கப்படும் மேக்ரோ என அழைக்கப்படும் போது மதிப்பீடு செய்யப்படுகிறது (இது அழைப்பு மேக்ரோவின் முழு மதிப்பீட்டிற்கும் பிறகு).

மாநாட்டின் மூலம், `அச்சுப்பொறி` தொடர்ந்து வரும் பெயர் ஒரு கட்டமைப்பு பிரிவின் பெயர். எனவே, எடுத்துக்காட்டாக, `அச்சுப்பொறி.பான்` என்பது` [விசிறி] `கட்டமைப்பு பிரிவால் உருவாக்கப்பட்ட சுவைஞர் பொருளைக் குறிக்கிறது. இந்த விதிக்கு சில விதிவிலக்குகள் உள்ளன - குறிப்பாக `gcode_move` மற்றும்` கருவிஎட்` பொருள்கள். கட்டமைப்பு பிரிவில் இடங்கள் இருந்தால், அதை `[]` அணுகல் - எடுத்துக்காட்டாக: `அச்சுப்பொறி [" செனரிக்_ஈட்டர் மை_சேம்பர்_ஈட்டர் "]. வெப்பநிலை` வழியாக அணுகலாம்.

Jinja2 `Set` உத்தரவு` அச்சுப்பொறி` வரிசைக்கு ஒரு பொருளுக்கு உள்ளக பெயரை ஒதுக்க முடியும் என்பதை நினைவில் கொள்க. இது மேக்ரோக்களை மேலும் படிக்கக்கூடியதாக மாற்றும் மற்றும் தட்டச்சு செய்வதைக் குறைக்கும். உதாரணமாக:

```
[gcode_macro query_htu21d]
 gcode:
 { % கணம் உணரி = அச்சுப்பொறி ["HTU21D My_Sensor"] %}
 M117 தற்காலிக: {sensor.temperature} ஈரப்பதம்: {sensor.humidity}
```

## செயல்கள்

அச்சுப்பொறியின் நிலையை மாற்றக்கூடிய சில கட்டளைகள் உள்ளன. எடுத்துக்காட்டாக, `{action_emergency_stop ()}` அச்சுப்பொறி பணிநிறுத்தம் நிலைக்கு செல்ல காரணமாகிறது. மேக்ரோ மதிப்பீடு செய்யப்படும் நேரத்தில் இந்த நடவடிக்கைகள் எடுக்கப்படுகின்றன என்பதை நினைவில் கொள்க, இது உருவாக்கப்பட்ட சி-குறியீட்டு கட்டளைகள் செயல்படுத்தப்படுவதற்கு முன்னர் குறிப்பிடத்தக்க நேரமாக இருக்கலாம்.

"செயல்" கட்டளைகள் கிடைக்கின்றன:

- `action_respond_info (msg)`: கொடுக்கப்பட்ட `msg` ஐ /tmp /அச்சுப்பொறி போலி-முனையத்திற்கு எழுதுங்கள். `Msg` இன் ஒவ்வொரு வரியும் ஒரு" // "முன்னொட்டுடன் அனுப்பப்படும்.
- `action_raise_error (msg)`: தற்போதைய மேக்ரோவை (மற்றும் எந்த அழைப்பு மேக்ரோக்களையும்) நிறுத்தி, கொடுக்கப்பட்ட `msg` /tmp /அச்சுப்பொறி போலி-முனையத்திற்கு எழுதுங்கள். `Msg` இன் முதல் வரி ஒரு" !! "முன்னொட்டு மூலம் அனுப்பப்படும், அடுத்தடுத்த வரிகள் ஒரு" // "முன்னொட்டு இருக்கும்.
- `action_emergency_stop (msg)`: அச்சுப்பொறியை பணிநிறுத்தம் நிலைக்கு மாற்றவும். `Msg` அளவுரு விருப்பமானது, பணிநிறுத்தத்திற்கான காரணத்தை விவரிக்க இது பயனுள்ளதாக இருக்கும்.
- `action_call_remote_method (method_name)`: தொலைநிலை கிளையண்டால் பதிவுசெய்யப்பட்ட ஒரு முறையை அழைக்கிறது. முறை அளவுருக்களை எடுத்தால் அவை முக்கிய வாதங்கள் மூலம் வழங்கப்பட வேண்டும், அதாவது: `action_call_remote_method (" print_stuff ", my_arg =" hello_world ")`

## மாறிகள்

மேக்ரோ அழைப்புகளுக்கு இடையில் நிலையைச் சேமிக்க SET_GCODE_VARIABLE கட்டளை பயனுள்ளதாக இருக்கும். மாறி பெயர்களில் எந்த உயர் வழக்கு எழுத்துக்களும் இருக்காது. உதாரணமாக:

```
[gcode_macro start_probe]
 மாறி_பெட்_டெம்ப்: 0
 gcode:
 # இலக்கு வெப்பநிலையை படுக்கை_டெம்ப் மாறிக்கு சேமிக்கவும்
 Set_gcode_variable மேக்ரோ = START_PROBE மாறி = BED_TEMP மதிப்பு = {printer.heater_bed.target}
 # படுக்கை ஈட்டரை முடக்கு
 M140
 # ஆய்வு செய்யுங்கள்
 ஆய்வு
 # ஆய்வு முடிந்ததும் முடிக்க_பிரோப் மேக்ரோவை அழைக்கவும்
 FINT_PROBE

 [gcode_macro finigh_probe]
 gcode:
 # வெப்பநிலையை மீட்டெடுங்கள்
 M140 S {அச்சுப்பொறி ["GCODE_MACRO START_PROBE"]. BED_TEMP}
```

Set_gcode_variable ஐப் பயன்படுத்தும் போது மேக்ரோ மதிப்பீடு மற்றும் கட்டளை செயலாக்கத்தின் நேரத்தை கணக்கில் எடுத்துக்கொள்ள மறக்காதீர்கள்.

## தாமதமான GCODES

தாமதமாக GCODE வரிசையை இயக்க [தாமதமான_சி கோட்] உள்ளமைவு விருப்பத்தைப் பயன்படுத்தலாம்:

```
[தாமதமான_சி கோட் கிளியர்_டிச்ப்ளே]
 gcode:
 எம் 117

 [gcode_macro load_filament]
 gcode:
 ஐயா 91
 G1 E50
 ஐயா 90
 எம் 400
 M117 சுமை முடிந்தது!
 Update_delayed_gcode ஐடி = clear_display காலம் = 10
```

மேலே உள்ள `load_filament` மேக்ரோவை இயக்கும்போது, அது" சுமை முழுமையானது! " வெளியேற்றம் முடிந்ததும் செய்தி. GCODE இன் கடைசி வரி "CLEAR_DISPLAY" தாமதமான_கோடை செயல்படுத்துகிறது, இது 10 வினாடிகளில் இயக்க அமைக்கப்பட்டுள்ளது.

அச்சுப்பொறி தொடக்கத்தில் தாமதமான_கோடை இயக்க `தொடக்க_டூரேசன்` கட்டமைப்பு விருப்பத்தை அமைக்கலாம். அச்சுப்பொறி "தயாராக" நிலைக்குள் நுழையும் போது கவுண்டன் தொடங்குகிறது. எடுத்துக்காட்டாக, அச்சுப்பொறி தயாரான 5 வினாடிகளுக்கு கீழே உள்ள தாமதமான_சி கோட் இயக்கும், காட்சியை "வரவேற்பு!" செய்தி:

```
[தாமதமான_சி கோட் வரவேற்பு]
 ஆரம்ப_வாட்டு: 5.
 gcode:
 M117 வரவேற்பு!
```

தாமதமான GCODE GCODE விருப்பத்தில் தன்னை புதுப்பிப்பதன் மூலம் மீண்டும் செய்ய முடியும்:

```
[தாமதமான_சிகோட் அறிக்கை_டெம்ப்]
 ஆரம்ப_வாட்டு: 2.
 gcode:
 .
 Update_delayed_gcode ஐடி = report_temp காலம் = 2
```

மேலே உள்ள தாமதமான_சி கோட் ஒவ்வொரு 2 விநாடிகளிலும் ஆக்டோப்ரின்ட்டுக்கு "// எக்ச்ட்ரூடர் தற்காலிக: [EX0_TEMP]" ஐ அனுப்பும். பின்வரும் GCODE உடன் இதை ரத்து செய்யலாம்:

```
Update_delayed_gcode ஐடி = report_temp காலம் = 0
```

## பட்டி வார்ப்புருக்கள்

ஒரு [காட்சி கட்டமைப்பு பிரிவு] (config_reference.md#காட்சி) இயக்கப்பட்டிருந்தால், [மெனு] (config_reference.md#மெனு) கட்டமைப்பு பிரிவுகளுடன் மெனுவைத் தனிப்பயனாக்க முடியும்.

பின்வரும் வாசிப்பு மட்டும் பண்புக்கூறுகள் பட்டியல் வார்ப்புருக்களில் கிடைக்கின்றன:

* `மெனு. அகலம்` - உறுப்பு அகலம் (காட்சி நெடுவரிசைகளின் எண்ணிக்கை)
* `மெனு..என்.எச்` - உறுப்பு பெயர்வெளி
* `மெனு.வென்ட்` - ச்கிரிப்டைத் தூண்டிய நிகழ்வின் பெயர்
* `மெனு.

பின்வரும் செயல்கள் பட்டியல் வார்ப்புருக்களில் கிடைக்கின்றன:

* `மெனு.
   * `<forse>` உண்மையாக அமைக்கப்பட்டால், அது திருத்துவதையும் நிறுத்திவிடும். இயல்புநிலை மதிப்பு தவறானது.
   * `<apdate>` தவறானது அமைக்கப்படும்போது, பெற்றோர் கொள்கலன் உருப்படிகள் புதுப்பிக்கப்படாது. இயல்புநிலை மதிப்பு உண்மை.
* `மெனு.
   * `<forse>` உண்மையாக அமைக்கப்பட்டால், அது திருத்துவதையும் நிறுத்திவிடும். இயல்புநிலை மதிப்பு தவறானது.

## மாறிகளை வட்டில் சேமிக்கவும்

[Save_variables கட்டமைப்பு பிரிவு] (config_reference.md#save_variables) இயக்கப்பட்டிருந்தால், `save_variable மாறி = <aname> மதிப்பு = <மதிப்பு>` மாறியை வட்டில் சேமிக்க பயன்படுத்தலாம், இதனால் மறுதொடக்கங்கள் முழுவதும் பயன்படுத்தப்படலாம். சேமிக்கப்பட்ட அனைத்து மாறிகள் தொடக்கத்தில் `அச்சுப்பொறி.சேவ்_வார்பிள்கள். அதிகப்படியான நீண்ட வரிகளைத் தவிர்க்க நீங்கள் பின்வருவனவற்றை மேக்ரோவின் மேற்புறத்தில் சேர்க்கலாம்:

```
{ % svv = printur.save_variables.variables %}
```

உதாரணமாக, இது 2-இன் -1-அவுட் ஆட்எண்டின் நிலையைச் சேமிக்கப் பயன்படுகிறது, மேலும் ஒரு அச்சைத் தொடங்கும்போது, T0 க்கு பதிலாக செயலில் எக்ச்ட்ரூடர் பயன்படுத்தப்படுவதை உறுதிசெய்க:

```
[gcode_macro t1]
 gcode:
 Activate_extruder extruder = extruder1
 Save_variable மாறி = தற்போதைய எக்ச்ட்ரூடர் மதிப்பு = '"எக்ச்ட்ரூடர் 1"'

 [gcode_macro t0]
 gcode:
 Activate_extruder extruder = extruder
 Save_variable மாறி = தற்போதைய எக்ச்ட்ரூடர் மதிப்பு = '"எக்ச்ட்ரூடர்"'

 [gcode_macro start_gcode]
 gcode:
 { % svv = printur.save_variables.variables %}
 Activate_extruder extruder = {svv.currentextruder}
```
