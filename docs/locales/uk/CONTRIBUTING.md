# Внески до кліпперу

Дякуємо за довіру до Klipper! Цей документ описує процес внесення змін до Кліпперу.

Будь ласка, ознайомтеся з [контактною сторінкою](Контакт.md) для отримання інформації про звітність або для отримання відомостей про контактні дані розробників.

## Огляд процесу вступу

Внески до Klipper, як правило, слідують за високим рівнем:

1. Відправник починає зі створення [запиту на отримання GitHub](https://github.com/Klipper3d/klipper/pulls), коли надсилання готове для широкого розгортання.
1. Коли [reviewer](#reviewers) доступний для [review](#what-to-expect-in-a-review) подача, вони будуть призначати себе на вимогу Тягу на GitHub. Мета рецензування полягає в тому, щоб знайти дефекти і перевірити, що подача здійснюється задокументованими рекомендаціями.
1. Після успішного огляду рецензент «затвердить рецензію» на GitHub та [заголовок](#reviewers) буде втілювати зміни в майстер-гілку Klipper.

Під час роботи над поліпшенням, розгляньте початок (або внесення до) тема [Klipper Discourse](Контакт.md). Постійна дискусія на форумі може покращити видимість роботи розвитку і може залучити інших зацікавлених у тестуванні нової роботи.

## Що чекати в огляді

Внески до Klipper відгукуються перед злиттям. Основною метою процесу рецензування є перевірка дефектів та перевірка того, що подання слідувати вказівкам, зазначеним у документації Кліппера.

Зрозуміло, що існує багато способів виконання поставленого завдання; це не інтенсивний огляд, щоб обговорити «найкращий» виконання. Де це можливо, оглядові дискусії, присвячені фактам і вимірам, краще.

Більшість заявок призведе до зворотного зв’язку з оглядом. Щоб отримати зворотний зв'язок, додайте інформацію, і для оновлення подання, якщо це необхідно.

Рецензент буде виглядати:

1. Чи є подання без дефектів і він готовий бути широко розгорнутим?

   Подати заявку на перевірку змін до подання. Рецензенти дивляться на помилки, але вони не, в цілому, тестові подання. Прийнята подача часто розгортається до тисяч принтерів протягом декількох тижнів прийому. Якість заявок вважається пріоритетом.

   Головна [Klipper3d/klipper](https://github.com/Klipper3d/klipper) Репозиторій GitHub не приймає експериментальних робіт. Підрядники повинні виконувати експериментацію, відбілювання і тестування в власних репозиторій. Сервер [Klipper Discourse](Контакт.md) - це гарне місце для підвищення обізнаності про нову роботу і пошуку користувачів, зацікавлених у наданні реальних відгуків.

   Видача повинні пройти всі [випадкові випадки](Debugging.md).

   При фіксуванні дефекту в коді подавачі повинні мати загальне розуміння першопричини цього дефекту, а фіксація повинна ціль, що викликає корінь.

   Подача коду не повинна містити зайвий код відключення, параметри відключення, а не записувати час.

   Коментарі до подачі коду повинні зосередитись на підвищенні вмісту коду. Подання не повинно містити «коду», а не зайвих коментарів, що описують останні виконання. Не варто зайвих «домо» коментарів.

   Оновити документацію не варто заявити, що вони є «роботою в прогресі».
1. Чи забезпечується подача «високий удар» на користь реальних користувачів, які виконують реальні завдання?

   Рецензенти повинні визначити, принаймні у власних розумах, грубо "хто цільова аудиторія", шорстку шкалу "розміри цієї аудиторії", "наряддя" вони отримають, як вимірюється "наряд", а "регулятори цих випробувань". У більшості випадків це буде очевидним як для відправника, так і рецензента, і він явно не зазначений під час рецензування.

   Очікується, що гілка «Кліппер» має гідну цільову аудиторію. В якості загального "справи великого пальця", подання повинні зацікавити базу користувачів принаймні 100 реальних користувачів.

   Якщо рецензент попросить деталі на тему «пошук» подання, будь ласка, не врахуйте її критикою. Зрозуміти зрозуміти переваги реального світу змін є природною частиною огляду.

   При обговоренні переваг бажано обговорити «Факти і вимірювання». В цілому рецензенти не шукають відповіді форми « someone може знайти варіант X корисною», ані вони шукають відповіді форми «це уявлення додає функцію, яку прошивку X реалізує». Замість цього, зазвичай бажано обговорити деталі про те, як було вимірено поліпшення якості, і які були результати цих вимірювань - наприклад, "тести на принтерах Acme X1000 показують поліпшені кути, як видно на малюнку ...", або наприклад " час друку об'єкта реального світу X на Foomatic X900 принтер пішов з 4 годин до 3,5 годин". Зрозуміло, що тестування цього типу може зайняти значний час і зусилля. Декілька найбільш нездатних функцій Кліппера взяли участь у обговоренні, реконструкції, тестування та документації до об’єднання в майстер-гілку.

   Всі нові модулі, параметри налаштування, команди, параметри команд та документи повинні мати "високий вплив". Ми не хочемо обтягувати користувачів з опціями, які вони не можуть налаштовуватися, ані ми хочемо, щоб вони не отримували жодних можливостей.

   Рецензент може попросити уточнення про те, як користувач повинен налаштувати варіант - ідеальний відповідь буде містити дані про процес - наприклад, "користувачі MegaX500 будуть очікувані встановити опцію X до 99.3, тоді як користувачі Elite100Y очікується, щоб калібрувати варіант X за допомогою процедури ...".

   Якщо мета параметра полягає в тому, щоб зробити код більш модульним, то віддайте перевагу за допомогою кодових констанцій замість параметрів налаштування користувацького інтерфейсу.

   Нові модулі, нові параметри і нові параметри не повинні забезпечити схожу функціональність до існуючих модулів - якщо відмінності довільні, ніж це бажано використовувати існуючу систему або рефакторувати існуючий код.
1. Чи є авторське право подання чітким, нетерплим і сумісним?

   Нові файли C та файли Python повинні мати неоднозначну інформацію про авторські права. Переглянути існуючі файли для бажаного формату. Визначте авторські права на існуючий файл при внесенні незначних змін до цього файлу.

   Код, взятий із сторонніх джерел, має бути сумісним із ліцензією Klipper (GNU GPLv3). До каталогу `lib/` слід додавати великі коди сторонніх розробників (і дотримуватися формату, описаного в [lib/README](../lib/README)).

   Підрядники повинні надати [Підпис](#format-of-commit-messages) використовуючи їх повне ім'я. Вказана заявка на подачу, яка погоджується з сертифікатом [розробник походження](розробник-сертифікат-оф-оригін).
1. Чи вказаний в документації Кліппер?

   Зокрема, код повинен дотримуватися інструкцій в <Code_Overview.md> та налаштування файлів слід дотримуватися інструкцій в <Example_Configs.md>.
1. Чи оновлюється документація Klipper для відображення нових змін?

   При мінімальному довідковому документі необхідно оновити відповідні зміни до коду:

   * Всі параметри команд і команд повинні бути задокументовані в <G-Codes.md>.
   * Всі користувацькі модулі та їх параметри налаштування повинні бути задокументовані в <Config_Reference.md>.
   * Всі експортовані "статусні зміни" повинні бути задокументовані в <Status_Reference.md>.
   * Всі нові "webhooks" і їх параметри повинні бути задокументовані в <API_Server.md>.
   * Будь-яка зміна, яка робить неперевершені сумісні зміни в налаштування командного або конфігураційного файлу, необхідно задокументувати в <Config_Changes.md>.

Нові документи слід додати до <Overview.md> і до індексу веб-сайту [docs/_klipper3d/mkdocs.yml](../docs/_klipper3d/mkdocs.yml).

1. Чи добре сформовані коміти, адресуйте одну тему за коміс, і незалежно?

   Повідомлення про фіксацію мають відповідати [бажаному формату](#format-of-commit-messages).

   Товари не повинні володіти конфліктом. Нові доповнення в майстер-гілку Кліппер завжди виконуються через "ребазу" або "шкідку і базис". Як правило, не потрібно для відправників, щоб перезапустити їх подачу на кожен оновлення до майстер-репозиторію Кліппер. Однак, якщо є конфлікт зливу, то подача рекомендується використовувати `git rebase` для вирішення конфлікту.

   Кожен комітаж повинен звернутися до однорівневої зміни. Великі зміни повинні бути розбиті в декілька незалежних комісій. Кожен комітаж повинен "стояти на власній" так, щоб інструменти, такі як `git bisect` і `git revert` працюють надійно.

   Не слід змішувати з функціональними змінами. В цілому, не приймаються зміни білого простору, якщо вони з встановленого "власника" коду, що є модифікованим.

Кліппер не реалізує строгий "керівник стилю", але модифікації до існуючого коду повинні дотримуватися високого рівня, стилю відступу коду і формат цього існуючого коду. Запуски нових модулів і систем мають більш гнучкість в стилі кодування, але це бажано для цього нового коду, щоб дотримуватися внутрішнього послідовного стилю і, як правило, слідувати галузевим широким правилам кодування.

Не є метою ознайомлення з тематикою «закінчення реалізації». Однак, якщо рецензент бореться з розумінням виконання подання, то вони можуть попросити зміни, щоб зробити виконання більш прозорим. Зокрема, якщо рецензенти не можуть переконувати себе, що подання є безкоштовним від дефектів, то можуть бути необхідні зміни.

В рамках рецензування рецензент може створити альтернативний запит на Pull для теми. Це може бути зроблено для того, щоб уникнути зайвих "повернення і вперед" на незначних процесуальних пунктах і, таким чином, потокового процесу подання. Це також може бути зроблено, тому що обговорення надихає рецензента для створення альтернативної реалізації. Обидві ситуації є нормальним результатом рецензування і не слід вважати критикою оригінального подання.

### Допомога з відгуками

Ми вдячні за відгуки! Не обов'язково бути [listed рецензент](#reviewers) для виконання рецензента. Підтверджувачі GitHub Pull Запити також заохочуються переглядати власні уявлення.

Щоб допомогти з оглядом, слідуйте за кроками, викладеними в [що очікувати в огляді](#what-to-expect-in-a-review) для перевірки подання. Після завершення рецензування додайте коментар до GitHub Pull Запит з вашими результатами. Якщо подача проходить рецензування, то будь ласка, стан, який явно в коментарях - наприклад, щось схоже "Я переглядав цю зміну відповідно до кроків у документі про КОНТРЕЙДУВАННЯ і все добре виглядає до мене". Якщо не вдалося завершити деякі кроки в огляді, то будь ласка, явно стану, які кроки були розглянуті, і які кроки не були розглянуті - наприклад, щось схоже "Я не перевірив код для дефектів, але я рецензував все інше в документі КОНТРЕЙДУВАННЯ і він добре виглядає".

Ми також цінуємо тестування заявок. Якщо код був протестований, будь ласка, додайте коментар до GitHub Pull Запит з результатами тесту - успіху або невдачі. Будь ласка, явно стан, що код був протестований і результати - наприклад, щось схоже "Я перевірив цей код на моєму принтері Acme900Z з вазею друку і результати були хороші".

### Редактори

Кліппер "відгуки" є:

| Ім’я | GitHub Id | Зона інтересу |
| --- | --- | --- |
| Дмитро Бутюгін | @d mbutyugin | Вхідне формування, резонансне тестування, кінематика |
| Ерік Калаган | @Арксин | Вирівнювання ліжка, миготливий MCU |
| Джеймс Хартлі | @ДжемсХ1978 | Налаштування файлів |
| Кевін О'Коннор | @KevinOConнор | Система руху ядра, код Micro-controller |

Будь ласка, не "ping" будь-який з рецензентів і будь ласка, не прямі надсилання. Всі рецензенти контролюють форуми та PR, а також прийматимуться на відгуки, коли вони встигнуть.

Кліппер «помічники»:

| Ім’я | Ім'я GitHub |
| --- | --- |
| Кевін О'Коннор | @KevinOConнор |

## Формат комісних повідомлень

Кожна комісія повинна мати повідомлення, відформатований аналогічним чином:

```
модуль: капіталізований, короткий (50 chars або менше) резюме

Більш детальний пояснювальний текст, при необхідності. Обгортання до 75
символи або так. У деяких контекстах оброблюється перша лінія як
предмет електронної пошти та решти тексту як тіла. Заготовка
лінія, що відокремлює резюме від тіла, є критичним (не знаєте, що ви
тіло повністю; інструменти, такі як база, можуть плутати, якщо ви працюєте
два разом.

Далі абзаци приходять після порожніх ліній.

Ім'я користувача <myemail@example.org>
```

У наведеному вище прикладі `модуль` має бути назва файлу або каталогу в репозиторію (без розширення файлу). Наприклад, `clocksync: Виправлення типу у паузи() виклику під час підключення `. Мета визначення імені модуля в комітовому повідомленні полягає в тому, щоб допомогти забезпечити контекст для коментарів.

Важливо мати лінійку «Signed-off-by» на кожну комісію - засвідчує, що ви погоджуєтесь на [developer сертифікат походження](developer-certificate-of-origin). Необхідно вказати Ваше ім'я (сорти, без псевдонімів або анонімних внесків) і містити точну адресу електронної пошти.

## Внесок до перекладу Klipper

[Klipper-translations Project](https://github.com/Klipper3d/klipper-translations) - проект, присвячений перекладі Klipper на різні мови. [Weblate](https://hosted.weblate.org/projects/klipper/) проводить всі рядки Gettext для перекладу та перегляду. Місцеві жителі можуть відображатися на [klipper3d.org](https://www.klipper3d.org) після того, як вони задовольнять наступні вимоги:

- [ ] 75% Всього покриття
- [ ] Всі заголовки (H1) переведені
- [ ] Оновлена навігаційна ієрархія PR в klipper-translations.

Для зменшення фрустрації перекладацьких умов та отримання обізнаності про постійні переклади можна подати PR, що модифікує проект [Кліппер-трансляції](https://github.com/Klipper3d/klipper-translations) `readme.md`. Після того, як переклад готовий, можна зробити відповідну модифікацію проекту Klipper.

Якщо переклад вже існує в репозиторію Кліппер і більше не відповідає списку перевірок вище, він буде позначений станом на місяць без оновлення.

Після виконання вимог необхідно:

1. [active_translations](https://github.com/Klipper3d/klipper-translations/blob/translations/active_translations)
1. Додатково: додати ручний індекс. md файл в klipper-translations repository `docs\locals\<lang>` папка для заміни певного індексу мови.md (генерований індекс.md не дає права).

Знанні питання:

1. В даний час існує метод правильної перекладацької документації
1. Не можна перевести назви в mkdocs.yml.
