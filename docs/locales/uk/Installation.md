# Встановлення

Ці інструкції припускають програмне забезпечення, яке буде працювати на основі Linux, що працює Klipper сумісний передній кінець. Рекомендовано, що SBC (Маленькі дошки комп'ютерів), такі як малиновий Pi або Debian на основі Linux пристрій використовується як хост машина (див. [FAQ](FAQ.md#can-i-run-klipper-on-something-other-than-a-raspberry-pi-3) для інших варіантів).

Для цілей цих інструкцій, що належать до пристрою Linux і mcu, відноситься до друкованої плати. SBC відноситься до терміну Малої дошки комп'ютер, такі як Малина Пі.

## Отримання файлу конфігурації кліппера

Більшість параметрів Klipper визначається «файлом конфігурації принтера» printer.cfg, який зберігатиметься на хості. Відповідний файл конфігурації часто можна знайти, переглянувши [каталог конфігурації](../config/) Klipper для файлу, який починається з префікса «printer-», який відповідає цільовому принтеру. Файл конфігурації Klipper містить технічну інформацію про принтер, яка знадобиться під час встановлення.

Якщо ви не є відповідним файлом конфігурації принтера в каталозі Klipper, то спробуйте шукати сайт виробника принтера, щоб побачити, якщо у них є відповідний файл конфігурації Klipper.

Якщо не вдається знайти файл конфігурації для принтера, але відомий тип плати керування принтером, знайдіть відповідний [файл конфігурації](../config/), який починається з префікса "generic-". Ці приклади файлів плати принтера повинні дозволити успішно завершити початкову інсталяцію, але потребують певних налаштувань для отримання повної функціональності принтера.

Також можна визначити нову конфігурацію принтера з нуля. Однак для цього потрібні значні технічні знання про принтер та його електроніку. Рекомендується, щоб більшість користувачів починали з відповідного файлу конфігурації. Якщо ви створюєте новий власний файл конфігурації принтера, почніть із найближчого прикладу [конфігураційного файлу](../config/) і скористайтеся Klipper [конфігураційним посиланням](Config_Reference.md) для отримання додаткової інформації.

## Інтерактивація з клиппером

Klipper - це прошивка принтера 3d, тому вона потребує певного способу взаємодії з ним.

В даний час кращі варіанти є передніми кінцями, які отримують інформацію через [Moonraker web API](https://moonraker.readthedocs.io/) і є також можливість використовувати [Octoprint](https://octoprint.org/) для управління Klipper.

Вибір є користувачем на те, що використовувати, але основний кліппер є однаковим у всіх випадках. Ми заохочуємо користувачів до дослідження варіантів, доступних і прийняття рішення.

## Отримання образу ОС для SBC

Існує багато способів отримання образу ОС для кріплень для використання SBC, більшість залежать від того, що передній кінець ви хочете використовувати. Деякі манфакси цих панелей SBC також надають свої власні Кліппер-центричні зображення.

Два основних Moonraker на основі передніх кінців [Fluidd](https://docs.fluidd.xyz/) і [Mainsail](https://docs.mainsail.xyz/), останнє з яких має попередньо встановлене зображення [MainsailOS"](http://docs.mainsailOS.xyz), це має варіант для Raspberry Pi і деякі варіанти OrangePi.

Фрідд можна встановити через KIAUH(Klipper Install І Update Helper), який пояснюється нижче і є 3-й вечірній інсталятор для всіх речей Klipper.

OctoPrint може бути встановлений за допомогою популярного OctoPi зображення або через KIAUH, цей процес пояснюється <OctoPrint.md>

## Встановлення через КІАУХ

Зазвичай ви почнете з базовим зображенням для вашого SBC, RPiOS Lite, наприклад, або у випадку пристрою x86 Linux, Ubuntu Server. Будь ласка, зверніть увагу, що варіанти робочого столу не рекомендуються через певні програми, які можуть зупинити деякі функції Klipper, які працюють і навіть маскувати доступ до деяких друкованих плат.

KIAUH може використовуватися для установки Klipper та його пов'язаних програм на різних Linux базових системах, які виконують форму Debian. Більше інформації можна знайти на https://github.com/dw-0/kiauh

## Будівництво та миготливий мікроконтролер

Щоб компілювати код мікроконтролера, запустіть ці команди на пристрої хосту:

```
cd ~ / клиппер /
налаштування меню
```

У коментарях у верхній частині файлу конфігурації [printer](#obtain-a-klipper-configuration-file) слід описати налаштування, які необхідно встановити під час меню "makeconfig". Відкрийте файл у веб-браузері або текстовому редакторі та ознайомтеся з цими інструкціями у верхній частині файлу. Після того, як було налаштовано відповідні налаштування "menuconfig", натисніть кнопку "Q" для виходу, а потім "Y" для збереження. Далі запустіть:

```
зроби
```

Якщо коментарі у верхній частині файлу конфігурації [printer](#obtain-a-klipper-configuration-file) описують користувацькі кроки для "flashing" кінцевого зображення до панелі керування принтером, а потім приступайте до [configuring OctoPrint](#configuring-octoprint-to-use-klipper).

В іншому випадку часто використовуються наступні дії для "flash" обробної дошки. Спочатку необхідно визначити послідовний порт, підключений до мікроконтролера. Запустити наступне:

```
ls /dev/serial/by-id/ ім'я *
```

Повідомляти щось схоже на наступне:

```
/dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0
```

Це загальний для кожного принтера, щоб мати свою унікальну назву серійного порту. Це унікальне ім'я буде використовуватися при митті мікроконтролера. Можливо, є декілька рядків у вищевказаному виході - якщо так, виберіть рядок, що відповідає мікроконтролю. Якщо багато елементів вказані і вибір неоднозначні, розгорніть дошку і запустіть команду знову, відсутній пункт буде вашим друкованим дошкою (див. [FAQ](FAQ.md#wheres-my-serial-port) для отримання додаткової інформації).

Для звичайних мікроконтролерів з чіпсами STM32 або клоном, чіпсами LPC та іншими стандартно, що ці дані потребують початкового спалаху Klipper через SD-карту.

Якщо миготливий з цим методом, важливо переконатися, що друкована плата не підключена з USB до хосту, через деякі дошки, які здатні годувати живлення дошки і зупинити спалах від виникання.

Для звичайних мікроконтролерів з використанням чіпсів Atmega, наприклад, 2560, код може бути спалахований чимось схожим на:

```
sudo обслуговування klipper стоп
зробити флеш FLASH_DEVICE=/dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0
sudo сервіс klipper старт
```

Будьте впевнені, що оновлення FLASH_DEVICE з унікальною серійною назвою принтера.

Для звичайних мікроконтролерів з використанням чіпсів RP2040, код може бути спалахований чимось схожим на:

```
sudo обслуговування klipper стоп
зробити флеш FLASH_DEVICE=перший
sudo сервіс klipper старт
```

Важливо відзначити, що чіпси RP2040 можуть знадобитися вводити в режим завантаження до цієї операції.

## Налаштування кліппера

Наступним кроком є копіювання файлу конфігурації [printer](#obtain-a-klipper-configuration-file) до хосту.

Важко найпростіший спосіб встановити файл конфігурації Klipper за допомогою вбудованих редакторів в Mainsail або Fluidd. Це дозволить користувачеві відкрити приклади конфігурації і зберегти їх на принтері.cfg.

Ще одним варіантом є використання настільного редактора, який підтримує редагування файлів за протоколами "шприц" та/або "шрифт". Доступні інструменти, які підтримують це (наприклад, Notepad++, WinSCP та Cyberduck). Завантажте файл конфігурації принтера в редакторі, а потім збережіть його як файл, названий "printer.cfg" в домашньому каталозі користувача pi (тобто /home/pi/printer.cfg).

Крім того, можна скопіювати і редагувати файл безпосередньо на сайті ssh. Що може виглядати щось схоже на наступне (обов'язково оновити команду, щоб використовувати відповідне ім'я конфігурації принтера):

```
javascript licenses api веб-сайт go1.13.8 ~/принтер.cfg
javascript licenses api веб-сайт go1.13.8
```

Для кожного принтера необхідно мати власну унікальну назву мікроконтролера. Ім'я може змінитися після того, як миготливий кліппер, так що повторно виконайте ці кроки, навіть якщо вони вже робилися при флешці. Запуск:

```
ls /dev/serial/by-id/ ім'я *
```

Повідомляти щось схоже на наступне:

```
/dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0
```

Потім оновити файл config з унікальною назвою. Наприклад, оновити розділ `[mcu]`, щоб подивитися щось схоже на:

```
[mcu]
Серія: /dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0
```

Після створення та редагування файлу потрібно буде випустити команду «решта» в консолі команди для завантаження конфігурації. Команда «статус» повідомить принтер готовим, якщо файл налаштування Klipper успішно читається, а мікроконтролер успішно знайдений і налаштований.

Коли налаштовує файл налаштування принтера, це не рідкість для Klipper, щоб повідомити помилку конфігурації. Якщо виникає помилка, зробіть будь-які необхідні корективи до файлу налаштувань принтера і виписку «рештарт» до звіту «статус».

Klipper повідомляє повідомлення про помилки через консолі команд і через додаток в Fluidd і Mainsail. Команда «статус» може використовуватися для повторних повідомлень про помилки. Журнал доступний і зазвичай знаходиться в ~/printer_data/logs це називається klippy. Увійти

Після того, як Klipper повідомляє, що принтер готовий, приступайте до [config check документ](Config_checks.md) для виконання деяких базових перевірок на визначеннях у файлі конфігурації. Головна [Довідник](Overview.md) для іншої інформації.
