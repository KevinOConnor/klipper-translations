# Використання інструментів PWM

Цей документ описує, як налаштувати PWM-керований лазер або шпиндель за допомогою `виход_pin` і деякі макроси.

## Як це працює?

Ви можете керувати лазерами або шпиндельками. Це корисно, якщо ви використовуєте комутаційні головки друку, наприклад, інструмент обміну E3D або рішення DIY. Як правило, кам-інструменти, такі як LaserWeb можна налаштувати для використання `M3-M5` команди, які стоять для *spindle швидкість CW* (`M3 S[0-255]`), *spindle швидкість CCW* (`M4 S[0-255]`) і *spindle stop* (`M5[377X].

**Навігація:** Коли водіння лазера, зберігайте всі запобіжні заходи безпеки, які ви можете подумати про! Неперевершені діодні лазери. Це означає, що при перезапускі МКУ лазер буде *fully on* на час, коли МКУ знову забирає. Для хорошого виміру рекомендується *always* носити відповідні лазерні окуляри правої довжини хвилі, якщо лазер працює; і від'єднати лазер, коли він не потрібен. Крім того, ви повинні налаштувати час служби безпеки, щоб коли ваш хост або MCU зіткнувся з помилкою, інструмент зупиниться.

Наприклад конфігурація, див. [config/sample-pwm-tool.cfg](/config/sample-pwm-tool.cfg).

## Поточні обмеження

Існує обмеження, як часті оновлення PWM. В той час як дуже точний, оновлення PWM може відбуватися лише кожні 0,1 секунд, що дає йому практично без використання для гравірування растрових променів. Тим не менш, існує [експериментальне відділення](https://github.com/Cirromulus/klipper/tree/laser_tool) з власними торговими точками. У довгостроковій перспективі планується додати цю функціональність до основного клиппера.

## Команди

`M3/M4 S<value>` : Комплект PWM-цикл. Цінності між 0 і 255. `M5` : Stop PWM вихід для відключення значення.

## Конфігурація веб-сайтів

Якщо ви використовуєте лазерний веб-сайт, робоча конфігурація буде:

    GCODE START:
    M5 ; Відключений лазер
    G21 ; Комплектуючі до мм
    G90 ; Абсолютне позиціонування
    G0 Z0 F7000 ; Настроювання швидкості
    
    GCODE END:
    M5 ; Відключений лазер
    G91 ; відносний
    G0 Z+20 F4000 ;
    G90 ; абсолютний
    
    GCODE HOMING:
    M5 ; Відключений лазер
    G28 ; Головна вісь
    
    ОНОВЛЕННЯ:
    M3 $інтенсивність
    
    ЗАМОВИТИ:
    M5 ; Відключений лазер
    
    ЛАЗЕРНА ІНТЕНСІЯ:
    Р
